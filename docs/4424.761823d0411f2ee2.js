"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[4424],{4424:(ie,N,s)=>{s.r(N),s.d(N,{ParametersModule:()=>g});var Z=s(9299),n=s(4006),k=s(7579),D=s(2722);class Q{constructor(t,a,l,r,o,E,X,$,ee,te,ae,se,oe,ne){this.id=t,this.appointmentReminderDuration=a,this.agendaNoteReminder=l,this.days=r,this.smsCompany=o,this.cashAccount=E,this.creditCardCashAccount=X,this.bankTransferCashAccount=$,this.whatsappTemplate=ee,this.customerWelcomeTemplate=te,this.automaticAppointmentReminderMessageTemplate=ae,this.isOtoCustomerWelcomeMessage=se,this.displayVetNo=oe,this.autoSms=ne}}var y=s(5263),M=s(9079),S=s(487),e=s(4650),F=s(1723),B=s(6717);class u{constructor(t){this._httpService=t}getparameterList(){return this._httpService.getRequest(F.z.parameters.parametersList)}updateParameters(t){return this._httpService.post(F.z.parameters.updateparameters,t)}}u.\u0275fac=function(t){return new(t||u)(e.LFG(B.O))},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"});var O=s(5707),R=s(6640),d=s(4859),c=s(9549),m=s(7392),p=s(284),f=s(4385),J=s(3238),v=s(455),P=s(6895);function b(i,t){if(1&i&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&i){const a=t.$implicit;e.Q6J("value",a),e.xp6(1),e.Oqu(a)}}function H(i,t){if(1&i&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&i){const a=t.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.casename)}}function I(i,t){if(1&i&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&i){const a=t.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.casename)}}function W(i,t){if(1&i&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&i){const a=t.$implicit;e.Q6J("value",a.id),e.xp6(1),e.Oqu(a.casename)}}const T=function(){return{standalone:!0}};class h{constructor(t,a,l,r,o){this._formBuilder=t,this._parametersService=a,this.cdr=l,this._translocoService=r,this._casingdefinitionService=o,this.days=["Pazartesi","Sal\u0131","\xc7ar\u015famba","Per\u015fembe","Cuma","Cumartesi","Pazar"],this.selectedDays=new n.NI([]),this.allselectcheck="T\xfcm\xfcn\xfc Se\xe7",this.checkAllSelect=!1,this.weeks="",this._unsubscribeAll=new k.x,this.updateid="",this.casingcards=[],this.selectedCasingId=""}ngOnInit(){this.getCasingDefinition(),this.getParametersList(),this.parameters=this._formBuilder.group({id:[""],appointmentReminderDuration:[0],smsCompany:[""],agendaNoteReminder:[0],days:[[]],cashAccount:[""],creditCardCashAccount:[""],bankTransferCashAccount:[""],whatsappTemplate:[""],customerWelcomeTemplate:[""],isOtoCustomerWelcomeMessage:[!1],autoSms:[!1],displayVetNo:[!1],automaticAppointmentReminderMessageTemplate:[""]})}ngAfterViewInit(){this._casingdefinitionService.getCasingDefinitionList().subscribe(t=>{if(0!==t.data.length){const a=t.data[0].id;this.parameters=this._formBuilder.group({id:[""],appointmentReminderDuration:[0],smsCompany:[""],agendaNoteReminder:[0],days:[[]],cashAccount:[0!==this.parameters.value.cashAccount.length?this.parameters.value.cashAccount:a],creditCardCashAccount:[0!==this.parameters.value.creditCardCashAccount.length?this.parameters.value.creditCardCashAccount:a],bankTransferCashAccount:[0!==this.parameters.value.bankTransferCashAccount.length?this.parameters.value.bankTransferCashAccount:a],whatsappTemplate:[""],customerWelcomeTemplate:[""],isOtoCustomerWelcomeMessage:[!1],autoSms:[!1],displayVetNo:[!1],automaticAppointmentReminderMessageTemplate:[""]})}})}getCasingDefinition(){this._casingdefinitionService.getCasingDefinitionList().subscribe(t=>{this.casingcards=t.data,console.log(this.casingcards)})}getParametersList(){this._parametersService.getparameterList().pipe((0,D.R)(this._unsubscribeAll)).subscribe(t=>{t&&t.data&&(this.getParameters=t.data,this.cdr.markForCheck(),t.data.length>0)&&this.fillFormData(this.getParameters)})}fillFormData(t){const a=t[0].days.split(",").slice(0,-1);null!==this.getParameters&&(this.parameters.setValue({id:t[0].id,appointmentReminderDuration:t[0].appointmentReminderDuration,smsCompany:t[0].smsCompany,agendaNoteReminder:t[0].agendaNoteReminder,days:a,cashAccount:t[0].cashAccount,creditCardCashAccount:t[0].creditCardCashAccount,bankTransferCashAccount:t[0].bankTransferCashAccount,whatsappTemplate:t[0].whatsappTemplate,customerWelcomeTemplate:t[0].customerWelcomeTemplate,isOtoCustomerWelcomeMessage:t[0].isOtoCustomerWelcomeMessage,autoSms:t[0].autoSms,displayVetNo:t[0].displayVetNo,automaticAppointmentReminderMessageTemplate:t[0].automaticAppointmentReminderMessageTemplate}),this.selectedDays.setValue(a))}filterCustomerId(t){this.selectedCasingId=t}onSmsCompanySelectionChange(t){}oncashAccountSelectionChange(t){}oncreditCardCashAccountSelectionChange(t){}onbankTransferCashAccountSelectionChange(t){}onwhatsappTemplateSelectionChange(t){}oncustomerWelcomeTemplateSelectionChange(t){}onautomaticAppointmentReminderMessageTemplateSelectionChange(t){}getFormValueByName(t){return this.parameters.get(t).value}saveParameter(){const t=this.getParameters.length;0===t&&(this.updateid="00000000-0000-0000-0000-000000000000"),0!==t&&(this.updateid=this.getParameters[0].id);const a=new Q(this.updateid,this.getFormValueByName("appointmentReminderDuration"),this.getFormValueByName("agendaNoteReminder"),this.getFormValueByName("days"),""!==this.getFormValueByName("smsCompany")?this.getFormValueByName("smsCompany"):"00000000-0000-0000-0000-000000000000",""!==this.getFormValueByName("cashAccount")?this.getFormValueByName("cashAccount"):"00000000-0000-0000-0000-000000000000",""!==this.getFormValueByName("creditCardCashAccount")?this.getFormValueByName("creditCardCashAccount"):"00000000-0000-0000-0000-000000000000",""!==this.getFormValueByName("bankTransferCashAccount")?this.getFormValueByName("bankTransferCashAccount"):"00000000-0000-0000-0000-000000000000",""!==this.getFormValueByName("whatsappTemplate")?this.getFormValueByName("whatsappTemplate"):"00000000-0000-0000-0000-000000000000",""!==this.getFormValueByName("customerWelcomeTemplate")?this.getFormValueByName("customerWelcomeTemplate"):"00000000-0000-0000-0000-000000000000",""!==this.getFormValueByName("automaticAppointmentReminderMessageTemplate")?this.getFormValueByName("automaticAppointmentReminderMessageTemplate"):"00000000-0000-0000-0000-000000000000",this.getFormValueByName("isOtoCustomerWelcomeMessage"),this.getFormValueByName("displayVetNo"),this.getFormValueByName("autoSms"));this.selectedDays.value.forEach(l=>{this.weeks+=l+","}),a.days=this.weeks,this._parametersService.updateParameters(a).subscribe(l=>{l.isSuccessful?(this.showSweetAlert("success"),this.getParametersList()):this.showSweetAlert("error")},l=>{console.log(l)})}selectAllDays(t){"T\xfcm\xfcn\xfc Kald\u0131r"==this.allselectcheck?(this.checkAllSelect=!1,this.selectedDays.setValue([]),this.allselectcheck="T\xfcm\xfcn\xfc Se\xe7"):(this.checkAllSelect=!0,this.allselectcheck="T\xfcm\xfcn\xfc Kald\u0131r",this.selectedDays.setValue(this.days))}showSweetAlert(t){if("success"===t){const a=new S.c(this.translate("sweetalert.success"),this.translate("sweetalert.transactionSuccessful"),M.p.success);y.m.sweetAlert(a)}else{const a=new S.c(this.translate("sweetalert.error"),this.translate("sweetalert.transactionFailed"),M.p.error);y.m.sweetAlert(a)}}translate(t){return this._translocoService.translate(t)}}h.\u0275fac=function(t){return new(t||h)(e.Y36(n.QS),e.Y36(u),e.Y36(e.sBO),e.Y36(O.Vn),e.Y36(R.J))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-parameters"]],decls:108,vars:43,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"font-medium","tracking-tight","text-secondary"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],["mat-flat-button","",1,"ml-3",3,"color","click"],[1,"icon-size-5","mr-2",3,"svgIcon"],[1,"flex-auto","-mt-16","p-6","sm:p-10","rounded-t-2xl","shadow","bg-card"],[3,"formGroup"],[1,"grid","grid-cols-2","gap-6","w-full","mt-8"],[1,"flex-auto","items-center","justify-between","cursor-pointer"],[1,"leading-6","font-medium"],["type","number","matInput","",1,"ml-2",3,"formControlName"],[1,"w-full"],["name","",3,"formControlName","placeholder","selectionChange"],["securityToggle",""],["multiple","",1,"ml-2",3,"formControl"],[3,"value","click"],[3,"value",4,"ngFor","ngForOf"],[2,"width","100%"],[3,"formControlName","placeholder"],[3,"ngModelOptions","ngModel","ngModelChange"],["whatsappTemplateToggle",""],["customerWelcomeTemplateToggle",""],[1,"flex","items-center","justify-between","cursor-pointer",3,"click"],[1,"ml-2",3,"color","formControlName","click"],["displayVetNoToggle",""],["isOtoCustomerWelcomeMessageToggle",""],["autoSmsToggle",""],[3,"value"]],template:function(t,a){if(1&t){const l=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"a",4),e._UZ(6,"mat-icon",5),e.TgZ(7,"span",6),e._uU(8,"Back"),e.qZA()()()(),e.TgZ(9,"div",7)(10,"h2",8),e._uU(11," Parametreler "),e.qZA()(),e.TgZ(12,"div",9),e._uU(13,"Sistem Y\xf6neticisi taraf\u0131ndan i\u015fleni\u015f parametreleri "),e.qZA()(),e.TgZ(14,"div",10)(15,"button",11),e.NdJ("click",function(){return a.saveParameter()}),e._UZ(16,"mat-icon",12),e._uU(17," Kaydet "),e.qZA()(),e._UZ(18,"div",10),e.qZA(),e.TgZ(19,"div",13)(20,"form",14)(21,"div",15)(22,"div",16)(23,"div",17),e._uU(24,"Ajanda Notu Hat\u0131rlatma(G\xfcn)"),e.qZA(),e.TgZ(25,"mat-form-field"),e._UZ(26,"input",18),e.qZA()(),e.TgZ(27,"div",16)(28,"div",17),e._uU(29,"SMS \u015eirketi"),e.qZA(),e.TgZ(30,"mat-form-field",19)(31,"mat-select",20,21),e.NdJ("selectionChange",function(o){return a.onSmsCompanySelectionChange(o)}),e.TgZ(33,"mat-option"),e._uU(34,"None"),e.qZA()()()(),e.TgZ(35,"div",16)(36,"div",17),e._uU(37,"Randevu Hat\u0131rlatma S\xfcresi(G\xfcn)"),e.qZA(),e.TgZ(38,"mat-form-field"),e._UZ(39,"input",18),e.qZA()(),e.TgZ(40,"div",16)(41,"div",17),e._uU(42,"\xc7al\u0131\u015fma G\xfcnleri"),e.qZA(),e.TgZ(43,"mat-form-field")(44,"mat-select",22)(45,"mat-option",23),e.NdJ("click",function(o){return a.selectAllDays(o)}),e._uU(46),e.qZA(),e.YNc(47,b,2,2,"mat-option",24),e.qZA()()(),e.TgZ(48,"div",16)(49,"div",17),e._uU(50,"Nakit Kasa Hesab\u0131"),e.qZA(),e.TgZ(51,"mat-form-field",25)(52,"mat-select",26)(53,"mat-select-filter",27),e.NdJ("ngModelChange",function(o){return a.filterCustomerId(o)}),e.qZA(),e.YNc(54,H,2,2,"mat-option",24),e.qZA()()(),e.TgZ(55,"div",16)(56,"div",17),e._uU(57,"Kredi Kart\u0131 Kasa Hesab\u0131"),e.qZA(),e.TgZ(58,"mat-form-field",25)(59,"mat-select",26)(60,"mat-select-filter",27),e.NdJ("ngModelChange",function(o){return a.filterCustomerId(o)}),e.qZA(),e.YNc(61,I,2,2,"mat-option",24),e.qZA()()(),e.TgZ(62,"div",16)(63,"div",17),e._uU(64,"Banka Havale Kasa Hesab\u0131"),e.qZA(),e.TgZ(65,"mat-form-field",25)(66,"mat-select",26)(67,"mat-select-filter",27),e.NdJ("ngModelChange",function(o){return a.filterCustomerId(o)}),e.qZA(),e.YNc(68,W,2,2,"mat-option",24),e.qZA()()(),e.TgZ(69,"div",16)(70,"div",17),e._uU(71,"Whatsapp \u015eablonu"),e.qZA(),e.TgZ(72,"mat-form-field",19)(73,"mat-select",20,28),e.NdJ("selectionChange",function(o){return a.onwhatsappTemplateSelectionChange(o)}),e.TgZ(75,"mat-option"),e._uU(76,"None"),e.qZA()()()(),e.TgZ(77,"div",16)(78,"div",17),e._uU(79,"M\xfc\u015fteri Ho\u015fgeldin \u015eablonu"),e.qZA(),e.TgZ(80,"mat-form-field",19)(81,"mat-select",20,29),e.NdJ("selectionChange",function(o){return a.oncustomerWelcomeTemplateSelectionChange(o)}),e.TgZ(83,"mat-option"),e._uU(84,"None"),e.qZA()()()(),e.TgZ(85,"div",16)(86,"div",17),e._uU(87,"Otomatik Randevu Hat\u0131rlatma Mesaj\u0131 \u015eablonu"),e.qZA(),e.TgZ(88,"mat-form-field",19)(89,"mat-select",20,29),e.NdJ("selectionChange",function(o){return a.onautomaticAppointmentReminderMessageTemplateSelectionChange(o)}),e.TgZ(91,"mat-option"),e._uU(92,"None"),e.qZA()()()(),e.TgZ(93,"div",30),e.NdJ("click",function(){e.CHM(l);const o=e.MAs(97);return e.KtG(o.toggle())}),e.TgZ(94,"div",17),e._uU(95,"Veteriner Numaras\u0131 G\xf6z\xfcks\xfcn(SMS)"),e.qZA(),e.TgZ(96,"mat-slide-toggle",31,32),e.NdJ("click",function(){e.CHM(l);const o=e.MAs(97);return e.KtG(o.toggle())}),e.qZA()(),e.TgZ(98,"div",30),e.NdJ("click",function(){e.CHM(l);const o=e.MAs(102);return e.KtG(o.toggle())}),e.TgZ(99,"div",17),e._uU(100,"Otomatik M\xfc\u015fteri Ho\u015fgeldin Mesaj\u0131 G\xf6nderilsin mi?"),e.qZA(),e.TgZ(101,"mat-slide-toggle",31,33),e.NdJ("click",function(){e.CHM(l);const o=e.MAs(102);return e.KtG(o.toggle())}),e.qZA()(),e.TgZ(103,"div",30),e.NdJ("click",function(){e.CHM(l);const o=e.MAs(107);return e.KtG(o.toggle())}),e.TgZ(104,"div",17),e._uU(105,"Otomatik Sms"),e.qZA(),e.TgZ(106,"mat-slide-toggle",31,34),e.NdJ("click",function(){e.CHM(l);const o=e.MAs(107);return e.KtG(o.toggle())}),e.qZA()()()()()()}2&t&&(e.xp6(5),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(9),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:link"),e.xp6(4),e.Q6J("formGroup",a.parameters),e.xp6(6),e.Q6J("formControlName","agendaNoteReminder"),e.xp6(5),e.Q6J("formControlName","smsCompany")("placeholder",""),e.xp6(8),e.Q6J("formControlName","appointmentReminderDuration"),e.xp6(5),e.Q6J("formControl",a.selectedDays),e.xp6(1),e.Q6J("value",a.allselectcheck),e.xp6(1),e.Oqu(a.allselectcheck),e.xp6(1),e.Q6J("ngForOf",a.days),e.xp6(5),e.Q6J("formControlName","cashAccount")("placeholder","Nakit Kasa Hesab\u0131"),e.xp6(1),e.Q6J("ngModelOptions",e.DdM(40,T))("ngModel",a.selectedCasingId),e.xp6(1),e.Q6J("ngForOf",a.casingcards),e.xp6(5),e.Q6J("formControlName","creditCardCashAccount")("placeholder","Kredi Kart\u0131 Kasa Hesab\u0131"),e.xp6(1),e.Q6J("ngModelOptions",e.DdM(41,T))("ngModel",a.selectedCasingId),e.xp6(1),e.Q6J("ngForOf",a.casingcards),e.xp6(5),e.Q6J("formControlName","bankTransferCashAccount")("placeholder","Banka Havale Kasa Hesab\u0131"),e.xp6(1),e.Q6J("ngModelOptions",e.DdM(42,T))("ngModel",a.selectedCasingId),e.xp6(1),e.Q6J("ngForOf",a.casingcards),e.xp6(5),e.Q6J("formControlName","whatsappTemplate")("placeholder",""),e.xp6(8),e.Q6J("formControlName","customerWelcomeTemplate")("placeholder",""),e.xp6(8),e.Q6J("formControlName","automaticAppointmentReminderMessageTemplate")("placeholder",""),e.xp6(7),e.Q6J("color","primary")("formControlName","displayVetNo"),e.xp6(5),e.Q6J("color","primary")("formControlName","isOtoCustomerWelcomeMessage"),e.xp6(5),e.Q6J("color","primary")("formControlName","autoSms"))},dependencies:[n._Y,n.Fj,n.wV,n.JJ,n.JL,n.On,d.lW,c.KE,m.Hw,p.Nt,n.oH,n.sg,n.u,f.gD,J.ey,v.Rr,P.sg,Z.rH]});var A=s(5804),C=s(8255),x=s(671),K=s(1948),w=s(3267),_=s(7775),V=s(4466),U=s(6709),L=s(8739),G=s(3162),Y=s(6308),q=s(266),z=s(5412);const j=[{path:"",component:h}];class g{}g.\u0275fac=function(t){return new(t||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[n.u5,d.ot,c.lN,m.Ps,p.c,n.u5,n.UX,A.J,C.Tx,n.u5,x.p0,d.ot,c.lN,m.Ps,p.c,K.Fk,f.LD,w.SJ,v.rP,_.fC,V.m,d.ot,c.lN,m.Ps,p.c,n.u5,n.UX,A.J,C.Tx,n.u5,x.p0,P.ez,m.Ps,c.lN,d.ot,c.lN,m.Ps,p.c,n.u5,n.UX,A.J,C.Tx,f.LD,m.Ps,U.p9,d.ot,U.p9,c.lN,m.Ps,p.c,C.Tx,L.TU,G.Cv,J.si,Y.JX,f.LD,v.rP,q.AV,V.m,z.Is,Z.Bz.forChild(j)]})}}]);