"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[3561],{43561:(H,A,i)=>{i.d(A,{A:()=>j});var n=i(24006),d=i(65412),C=i(70487),Z=i(69079),b=i(45263),B=i(35515);class x{constructor(l,t,a,s,r,u,g,y,v,m){this.id=l,this.customerId=t,this.date=a,this.productId=s,this.remark=r,this.type=u,this.supplierId=g,this.invoiceNo=y,this.paymentType=v,this.amount=m}}var N=i(15439),F=i.n(N),c=i(3238),I=i(88492),e=i(94650),_=i(30430),J=i(40182),M=i(49345),Y=i(16056),D=i(63225),Q=i(19918),T=i(4859),p=i(59549),U=i(97392),w=i(284),S=i(36895),E=i(84385),h=i(99602),V=i(36838);function O(o,l){1&o&&(e.TgZ(0,"span"),e._uU(1,"Sat\u0131\u015f G\xfcncelle"),e.qZA())}function L(o,l){1&o&&(e.TgZ(0,"span"),e._uU(1,"Sat\u0131\u015f Ekle"),e.qZA())}function q(o,l){if(1&o&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE("",t.firstName," ",t.lastName,"")}}const f=function(){return{standalone:!0}};function k(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",12)(1,"mat-form-field",13)(2,"mat-label"),e._uU(3,"M\xfc\u015fteri"),e.qZA(),e.TgZ(4,"mat-select",30)(5,"mat-select-filter",18),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.filterCustomerId(s))}),e.qZA(),e.YNc(6,q,2,3,"mat-option",19),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("formControlName","customerId")("placeholder","M\xfc\u015fteri"),e.xp6(1),e.Q6J("ngModelOptions",e.DdM(5,f))("ngModel",t.selectedCustomerId),e.xp6(1),e.Q6J("ngForOf",t.customerlist)}}function P(o,l){if(1&o&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.suppliername)}}function R(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",12)(1,"mat-form-field",13)(2,"mat-label"),e._uU(3,"Tedarik\xe7i"),e.qZA(),e.TgZ(4,"mat-select",30)(5,"mat-select-filter",18),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.filterCustomerId(s))}),e.qZA(),e.YNc(6,P,2,2,"mat-option",19),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("formControlName","supplierId")("placeholder","Tedarik\xe7i"),e.xp6(1),e.Q6J("ngModelOptions",e.DdM(5,f))("ngModel",t.selectedCustomerId),e.xp6(1),e.Q6J("ngForOf",t.supplierscards)}}function z(o,l){1&o&&(e.TgZ(0,"div",12)(1,"mat-form-field",13)(2,"mat-label"),e._uU(3,"Fatura No"),e.qZA(),e._UZ(4,"input",32),e.qZA()()),2&o&&(e.xp6(4),e.Q6J("formControlName","invoiceNo"))}function G(o,l){if(1&o&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function K(o,l){if(1&o&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.recId),e.xp6(1),e.Oqu(t.name)}}F();const $={parse:{dateInput:"DD/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"DDD MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"DDD MMMM YYYY"}};let j=(()=>{class o{constructor(t,a,s,r,u,g,y,v,m){this._dialogRef=t,this._formBuilder=a,this._translocoService=s,this._salebuyservice=r,this._customerListService=u,this._productdescriptionService=g,this._suppliersService=y,this._paymentmethodsService=v,this.data=m,this.customerlist=[],this.selectedCustomerId="",this.selectedProductId="",this.productdescription=[],this.supplierscards=[],this.payments=[],this.buttonDisabled=!1,this.visibleCustomer=m.visibleCustomer,this.salebuyType=m.salebuyType,this.selectedsalebuy=m.selectedsalebuy,this.isSupplier=m.isSupplier}ngOnInit(){this.getCustomerList(),this.getProductList(),this.paymentsList(),this.isSupplier&&this.getSuppliers(),this.salebuy=this._formBuilder.group({customerId:["00000000-0000-0000-0000-000000000000"],date:[new Date],productId:["00000000-0000-0000-0000-000000000000",n.kI.required],remark:[""],supplierId:["00000000-0000-0000-0000-000000000000"],invoiceNo:[""],paymentType:[1],amount:[1]}),this.fillFormData(this.selectedsalebuy)}fillFormData(t){null!==this.selectedsalebuy&&this.salebuy.setValue({date:t.date,invoiceNo:t.invoiceNo,supplierId:t.supplierName,productId:t.customerName,paymentType:t.paymentName})}getCustomerList(){this._customerListService.getcustomerlist().subscribe(t=>{this.customerlist=t.data,console.log(this.customerlist)})}getProductList(){this._productdescriptionService.getProductDescriptionFilters({ProductType:1}).subscribe(a=>{this.productdescription=a.data})}getSuppliers(){this._suppliersService.getSuppliersList().subscribe(t=>{this.supplierscards=t.data,console.log(this.supplierscards)})}paymentsList(){this._paymentmethodsService.getPaymentMethodsList().subscribe(t=>{this.payments=t.data,console.log(this.payments)})}closeDialog(){this._dialogRef.close({status:null})}filterCustomerId(t){this.selectedCustomerId=t}filterProductId(t){this.selectedProductId=t}getFormValueByName(t){return this.salebuy.get(t).value}addOrUpdateSaleBuy(){this.buttonDisabled=!0,this.selectedsalebuy?this.updateBuySale():this.addBuySale()}addBuySale(){if(this.salebuy.valid){0==this.getFormValueByName("amount")&&this.showSweetAlert("error","Miktar Bilgisi 0(s\u0131f\u0131r) b\xfcy\xfck olmal\u0131d\u0131r.");const a=new B.w(this.getFormValueByName("customerId"),this.getFormValueByName("date"),this.getFormValueByName("productId"),this.getFormValueByName("remark"),this.salebuyType,this.getFormValueByName("supplierId"),this.getFormValueByName("invoiceNo"),this.getFormValueByName("paymentType"),this.getFormValueByName("amount"),"00000000-0000-0000-0000-000000000000");this._salebuyservice.createSaleBuy(a).subscribe(s=>{s.isSuccessful?(this.showSweetAlert("success","sweetalert.success"),this._dialogRef.close({status:!0})):this.showSweetAlert("error","sweetalert.error")},s=>{console.log(s)})}else this.salebuy.get("productId").value||this.showSweetAlert("error","\xdcr\xfcn Se\xe7imi Yap\u0131n\u0131z.")}updateBuySale(){if(this.salebuy.valid){0==this.getFormValueByName("amount")&&this.showSweetAlert("error","Miktar Bilgisi 0(s\u0131f\u0131r) b\xfcy\xfck olmal\u0131d\u0131r.");const a=new x(this.selectedsalebuy.id,this.getFormValueByName("customerId"),this.getFormValueByName("date"),this.getFormValueByName("productId"),this.getFormValueByName("remark"),this.salebuyType,this.getFormValueByName("supplierId"),this.getFormValueByName("invoiceNo"),this.getFormValueByName("paymentType"),this.getFormValueByName("amount"));this._salebuyservice.updateSaleBuy(a).subscribe(s=>{s.isSuccessful?(this.showSweetAlert("success","sweetalert.success"),this._dialogRef.close({status:!0})):this.showSweetAlert("error","sweetalert.error")},s=>{console.log(s)})}else this.salebuy.get("productId").value||this.showSweetAlert("error","\xdcr\xfcn Se\xe7imi Yap\u0131n\u0131z.")}showSweetAlert(t,a){if("success"===t){const s=new C.c(this.translate(a),this.translate("sweetalert.transactionSuccessful"),Z.p.success);b.m.sweetAlert(s)}else{const s=new C.c(this.translate(a),this.translate("sweetalert.transactionFailed"),Z.p.error);b.m.sweetAlert(s)}}translate(t){return this._translocoService.translate(t)}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(d.so),e.Y36(n.qu),e.Y36(_.Vn),e.Y36(J.I),e.Y36(M.v),e.Y36(Y.d),e.Y36(D.R),e.Y36(Q.b),e.Y36(d.WI))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-edit-salesbuy"]],features:[e._Bn([{provide:c._A,useClass:I.t7,deps:[c.Ad,I.o8]},{provide:c.sG,useValue:$}])],decls:63,vars:27,consts:[["mat-dialog-title","",1,"mat-dialog-title"],[1,"dialog-close-button",3,"tabIndex","click"],[1,"material-icons"],[1,"modalForm"],[1,"modal-header"],[1,"modal-title"],[4,"ngIf"],[1,"modal-body","mbody-store"],[1,"qm-pr-content"],[1,"container-fluid",3,"formGroup"],[1,"row"],["class","float : left flex  gt-xs:flex-row",4,"ngIf"],[1,"float",":","left","flex","gt-xs:flex-row"],[1,"ml-5","flex-auto","gt-xs:pl-3"],["matInput","",3,"matDatepicker","formControlName"],["matIconSuffix","",3,"for"],["picker",""],["name","productId",3,"formControlName","placeholder"],[3,"ngModelOptions","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","paymentType",3,"formControlName","placeholder"],["type","number","matInput","",3,"formControlName"],["matInput","","placeholder","L\xfctfen Notunuzu Yaz\u0131n\u0131z...",3,"formControlName"],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","mt-4","sm:mt-6"],[1,"-ml-2"],["mat-icon-button",""],[1,"icon-size-5",3,"svgIcon"],[1,"flex","items-center","mt-4","sm:mt-0"],["mat-stroked-button","",1,"ml-auto","sm:ml-0",3,"click"],["mat-flat-button","",1,"order-first","sm:order-last",3,"color","disabled","click"],["name","customerId",3,"formControlName","placeholder"],[3,"value"],["matInput","",3,"formControlName"]],template:function(a,s){if(1&a&&(e.TgZ(0,"h1",0)(1,"button",1),e.NdJ("click",function(){return s.closeDialog()}),e.TgZ(2,"span",2),e._uU(3," highlight_off "),e.qZA()()(),e.TgZ(4,"div",3)(5,"mat-dialog-content")(6,"div",4)(7,"h5",5),e.YNc(8,O,2,0,"span",6),e.YNc(9,L,2,0,"span",6),e.qZA()(),e.TgZ(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10),e.YNc(14,k,7,6,"div",11),e.YNc(15,R,7,6,"div",11),e.TgZ(16,"div",12)(17,"mat-form-field",13)(18,"mat-label"),e._uU(19,"Tarihi"),e.qZA(),e._UZ(20,"input",14)(21,"mat-datepicker-toggle",15)(22,"mat-datepicker",null,16),e.qZA()(),e.YNc(24,z,5,1,"div",11),e.TgZ(25,"div",12)(26,"mat-form-field",13)(27,"mat-label"),e._uU(28,"\xdcr\xfcnler"),e.qZA(),e.TgZ(29,"mat-select",17)(30,"mat-select-filter",18),e.NdJ("ngModelChange",function(u){return s.filterProductId(u)}),e.qZA(),e.YNc(31,G,2,2,"mat-option",19),e.qZA()()(),e.TgZ(32,"div",12)(33,"mat-form-field",13)(34,"mat-label"),e._uU(35,"\xd6deme \u0130\u015flemi"),e.qZA(),e.TgZ(36,"mat-select",20),e.YNc(37,K,2,2,"mat-option",19),e.qZA()()(),e.TgZ(38,"div",12)(39,"mat-form-field",13)(40,"mat-label"),e._uU(41,"Miktar"),e.qZA(),e._UZ(42,"input",21),e.qZA()(),e.TgZ(43,"div",12)(44,"mat-form-field",13)(45,"mat-label"),e._uU(46,"A\xe7\u0131klama"),e.qZA(),e._UZ(47,"textarea",22),e.qZA()()()()(),e.TgZ(48,"div",23)(49,"div",24)(50,"button",25),e._UZ(51,"mat-icon",26),e.qZA(),e.TgZ(52,"button",25),e._UZ(53,"mat-icon",26),e.qZA(),e.TgZ(54,"button",25),e._UZ(55,"mat-icon",26),e.qZA(),e.TgZ(56,"button",25),e._UZ(57,"mat-icon",26),e.qZA()(),e.TgZ(58,"div",27)(59,"button",28),e.NdJ("click",function(){return s.closeDialog()}),e._uU(60," Vazge\xe7 "),e.qZA(),e.TgZ(61,"button",29),e.NdJ("click",function(){return s.addOrUpdateSaleBuy()}),e._uU(62," Kaydet "),e.qZA()()()()()()),2&a){const r=e.MAs(23);e.xp6(1),e.Q6J("tabIndex",-1),e.xp6(7),e.Q6J("ngIf",s.selectedsalebuy),e.xp6(1),e.Q6J("ngIf",!s.selectedsalebuy),e.xp6(3),e.Q6J("formGroup",s.salebuy),e.xp6(2),e.Q6J("ngIf",s.visibleCustomer),e.xp6(1),e.Q6J("ngIf",s.isSupplier),e.xp6(5),e.Q6J("matDatepicker",r)("formControlName","date"),e.xp6(1),e.Q6J("for",r),e.xp6(3),e.Q6J("ngIf",s.isSupplier),e.xp6(5),e.Q6J("formControlName","productId")("placeholder","\xdcr\xfcnler"),e.xp6(1),e.Q6J("ngModelOptions",e.DdM(26,f))("ngModel",s.selectedProductId),e.xp6(1),e.Q6J("ngForOf",s.productdescription),e.xp6(5),e.Q6J("formControlName","paymentType")("placeholder","\xd6deme Tipi"),e.xp6(1),e.Q6J("ngForOf",s.payments),e.xp6(5),e.Q6J("formControlName","amount"),e.xp6(5),e.Q6J("formControlName","remark"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:paper-clip"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:link"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:emoji-happy"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:photograph"),e.xp6(4),e.Q6J("color","primary")("disabled",s.buttonDisabled)}},dependencies:[n.Fj,n.wV,n.JJ,n.JL,n.On,T.lW,T.RK,p.KE,p.hX,p.R9,U.Hw,w.Nt,n.sg,n.u,S.sg,S.O5,E.gD,c.ey,d.uh,d.xY,h.Mq,h.hl,h.nW,V.Fq],encapsulation:2})}return o})()}}]);