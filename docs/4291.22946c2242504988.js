"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[4291],{4291:(ln,K,d)=>{d.r(K),d.d(K,{Demands:()=>dn});var c=d(24006),T=d(4859),g=d(59549),p=d(97392),Z=d(284),P=d(85804),D=d(28255),j=d(30671),E=d(3848),_=d(36895);class W{constructor(r,t,i,o,a,s,m,u){this.productId=r,this.quantity=t,this.unitprice=i,this.amount=o,this.stockState=a,this.isActive=s,this.reserved=m,this.barcode=u}}var Q=d(77579),f=d(82722),S=d(56451),R=d(63900),Y=d(54004),k=d(98739),C=d(96308),B=d(28288),h=d(70487),x=d(69079),v=d(45263),w=d(65412);class ae{constructor(r,t,i,o,a,s,m,u){this.date=r,this.documentno=t,this.suppliers=i,this.deliverydate=o,this.note=a,this.state=s,this.iscomplated=m,this.demandProductList=u}}var X=d(15439),se=d.n(X),b=d(3238),ee=d(88492),e=d(94650),F=d(83764),N=d(30430),G=d(63225),q=d(16056),ce=d(39349),y=d(56709),I=d(84385),J=d(90455),U=d(99602);function de(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"Sipari\u015f Ekle"),e.qZA())}function le(n,r){if(1&n&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.suppliername)}}function me(n,r){1&n&&(e.TgZ(0,"div",44),e._UZ(1,"div",45),e.qZA())}function _e(n,r){1&n&&(e.TgZ(0,"div",46),e._UZ(1,"div",47),e.qZA())}function ge(n,r){1&n&&(e.TgZ(0,"div",48),e._UZ(1,"div",49),e.qZA())}function ue(n,r){if(1&n&&(e.TgZ(0,"div",71),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function pe(n,r){if(1&n&&(e.ynx(0),e.YNc(1,ue,2,1,"div",70),e.BQk()),2&n){const t=r.$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.id===i.productId)}}function fe(n,r){1&n&&(e.TgZ(0,"div",72),e._uU(1," \xdcR\xdcN SE\xc7\u0130N\u0130Z.. "),e.qZA())}function he(n,r){1&n&&(e.TgZ(0,"div",73),e._UZ(1,"div",74),e.qZA())}function xe(n,r){1&n&&(e.TgZ(0,"div",75),e._UZ(1,"div",47),e.qZA())}function ve(n,r){1&n&&(e.TgZ(0,"div",76),e._UZ(1,"div",77),e.qZA())}function Te(n,r){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",78),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Ce(n,r){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",79),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Ze(n,r){1&n&&e.GkF(0)}const De=function(n){return{$implicit:n}};function be(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Ze,1,0,"ng-container",80),e.BQk()),2&n){const t=e.oxw().$implicit;e.oxw(4);const i=e.MAs(61);e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,De,t))}}function we(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",57)(2,"div",58)(3,"div",59)(4,"mat-checkbox",60),e.NdJ("ngModelChange",function(o){const s=e.CHM(t).$implicit;return e.KtG(s.selected=o)})("change",function(){const a=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.onCheckboxChange(a.id))}),e.qZA()()(),e.TgZ(5,"div"),e.YNc(6,pe,2,1,"ng-container",61),e.YNc(7,fe,2,0,"div",62),e.qZA(),e.TgZ(8,"div",63),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"div",30)(12,"div",64),e._uU(13),e.qZA(),e.YNc(14,he,2,0,"div",65),e.YNc(15,xe,2,0,"div",66),e.YNc(16,ve,2,0,"div",67),e.qZA(),e.TgZ(17,"div",68),e.YNc(18,Te,2,1,"ng-container",6),e.YNc(19,Ce,2,1,"ng-container",6),e.qZA(),e.TgZ(20,"div")(21,"button",69),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.toggleDetails(a.id))}),e._UZ(22,"mat-icon",39),e.qZA()()(),e.TgZ(23,"div",51),e.YNc(24,be,2,4,"ng-container",6),e.qZA(),e.BQk()}if(2&n){const t=r.$implicit,i=e.oxw(4);e.xp6(4),e.Q6J("checked",t.selected)("ngModel",t.selected)("color","primary"),e.xp6(2),e.Q6J("ngForOf",i.productdescription),e.xp6(1),e.Q6J("ngIf","00000000-0000-0000-0000-000000000000"===t.productId),e.xp6(2),e.hij(" ",e.gM2(10,14,t.reserved,"\u20ba","symbol","1.2-2")," "),e.xp6(4),e.Oqu(t.stockState),e.xp6(1),e.Q6J("ngIf",t.stockState<20),e.xp6(1),e.Q6J("ngIf",t.stockState>=20&&t.stockState<30),e.xp6(1),e.Q6J("ngIf",t.stockState>=30),e.xp6(2),e.Q6J("ngIf",1===t.isActive),e.xp6(1),e.Q6J("ngIf",0===t.isActive),e.xp6(3),e.Q6J("svgIcon",(null==i.selectedProduct?null:i.selectedProduct.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(2),e.Q6J("ngIf",(null==i.selectedProduct?null:i.selectedProduct.id)===t.id)}}function Ae(n,r){if(1&n&&(e.ynx(0),e.YNc(1,we,25,19,"ng-container",56),e.BQk()),2&n){const t=r.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}function ke(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",51)(2,"div",52)(3,"div"),e._uU(4,"\u0130\u015flem"),e.qZA(),e.TgZ(5,"div",53),e._uU(6,"\xdcr\xfcn Ad\u0131"),e.qZA(),e.TgZ(7,"div",53),e._uU(8," Toplam Tutar "),e.qZA(),e.TgZ(9,"div",54),e._uU(10," Adet "),e.qZA(),e.TgZ(11,"div",54),e._uU(12," Aktif "),e.qZA(),e.TgZ(13,"div",55),e._uU(14,"Detay"),e.qZA()(),e.YNc(15,Ae,2,2,"ng-container",6),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(5),e.Q6J("mat-sort-header","productId"),e.xp6(2),e.Q6J("mat-sort-header",t.reserved),e.xp6(2),e.Q6J("mat-sort-header",t.stockState),e.xp6(2),e.Q6J("mat-sort-header","isActive"),e.xp6(4),e.Q6J("ngIf",t.productsList)}}function ye(n,r){if(1&n&&(e.ynx(0),e.YNc(1,ke,16,5,"ng-container",50),e.BQk()),2&n){const t=r.ngIf;e.oxw();const i=e.MAs(63);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function Ie(n,r){1&n&&(e.TgZ(0,"span",104),e._uU(1,"NO IMAGE"),e.qZA())}function Qe(n,r){if(1&n&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Fe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",81)(1,"div",82)(2,"form",83)(3,"div",84)(4,"div",85)(5,"div",86)(6,"div",87),e.YNc(7,Ie,2,0,"ng-template"),e.qZA()(),e.TgZ(8,"div",88)(9,"span",89),e._uU(10,"\xdcr\xfcn Durumu"),e.qZA(),e.TgZ(11,"mat-slide-toggle",90),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.isActiveClick)}),e._uU(12),e.qZA()()(),e.TgZ(13,"div",91)(14,"div",92)(15,"mat-form-field",93)(16,"mat-label"),e._uU(17,"\xdcr\xfcn Ad\u0131"),e.qZA(),e.TgZ(18,"mat-select",94),e.NdJ("selectionChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onProductSelectionChange(o))}),e.TgZ(19,"mat-option"),e._uU(20,"None"),e.qZA(),e.YNc(21,Qe,2,2,"mat-option",20),e.qZA()(),e.TgZ(22,"div",95)(23,"mat-form-field",96)(24,"mat-label"),e._uU(25,"Barcode"),e.qZA(),e._UZ(26,"input",97),e.qZA()(),e._UZ(27,"div",95),e.qZA(),e.TgZ(28,"div",98)(29,"mat-form-field",93)(30,"mat-label"),e._uU(31,"Al\u0131\u015f Fiyat"),e.qZA(),e.TgZ(32,"span",99),e._uU(33,"\u20ba"),e.qZA(),e._UZ(34,"input",100),e.qZA(),e.TgZ(35,"mat-form-field",93)(36,"mat-label"),e._uU(37,"Kdv Tutar"),e.qZA(),e.TgZ(38,"span",101),e._uU(39,"\u20ba"),e.qZA(),e._UZ(40,"input",100),e.qZA()(),e.TgZ(41,"div",98)(42,"mat-form-field",93)(43,"mat-label"),e._uU(44,"Adet"),e.qZA(),e.TgZ(45,"input",102),e.NdJ("input",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onQuantitySelectionChange(o))}),e.qZA()(),e.TgZ(46,"mat-form-field",93)(47,"mat-label"),e._uU(48,"Toplam Tutar"),e.qZA(),e._UZ(49,"input",103),e.qZA()()()()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.selectedProductForm),e.xp6(9),e.Q6J("formControlName","isActive")("color","primary")("disabled",!0),e.xp6(1),e.hij(" ",1===t.selectedProductForm.get("isActive").value?"Aktif":"Pasif"," "),e.xp6(6),e.Q6J("formControlName","productId")("placeholder","name"),e.xp6(3),e.Q6J("ngForOf",t.productdescription),e.xp6(5),e.Q6J("formControlName","barcode"),e.xp6(8),e.Q6J("formControlName","unitPrice"),e.xp6(6),e.Q6J("formControlName","amount"),e.xp6(5),e.Q6J("formControlName","stockState"),e.xp6(4),e.Q6J("formControlName","reserved")}}function Ne(n,r){1&n&&(e.TgZ(0,"div",105),e._uU(1,"Veri bulunamad\u0131."),e.qZA())}const qe=function(){return{standalone:!0}},Je=(se(),{parse:{dateInput:"DD/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"DDD MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"DDD MMMM YYYY"}});let L=(()=>{class n{constructor(t,i,o,a,s,m,u,l){this._dialogRef=t,this._formBuilder=i,this._demandService=o,this._translocoService=a,this._suppliersService=s,this.productDescriptionService=m,this.cdr=u,this.data=l,this.demandProductList=[],this.supplierscards=[],this.selectedCustomerId="",this.productsList=[],this.productdescription=[],this._unsubscribeAll=new Q.x,this.selectedProduct=null}ngOnInit(){this.getProductstedarik(),this.demandList=this._formBuilder.group({date:[new Date,c.kI.required],documentno:["",c.kI.required],deliverydate:["",c.kI.required],note:["",c.kI.required],state:[0,c.kI.required],suppliers:[,c.kI.required],iscomplated:[!0,c.kI.required]}),this.selectedProductForm=this._formBuilder.group({id:["",c.kI.required],productId:[{value:"",disabled:!0},c.kI.required],barcode:["",c.kI.required],stockState:[0],reserved:[0],unitPrice:[0],amount:[0],isActive:[{value:0,disabled:!0}],quantity:[0]}),this.getProducts(),this.demandProductList=this.data,this.productsList=this.data}getProducts(){this.productDescriptionService.GetProductDescriptionList().pipe((0,f.R)(this._unsubscribeAll)).subscribe(t=>{t&&t.data&&(this.productdescription=t.data,this.cdr.markForCheck())})}getProductstedarik(){this._suppliersService.getSuppliersList().subscribe(t=>{this.supplierscards=t.data,console.log(this.supplierscards)})}addDemandProductList(t){this.ngOnInit(),this.demandProductList=t}filterCustomerId(t){this.selectedCustomerId=t}filterProductId(t){this.selectedCustomerId=t}closeDetails(){this.selectedProduct=null}toggleDetails(t){if(this.selectedProduct&&this.selectedProduct.id===t)this.closeDetails();else{var i=this.productsList.find(o=>o.id===t);this.selectedProduct=i,this.productsList.filter(o=>o.id===t),this.selectedProductForm.patchValue(i),this.cdr.markForCheck()}}getDemandProducts(){this._demandService.getDemandProductsList().pipe((0,f.R)(this._unsubscribeAll)).subscribe(t=>{})}fillFormData(t){null!==this.selecteddemand&&this.demandList.setValue({})}closeDialog(){this._dialogRef.close({status:null})}addOrUpdateStore(){this.addDemand()}trackByFn(t,i){return i.id||t}setAgendaPriority(t){this.demandList.get("state").setValue(t)}controlProperty(){const t=this.getFormValueByName("deliverydate").toLocaleString(),i=this.getFormValueByName("documentno"),o=this.getFormValueByName("suppliers"),a=this.getFormValueByName("state");if(!t||null===t){const s=new h.c(this.translate("sweetalert.error"),this.translate("Teslimat Tarihi Giriniz."),x.p.warning);return v.m.sweetAlert(s),!1}if(!i||null===i){const s=new h.c(this.translate("sweetalert.error"),this.translate("D\xf6k\xfcman No Giriniz."),x.p.warning);return v.m.sweetAlert(s),!1}if(!o||null===o){const s=new h.c(this.translate("sweetalert.error"),this.translate("Tedarik\xe7i Giriniz."),x.p.warning);return v.m.sweetAlert(s),!1}if(!a||null===a){const s=new h.c(this.translate("sweetalert.error"),this.translate("Durum Giriniz."),x.p.warning);return v.m.sweetAlert(s),!1}return!0}addDemand(){if(!this.controlProperty())return;this.getFormValueByName("date").toLocaleString(),this.getFormValueByName("deliverydate").toLocaleString();const o=this.demandProductList.filter(s=>!0===s.selected);if(0===o.length){const s=new h.c(this.translate("sweetalert.error"),this.translate("L\xfctfen en az 1 tane Talep Se\xe7iniz."),x.p.warning);return void v.m.sweetAlert(s)}const a=new ae(this.getFormValueByName("date"),this.getFormValueByName("documentno"),this.getFormValueByName("suppliers"),this.getFormValueByName("deliverydate"),this.getFormValueByName("note"),this.getFormValueByName("state"),!1,o);this._demandService.createDemands(a).subscribe(s=>{s.isSuccessful?(this.showSweetAlert("success"),this._dialogRef.close({status:!0})):this.showSweetAlert("error")},s=>{console.log(s)})}onCheckboxChange(t){const i=this.productsList.find(o=>o.id===t);i.selected=!0!==i.selected}getFormValueByName(t){return this.demandList.get(t).value}showSweetAlert(t){if("success"===t){const i=new h.c(this.translate("sweetalert.success"),this.translate("sweetalert.transactionSuccessful"),x.p.success);v.m.sweetAlert(i)}else{const i=new h.c(this.translate("sweetalert.error"),this.translate("sweetalert.transactionFailed"),x.p.error);v.m.sweetAlert(i)}}translate(t){return this._translocoService.translate(t)}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(w.so),e.Y36(c.qu),e.Y36(F.W),e.Y36(N.Vn),e.Y36(G.R),e.Y36(q.d),e.Y36(e.sBO),e.Y36(w.WI))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-edit-demand-dialog"]],features:[e._Bn([{provide:b._A,useClass:ee.t7,deps:[b.Ad,ee.o8]},{provide:b.sG,useValue:Je}])],decls:80,vars:29,consts:[["mat-dialog-title","",1,"mat-dialog-title"],[1,"dialog-close-button",3,"tabIndex","click"],[1,"material-icons"],[1,"modalForm"],[1,"modal-header"],[1,"modal-title"],[4,"ngIf"],[1,"modal-body","mbody-productcategory"],[1,"qm-pr-content"],[1,"container-fluid",3,"formGroup"],[1,"row"],[1,"col-sm-4","mt-2","common-width"],[1,"w-1/3","pr-2"],["matInput","","readonly","",3,"matDatepicker","formControlName"],["matIconSuffix","",3,"for"],["firstPicker",""],[2,"width","100%"],["matInput","",3,"formControlName"],[3,"formControlName","placeholder"],[3,"ngModelOptions","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["picker",""],[1,"col-sm-8","mt-2","common-width"],[1,"flex-auto"],["matInput","","cdkTextareaAutosize","",3,"cdkAutosizeMinRows","formControlName"],[2,"width","50%"],[3,"formControlName","ngModel","ngModelChange"],["value","1"],["value","0"],["value","-1"],[1,"hidden","lg:flex","items-center"],["class","flex items-end ml-2 w-5 h-4 bg-red-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-5 h-4 bg-orange-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-5 h-4 bg-green-100 rounded overflow-hidden",4,"ngIf"],["rowDetailsTemplate",""],["noProducts",""],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","mt-4","sm:mt-6"],[1,"-ml-2"],["mat-icon-button",""],[1,"icon-size-5",3,"svgIcon"],[1,"flex","items-center","mt-4","sm:mt-0"],["mat-stroked-button","",1,"ml-auto","sm:ml-0",3,"click"],["mat-flat-button","",1,"order-first","sm:order-last",3,"color","click"],[3,"value"],[1,"flex","items-end","ml-2","w-5","h-4","bg-red-200","rounded","overflow-hidden"],[1,"flex","w-full","h-full","bg-red-600"],[1,"flex","items-end","ml-2","w-5","h-4","bg-orange-200","rounded","overflow-hidden"],[1,"flex","w-full","h-2/4","bg-orange-400"],[1,"flex","items-end","ml-2","w-5","h-4","bg-green-100","rounded","overflow-hidden"],[1,"flex","w-full","h-1/3","bg-green-400"],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block","w-12"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inventory-grid","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,"flex","flex-col","gt-sm:flex-row"],[1,"flex","flex-col"],["type","checkbox",1,"mb-2",3,"checked","ngModel","color","ngModelChange","change"],[4,"ngFor","ngForOf"],["class","truncate text-red-500",4,"ngIf"],[1,"hidden","sm:block"],[1,"min-w-4"],["class","flex items-end ml-2 w-1 h-4 bg-red-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-orange-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-green-100 rounded overflow-hidden",4,"ngIf"],[1,"hidden","lg:block"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],["class","truncate",4,"ngIf"],[1,"truncate"],[1,"truncate","text-red-500"],[1,"flex","items-end","ml-2","w-1","h-4","bg-red-200","rounded","overflow-hidden"],[1,"flex","w-full","h-1/3","bg-red-600"],[1,"flex","items-end","ml-2","w-1","h-4","bg-orange-200","rounded","overflow-hidden"],[1,"flex","items-end","ml-2","w-1","h-4","bg-green-100","rounded","overflow-hidden"],[1,"flex","w-full","h-full","bg-green-400"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"shadow-lg","overflow-hidden"],[1,"flex","border-b"],[1,"flex","flex-col","w-full",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","p-8"],[1,"flex","flex-col","items-center","sm:items-start","mb-8","sm:mb-0"],[1,"flex","flex-col","items-center"],[1,"w-32","h-44","border","rounded","overflow-hidden"],[1,"flex","flex-col","mt-8"],[1,"font-semibold","mb-2"],[3,"formControlName","color","disabled","click"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","flex-col","w-full","lg:w-2/4","sm:pl-8"],[1,"w-full"],["name","productdescription",3,"formControlName","placeholder","selectionChange"],[1,"flex"],[1,"w-2/3","pl-2"],["readonly","true","matInput","",3,"formControlName"],[1,"flex","flex-col","w-full","lg:w-1/4","sm:pl-8"],["matPrefix",""],["matInput","","readonly","true",3,"formControlName"],["matSuffix",""],["type","number","matInput","","readonly","true",3,"formControlName","input"],["type","number","matInput","","readonly","true",3,"formControlName"],[1,"flex","items-center","min-h-20","text-lg","font-semibold"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(i,o){if(1&i&&(e.TgZ(0,"h1",0)(1,"button",1),e.NdJ("click",function(){return o.closeDialog()}),e.TgZ(2,"span",2),e._uU(3," highlight_off "),e.qZA()()(),e.TgZ(4,"div",3)(5,"mat-dialog-content")(6,"div",4)(7,"h5",5),e.YNc(8,de,2,0,"span",6),e.qZA()(),e.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"mat-form-field",12)(15,"mat-label"),e._uU(16,"Tarih"),e.qZA(),e._UZ(17,"input",13)(18,"mat-datepicker-toggle",14)(19,"mat-datepicker",null,15),e.qZA(),e.TgZ(21,"mat-form-field",16)(22,"mat-label"),e._uU(23,"D\xf6k\xfcman No"),e.qZA(),e._UZ(24,"input",17),e.qZA(),e.TgZ(25,"mat-form-field",16)(26,"mat-label"),e._uU(27,"Tedarik\xe7i"),e.qZA(),e.TgZ(28,"mat-select",18)(29,"mat-select-filter",19),e.NdJ("ngModelChange",function(s){return o.filterCustomerId(s)}),e.qZA(),e.YNc(30,le,2,2,"mat-option",20),e.qZA()(),e.TgZ(31,"mat-form-field",16)(32,"mat-label"),e._uU(33,"Teslimat Tarihi"),e.qZA(),e._UZ(34,"input",13)(35,"mat-datepicker-toggle",14)(36,"mat-datepicker",null,21),e.qZA()(),e.TgZ(38,"div",22)(39,"mat-form-field",23)(40,"mat-label"),e._uU(41,"Not"),e.qZA(),e._UZ(42,"textarea",24),e.qZA(),e.TgZ(43,"mat-form-field",25)(44,"mat-label"),e._uU(45,"Durumu"),e.qZA(),e.TgZ(46,"mat-select",26),e.NdJ("ngModelChange",function(s){return o.selectedValue=s}),e.TgZ(47,"mat-option",27),e._uU(48,"Acil"),e.qZA(),e.TgZ(49,"mat-option",28),e._uU(50,"Normal"),e.qZA(),e.TgZ(51,"mat-option",29),e._uU(52,"Planl\u0131"),e.qZA()(),e.TgZ(53,"div",30),e.YNc(54,me,2,0,"div",31),e.YNc(55,_e,2,0,"div",32),e.YNc(56,ge,2,0,"div",33),e.qZA()()(),e.TgZ(57,"div"),e.ynx(58),e.YNc(59,ye,2,2,"ng-container",6),e.BQk(),e.YNc(60,Fe,50,13,"ng-template",null,34,e.W1O),e.YNc(62,Ne,2,0,"ng-template",null,35,e.W1O),e.qZA()()()(),e.TgZ(64,"div",36)(65,"div",37)(66,"button",38),e._UZ(67,"mat-icon",39),e.qZA(),e._uU(68," Insert link "),e.TgZ(69,"button",38),e._UZ(70,"mat-icon",39),e.qZA(),e.TgZ(71,"button",38),e._UZ(72,"mat-icon",39),e.qZA(),e.TgZ(73,"button",38),e._UZ(74,"mat-icon",39),e.qZA()(),e.TgZ(75,"div",40)(76,"button",41),e.NdJ("click",function(){return o.closeDialog()}),e._uU(77," Vazge\xe7 "),e.qZA(),e.TgZ(78,"button",42),e.NdJ("click",function(){return o.addOrUpdateStore()}),e._uU(79," Kaydet "),e.qZA()()()()()()),2&i){const a=e.MAs(20),s=e.MAs(37);e.xp6(1),e.Q6J("tabIndex",-1),e.xp6(7),e.Q6J("ngIf",!o.selecteddemand),e.xp6(3),e.Q6J("formGroup",o.demandList),e.xp6(6),e.Q6J("matDatepicker",a)("formControlName","date"),e.xp6(1),e.Q6J("for",a),e.xp6(6),e.Q6J("formControlName","documentno"),e.xp6(4),e.Q6J("formControlName","suppliers")("placeholder","Tedarik\xe7i"),e.xp6(1),e.Q6J("ngModelOptions",e.DdM(28,qe))("ngModel",o.selectedCustomerId),e.xp6(1),e.Q6J("ngForOf",o.supplierscards),e.xp6(4),e.Q6J("matDatepicker",s)("formControlName","deliverydate"),e.xp6(1),e.Q6J("for",s),e.xp6(7),e.Q6J("cdkAutosizeMinRows",5)("formControlName","note"),e.xp6(4),e.Q6J("formControlName","state")("ngModel",o.selectedValue),e.xp6(8),e.Q6J("ngIf",o.selectedValue>0),e.xp6(1),e.Q6J("ngIf",o.selectedValue>-1&&o.selectedValue<1),e.xp6(1),e.Q6J("ngIf",o.selectedValue<0),e.xp6(3),e.Q6J("ngIf",o.productsList),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:paper-clip"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:link"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:emoji-happy"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:photograph"),e.xp6(4),e.Q6J("color","primary")}},dependencies:[c._Y,c.Fj,c.wV,c.JJ,c.JL,c.On,c.sg,c.u,T.lW,T.RK,g.KE,g.hX,g.qo,g.R9,p.Hw,Z.Nt,ce.IC,_.sg,_.O5,_.tP,y.oG,I.gD,b.ey,J.Rr,U.Mq,U.hl,U.nW,C.YE,C.nU,w.uh,w.xY,_.H9],styles:[".inventory-grid[_ngcontent-%COMP%]{grid-template-columns:48px auto 40px}@media (min-width: 600px){.inventory-grid[_ngcontent-%COMP%]{grid-template-columns:48px auto 112px 72px}}@media (min-width: 960px){.inventory-grid[_ngcontent-%COMP%]{grid-template-columns:48px 112px auto 112px 72px}}@media (min-width: 1280px){.inventory-grid[_ngcontent-%COMP%]{grid-template-columns:48px 112px auto 112px 96px 96px 72px 72px}}"]})}return n})();var te=d(44114),Ue=d(35226),M=d.n(Ue),O=d(71683);function Pe(n,r){if(1&n&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.suppliername," ")}}function Se(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Pe,2,1,"div",23),e.BQk()),2&n){const t=r.$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.id===i.suppliers)}}function Ye(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw(4);return e.KtG(a.toggleDetails(o.id))}),e._UZ(2,"mat-icon",26),e.qZA()()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(2),e.Q6J("svgIcon",(null==i.selectedDemand?null:i.selectedDemand.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down")}}function Be(n,r){1&n&&e.GkF(0)}const Le=function(n){return{$implicit:n}};function Me(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Be,1,0,"ng-container",27),e.BQk()),2&n){const t=e.oxw().$implicit;e.oxw(4);const i=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,Le,t))}}function Oe(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",14)(2,"div",15)(3,"div",16),e._uU(4),e.qZA()(),e.TgZ(5,"div")(6,"div",12),e._uU(7),e.qZA()(),e.TgZ(8,"div",12),e._uU(9),e.qZA(),e.TgZ(10,"div",15)(11,"div",16),e._uU(12),e.qZA()(),e.YNc(13,Se,2,1,"ng-container",17),e.YNc(14,Ye,3,1,"div",2),e.TgZ(15,"div",18)(16,"button",19),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.addDemandComplate(a.id))}),e._UZ(17,"mat-icon",20),e.qZA(),e.TgZ(18,"button",21),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.deleteDemandComplate(a.id))}),e.TgZ(19,"mat-icon",22),e._uU(20,"delete"),e.qZA()()()(),e.TgZ(21,"div",6),e.YNc(22,Me,2,4,"ng-container",2),e.qZA(),e.BQk()}if(2&n){const t=r.$implicit,i=e.oxw(4);e.xp6(4),e.Oqu(t.date.split("T")[0].split("-")[2]+"-"+t.date.split("T")[0].split("-")[1]+"-"+t.date.split("T")[0].split("-")[0]),e.xp6(3),e.hij(" ",t.note," "),e.xp6(2),e.hij(" ",t.documentno.length>10?t.documentno.slice(0,10)+"...":t.documentno," "),e.xp6(3),e.Oqu(t.deliverydate.split("T")[0].split("-")[2]+"-"+t.deliverydate.split("T")[0].split("-")[1]+"-"+t.deliverydate.split("T")[0].split("-")[0]),e.xp6(1),e.Q6J("ngForOf",i.supplierscards),e.xp6(1),e.Q6J("ngIf",2===i.stateNumber),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(5),e.Q6J("ngIf",(null==i.selectedDemand?null:i.selectedDemand.id)===t.id)}}function Ee(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Oe,23,8,"ng-container",13),e.BQk()),2&n){const t=r.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}function Re(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",6)(2,"div",7)(3,"div",8),e._uU(4,"Tarih"),e.qZA(),e.TgZ(5,"div",9),e._uU(6,"Sipari\u015f Notu"),e.qZA(),e.TgZ(7,"div",9),e._uU(8," D\xf6k\xfcman No "),e.qZA(),e.TgZ(9,"div",9),e._uU(10," Teslim Tarihi "),e.qZA(),e.TgZ(11,"div",10),e._uU(12," Tedarik\xe7i "),e.qZA(),e.TgZ(13,"div",11),e._uU(14,"Detay"),e.qZA(),e.TgZ(15,"div",11),e._uU(16,"\u0130\u015flem"),e.qZA(),e._UZ(17,"div",12),e.qZA(),e.YNc(18,Ee,2,2,"ng-container",2),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","date"),e.xp6(2),e.Q6J("mat-sort-header","productId"),e.xp6(2),e.Q6J("mat-sort-header",t.documentno),e.xp6(2),e.Q6J("mat-sort-header",t.deliverydate),e.xp6(2),e.Q6J("mat-sort-header","suppliers"),e.xp6(7),e.Q6J("ngIf",t.demandList)}}function Ge(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Re,19,6,"ng-container",5),e.BQk()),2&n){const t=r.ngIf;e.oxw();const i=e.MAs(7);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function Ve(n,r){if(1&n&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function He(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Ve,2,1,"div",23),e.BQk()),2&n){const t=r.$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.id===i.productId)}}function $e(n,r){1&n&&(e.TgZ(0,"div",43),e._UZ(1,"div",44),e.qZA())}function ze(n,r){1&n&&(e.TgZ(0,"div",45),e._UZ(1,"div",46),e.qZA())}function Ke(n,r){1&n&&(e.TgZ(0,"div",47),e._UZ(1,"div",48),e.qZA())}function je(n,r){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",49),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function We(n,r){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",50),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Xe(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",34)(2,"div",35)(3,"div",36),e._UZ(4,"img",37),e.TgZ(5,"div",38),e._uU(6," NO THUMB "),e.qZA()()(),e.TgZ(7,"div"),e.YNc(8,He,2,1,"ng-container",17),e.qZA(),e.TgZ(9,"div",12),e._uU(10),e.ALo(11,"currency"),e.qZA(),e.TgZ(12,"div",15)(13,"div",16),e._uU(14),e.qZA(),e.YNc(15,$e,2,0,"div",39),e.YNc(16,ze,2,0,"div",40),e.YNc(17,Ke,2,0,"div",41),e.qZA(),e.TgZ(18,"div",42),e.YNc(19,je,2,1,"ng-container",2),e.YNc(20,We,2,1,"ng-container",2),e.qZA()(),e.BQk()),2&n){const t=r.$implicit,i=e.oxw(5);e.xp6(8),e.Q6J("ngForOf",i.productdescription),e.xp6(2),e.hij(" ",e.gM2(11,8,t.reserved,"\u20ba","symbol","1.2-2")," "),e.xp6(4),e.Oqu(t.stockState),e.xp6(1),e.Q6J("ngIf",t.stockState<20),e.xp6(1),e.Q6J("ngIf",t.stockState>=20&&t.stockState<30),e.xp6(1),e.Q6J("ngIf",t.stockState>=30),e.xp6(2),e.Q6J("ngIf",1===t.isActive),e.xp6(1),e.Q6J("ngIf",0===t.isActive)}}function et(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Xe,21,13,"ng-container",13),e.BQk()),2&n){const t=r.ngIf,i=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}function tt(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",6)(2,"div",33),e._UZ(3,"div"),e.TgZ(4,"div",9),e._uU(5,"\xdcr\xfcn Ad\u0131"),e.qZA(),e.TgZ(6,"div",9),e._uU(7," Toplam Tutar "),e.qZA(),e.TgZ(8,"div",10),e._uU(9," Adet "),e.qZA(),e.TgZ(10,"div",10),e._uU(11," Aktif "),e.qZA(),e._UZ(12,"div"),e.qZA(),e.YNc(13,et,2,2,"ng-container",2),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(4),e.Q6J("mat-sort-header","productId"),e.xp6(2),e.Q6J("mat-sort-header",t.reserved),e.xp6(2),e.Q6J("mat-sort-header",t.stockState),e.xp6(2),e.Q6J("mat-sort-header","isActive"),e.xp6(3),e.Q6J("ngIf",t.demandTransList)}}function nt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,tt,14,5,"ng-container",5),e.BQk()),2&n){const t=r.ngIf;e.oxw();const i=e.MAs(6);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function it(n,r){1&n&&(e.TgZ(0,"div",51),e._uU(1,"Veri bulunamad\u0131."),e.qZA())}function ot(n,r){if(1&n&&(e.TgZ(0,"div",28)(1,"div",29)(2,"form",30)(3,"div",31),e.YNc(4,nt,2,2,"ng-container",2),e.YNc(5,it,2,0,"ng-template",null,32,e.W1O),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.demandTransList)}}function rt(n,r){1&n&&(e.TgZ(0,"div",51),e._uU(1,"Veri bulunamad\u0131."),e.qZA())}let V=(()=>{class n{constructor(t,i,o,a,s,m,u,l,A){this.demandProductsService=t,this._changeDetectorRef=i,this._fuseConfirmationService=o,this._formBuilder=a,this.cdr=s,this._translocoService=m,this.productDescriptionService=u,this._dialog=l,this._suppliersService=A,this.displayedColumns=["name","categoryCode","actions"],this.demandList=[],this.SelecteddemandListAll=[],this.demandTransList=[],this.demandTransListlast=[],this.selecteDemandList=[],this.productdescription=[],this.quantityInput="",this.isLoading=!1,this.flashMessage=null,this.selectedProduct=null,this.selectedDemand=null,this.tagsEditMode=!1,this._unsubscribeAll=new Q.x,this.supplierscards=[],this.productsList=[],this.stateNumber=2}ngOnInit(){this.selectedDemandForm=this._formBuilder.group({id:["",c.kI.required],date:["",c.kI.required],documentno:["",c.kI.required],suppliers:["",c.kI.required],deliverydate:["",c.kI.required],note:["",c.kI.required],state:[0]}),this.getProducts(),this.getDemands(),this.getDemandsTedarikci(),this.getDemandProducts()}getProducts(){this.productDescriptionService.GetProductDescriptionList().pipe((0,f.R)(this._unsubscribeAll)).subscribe(t=>{t&&t.data&&(this.productdescription=t.data,this.cdr.markForCheck())})}getDemandProducts(){const t=new te.N(this.selectedDemand.id,"00000000-0000-0000-0000-000000000000",0,0,0,0,0,0,"0","00000000-0000-0000-0000-000000000000");this.demandProductsService.getDemandTransList(t).pipe((0,f.R)(this._unsubscribeAll)).subscribe(i=>{i&&i.data&&(this.demandTransListlast=i.data,this.demandTransList=this.demandTransListlast.filter(o=>o.ownerId===this.selectedDemand.id),this.cdr.markForCheck(),console.log(this.demandTransList))})}getDemandsTedarikci(){this._suppliersService.getSuppliersList().subscribe(t=>{this.supplierscards=t.data,console.log(this.supplierscards)})}onQuantitySelectionChange(t){const i=parseFloat(this.getFormValueByName("stockState")),o=this.getFormValueByName("productId");if(null!==i){const l=this.productdescription.find(A=>A.id===o);var a=!0!==l.buyingIncludeKDV?i*(l.buyingPrice*(1+l.ratio/100)):i*l.buyingPrice,m=a*(1+l.ratio/100)-a;l&&this.selectedDemandForm.patchValue({reserved:a.toFixed(2),amount:m.toFixed(2)})}}getDemands(){this.demandProductsService.getDemandLists().pipe((0,f.R)(this._unsubscribeAll)).subscribe(t=>{t&&t.data&&(this.demandList=t.data,this.cdr.markForCheck(),console.log(this.demandList))})}addDemandComplate(t){M().fire({title:"Onayl\u0131yor musunuz?",icon:"question",showCancelButton:!0,confirmButtonText:"Evet",cancelButtonText:"Hay\u0131r"}).then(i=>{if(i.isConfirmed){this.stateNumber=1;var o=this.demandList.find(s=>s.id===t);this.selectedDemand=o,this.selectedDemandForm.patchValue(o);const a=this.selectedDemandForm.getRawValue();this.demandProductsService.updateDemands(a).subscribe(s=>{s.isSuccessful?(this.showSweetAlert("success"),this.getDemands(),this._changeDetectorRef.markForCheck(),this.stateNumber=2):this.showSweetAlert("error")},s=>{console.log(s)})}else if(i.dismiss===M().DismissReason.cancel)return void(this.stateNumber=2)})}deleteDemandComplate(t){M().fire({title:"\u0130lgili kay\u0131t silinecektir. Onayl\u0131yor musunuz?",icon:"warning",showCancelButton:!0,confirmButtonText:"Evet",cancelButtonText:"Hay\u0131r"}).then(i=>{if(i.isConfirmed){this.stateNumber=1;var o=this.demandList.find(s=>s.id===t);this.selectedDemand=o,this.selectedDemandForm.patchValue(o),this.cdr.markForCheck();const a=this.selectedDemandForm.getRawValue();this.demandProductsService.deleteDemands(a).subscribe(s=>{s.isSuccessful?(this.showSweetAlert("success"),this.getDemands(),this._changeDetectorRef.markForCheck()):this.showSweetAlert("error")},s=>{console.log(s)})}else if(i.dismiss===M().DismissReason.cancel)return})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,f.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),(0,S.T)(this._sort.sortChange,this._paginator.page).pipe((0,R.w)(()=>(this.closeDetails(),this.isLoading=!0,this.demandList)),(0,Y.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}toggleDetails(t){if(this.selectedDemand&&this.selectedDemand.id===t)this.closeDetails();else{this.stateNumber=2;var i=this.demandList.find(o=>o.id===t);this.selectedDemand=i,this.getDemandProducts(),this.selectedDemandForm.patchValue(i),this.cdr.markForCheck()}}closeDetails(){this.selectedDemand=null}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(t){const i=t.target.value.toLowerCase();this.filteredTags=this.tags.filter(o=>o.title.toLowerCase().includes(i))}filterTagsInputKeyDown(t){if("Enter"===t.key)return 0===this.filteredTags.length?(this.createTag(t.target.value),void(t.target.value="")):void 0}createTag(t){}updateTagTitle(t,i){t.title=i.target.value,this._changeDetectorRef.markForCheck()}deleteTag(t){this._changeDetectorRef.markForCheck()}addTagToProduct(t){this._changeDetectorRef.markForCheck()}removeTagFromProduct(t){this._changeDetectorRef.markForCheck()}toggleProductTag(t,i){i.checked?this.addTagToProduct(t):this.removeTagFromProduct(t)}shouldShowCreateTagButton(t){return!(""===t||this.tags.findIndex(i=>i.title.toLowerCase()===t.toLowerCase())>-1)}getFormValueByName(t){return this.selectedDemandForm.get(t).value}showSweetAlert(t){if("success"===t){const i=new h.c(this.translate("sweetalert.success"),this.translate("sweetalert.transactionSuccessful"),x.p.success);v.m.sweetAlert(i)}else{const i=new h.c(this.translate("sweetalert.error"),this.translate("sweetalert.transactionFailed"),x.p.error);v.m.sweetAlert(i)}}translate(t){return this._translocoService.translate(t)}showFlashMessage(t){this.flashMessage=t,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(t,i){return i.id||t}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(F.W),e.Y36(e.sBO),e.Y36(O.R),e.Y36(c.QS),e.Y36(e.sBO),e.Y36(N.Vn),e.Y36(q.d),e.Y36(w.uw),e.Y36(G.R))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-demand2"]],viewQuery:function(i,o){if(1&i&&(e.Gf(L,5),e.Gf(k.NW,5),e.Gf(C.YE,5)),2&i){let a;e.iGM(a=e.CRH())&&(o.CreateEditDemandDialogComponent=a.first),e.iGM(a=e.CRH())&&(o._paginator=a.first),e.iGM(a=e.CRH())&&(o._sort=a.first)}},decls:8,vars:1,consts:[["href","https://fonts.googleapis.com/icon?family=Material+Icons","rel","stylesheet"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf"],["rowDetailsTemplate",""],["noDemands",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","shadow","text-md","font-semibold","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","sm:block","md:px-8",3,"mat-sort-header"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block","w-12"],[1,"hidden","sm:block"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inventory-grid","grid","items-center","gap-2","py-1","px-4","md:px-6","border-b"],[1,"hidden","lg:flex","items-center"],[1,"min-w-4"],[4,"ngFor","ngForOf"],[2,"display","flex","align-items","center"],["mat-flat-button","",1,"min-w-5","min-h-1","h-7","max-w-5","bg-green-400","text-white",3,"click"],[1,"text-green-400","text-xs","icon-size-5",3,"svgIcon"],["mat-icon-button","","color","warn",1,"left-4","min-w-2","max-w-5","leading-6",3,"click"],[1,"mat-18"],["class","truncate",4,"ngIf"],[1,"truncate"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5","text-gray-500",3,"svgIcon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"shadow-lg","overflow-hidden"],[1,"flex","border-b"],[1,"flex","flex-col","w-full"],[1,"flex","flex-col","flex-2","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],["noTrans",""],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"inventory-grid","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,"flex","items-center"],[1,"relative","flex","flex-0","items-center","justify-center","w-12","h-12","mr-6","rounded","overflow-hidden","border"],[1,"w-8"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],["class","flex items-end ml-2 w-1 h-4 bg-red-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-orange-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-green-100 rounded overflow-hidden",4,"ngIf"],[1,"hidden","lg:block"],[1,"flex","items-end","ml-2","w-1","h-4","bg-red-200","rounded","overflow-hidden"],[1,"flex","w-full","h-1/3","bg-red-600"],[1,"flex","items-end","ml-2","w-1","h-4","bg-orange-200","rounded","overflow-hidden"],[1,"flex","w-full","h-2/4","bg-orange-400"],[1,"flex","items-end","ml-2","w-1","h-4","bg-green-100","rounded","overflow-hidden"],[1,"flex","w-full","h-full","bg-green-400"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(i,o){1&i&&(e.TgZ(0,"header"),e._UZ(1,"link",0),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,Ge,2,2,"ng-container",2),e.YNc(4,ot,7,1,"ng-template",null,3,e.W1O),e.YNc(6,rt,2,0,"ng-template",null,4,e.W1O),e.qZA()),2&i&&(e.xp6(3),e.Q6J("ngIf",o.demandList))},dependencies:[c._Y,c.JL,c.F,T.lW,T.RK,p.Hw,_.sg,_.O5,_.tP,C.YE,C.nU,_.H9],styles:[".inventory-grid{grid-template-columns:96px 48px auto 40px}@media (min-width: 600px){.inventory-grid{grid-template-columns:96px 48px auto 112px 72px}}@media (min-width: 960px){.inventory-grid{grid-template-columns:96px 48px 112px auto 112px 72px}}@media (min-width: 1280px){.inventory-grid{grid-template-columns:96px auto 112px 112px 96px 96px 72px 112px}}\n"],encapsulation:2,data:{animation:B.L},changeDetection:0})}return n})();function at(n,r){if(1&n&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function st(n,r){if(1&n&&(e.ynx(0),e.YNc(1,at,2,1,"div",25),e.BQk()),2&n){const t=r.$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.id===i.productId)}}function ct(n,r){1&n&&(e.TgZ(0,"div",27),e._uU(1," \xdcR\xdcN SE\xc7\u0130N\u0130Z.. "),e.qZA())}function dt(n,r){1&n&&(e.TgZ(0,"div",28),e._UZ(1,"div",29),e.qZA())}function lt(n,r){1&n&&(e.TgZ(0,"div",30),e._UZ(1,"div",31),e.qZA())}function mt(n,r){1&n&&(e.TgZ(0,"div",32),e._UZ(1,"div",33),e.qZA())}function _t(n,r){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",34),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function gt(n,r){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",35),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function ut(n,r){1&n&&e.GkF(0)}const pt=function(n){return{$implicit:n}};function ft(n,r){if(1&n&&(e.ynx(0),e.YNc(1,ut,1,0,"ng-container",36),e.BQk()),2&n){const t=e.oxw().$implicit;e.oxw(4);const i=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,pt,t))}}function ht(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",10)(2,"div",11)(3,"div",12)(4,"mat-checkbox",13),e.NdJ("ngModelChange",function(o){const s=e.CHM(t).$implicit;return e.KtG(s.selected=o)}),e.qZA()()(),e.TgZ(5,"div"),e.YNc(6,st,2,1,"ng-container",14),e.YNc(7,ct,2,0,"div",15),e.qZA(),e.TgZ(8,"div",16),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"div",17)(12,"div",18),e._uU(13),e.qZA(),e.YNc(14,dt,2,0,"div",19),e.YNc(15,lt,2,0,"div",20),e.YNc(16,mt,2,0,"div",21),e.qZA(),e.TgZ(17,"div",22),e.YNc(18,_t,2,1,"ng-container",0),e.YNc(19,gt,2,1,"ng-container",0),e.qZA(),e.TgZ(20,"div")(21,"button",23),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.toggleDetails(a.id))}),e._UZ(22,"mat-icon",24),e.qZA()()(),e.TgZ(23,"div",4),e.YNc(24,ft,2,4,"ng-container",0),e.qZA(),e.BQk()}if(2&n){const t=r.$implicit,i=e.oxw(4);e.xp6(4),e.Q6J("checked",!1)("ngModel",t.selected)("color","primary"),e.xp6(2),e.Q6J("ngForOf",i.productdescription),e.xp6(1),e.Q6J("ngIf","00000000-0000-0000-0000-000000000000"===t.productId),e.xp6(2),e.hij(" ",e.gM2(10,14,t.reserved,"\u20ba","symbol","1.2-2")," "),e.xp6(4),e.Oqu(t.stockState),e.xp6(1),e.Q6J("ngIf",t.stockState<20),e.xp6(1),e.Q6J("ngIf",t.stockState>=20&&t.stockState<30),e.xp6(1),e.Q6J("ngIf",t.stockState>=30),e.xp6(2),e.Q6J("ngIf",1===t.isActive),e.xp6(1),e.Q6J("ngIf",0===t.isActive),e.xp6(3),e.Q6J("svgIcon",(null==i.selectedProduct?null:i.selectedProduct.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(2),e.Q6J("ngIf",(null==i.selectedProduct?null:i.selectedProduct.id)===t.id)}}function xt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,ht,25,19,"ng-container",9),e.BQk()),2&n){const t=r.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}function vt(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",4)(2,"div",5)(3,"div"),e._uU(4,"\u0130\u015flem"),e.qZA(),e.TgZ(5,"div",6),e._uU(6,"\xdcr\xfcn Ad\u0131"),e.qZA(),e.TgZ(7,"div",6),e._uU(8," Toplam Tutar "),e.qZA(),e.TgZ(9,"div",7),e._uU(10," Adet "),e.qZA(),e.TgZ(11,"div",7),e._uU(12," Aktif "),e.qZA(),e.TgZ(13,"div",8),e._uU(14,"Detay"),e.qZA()(),e.YNc(15,xt,2,2,"ng-container",0),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(5),e.Q6J("mat-sort-header","productId"),e.xp6(2),e.Q6J("mat-sort-header",t.reserved),e.xp6(2),e.Q6J("mat-sort-header",t.stockState),e.xp6(2),e.Q6J("mat-sort-header","isActive"),e.xp6(4),e.Q6J("ngIf",t.productsList)}}function Tt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,vt,16,5,"ng-container",3),e.BQk()),2&n){const t=r.ngIf;e.oxw();const i=e.MAs(6);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function Ct(n,r){1&n&&(e.TgZ(0,"span",66),e._uU(1,"NO IMAGE"),e.qZA())}function Zt(n,r){if(1&n&&(e.TgZ(0,"mat-option",67),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Dt(n,r){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",69),e.TgZ(2,"span",70),e._uU(3,"Product updated"),e.qZA(),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:check"))}function bt(n,r){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",71),e.TgZ(2,"span",70),e._uU(3,"An error occurred, try again!"),e.qZA(),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"))}function wt(n,r){if(1&n&&(e.TgZ(0,"div",68),e.YNc(1,Dt,4,1,"ng-container",0),e.YNc(2,bt,4,1,"ng-container",0),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","success"===t.flashMessage),e.xp6(1),e.Q6J("ngIf","error"===t.flashMessage)}}function At(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",37)(1,"div",38)(2,"form",39)(3,"div",40)(4,"div",41)(5,"div",42)(6,"div",43),e.YNc(7,Ct,2,0,"ng-template"),e.qZA()(),e.TgZ(8,"div",44)(9,"span",45),e._uU(10,"\xdcr\xfcn Durumu"),e.qZA(),e.TgZ(11,"mat-slide-toggle",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.isActiveClick)}),e._uU(12),e.qZA()()(),e.TgZ(13,"div",47)(14,"div",48)(15,"mat-form-field",49)(16,"mat-label"),e._uU(17,"\xdcr\xfcn Ad\u0131"),e.qZA(),e.TgZ(18,"mat-select",50),e.NdJ("selectionChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onProductSelectionChange(o))}),e.TgZ(19,"mat-option"),e._uU(20,"None"),e.qZA(),e.YNc(21,Zt,2,2,"mat-option",51),e.qZA()(),e.TgZ(22,"div",52)(23,"mat-form-field",53)(24,"mat-label"),e._uU(25,"Barcode"),e.qZA(),e._UZ(26,"input",54),e.qZA()(),e._UZ(27,"div",52),e.qZA(),e.TgZ(28,"div",55)(29,"mat-form-field",49)(30,"mat-label"),e._uU(31,"Al\u0131\u015f Fiyat"),e.qZA(),e.TgZ(32,"span",56),e._uU(33,"\u20ba"),e.qZA(),e._UZ(34,"input",57),e.qZA(),e.TgZ(35,"mat-form-field",49)(36,"mat-label"),e._uU(37,"Kdv Tutar"),e.qZA(),e.TgZ(38,"span",58),e._uU(39,"\u20ba"),e.qZA(),e._UZ(40,"input",57),e.qZA()(),e.TgZ(41,"div",55)(42,"mat-form-field",49)(43,"mat-label"),e._uU(44,"Adet"),e.qZA(),e.TgZ(45,"input",59),e.NdJ("input",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.onQuantitySelectionChange(o))}),e.qZA()(),e.TgZ(46,"mat-form-field",49)(47,"mat-label"),e._uU(48,"Toplam Tutar"),e.qZA(),e._UZ(49,"input",60),e.qZA()()()(),e.TgZ(50,"div",61)(51,"button",62),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteSelectedProduct())}),e._uU(52," Sil "),e.qZA(),e.TgZ(53,"div",63),e.YNc(54,wt,3,2,"div",64),e.TgZ(55,"button",65),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.updateSelectedProduct())}),e._uU(56," D\xfczenle "),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.selectedProductForm),e.xp6(9),e.Q6J("formControlName","isActive")("color","primary")("disabled",!0),e.xp6(1),e.hij(" ",1===t.selectedProductForm.get("isActive").value?"Aktif":"Pasif"," "),e.xp6(6),e.Q6J("formControlName","productId")("placeholder","name"),e.xp6(3),e.Q6J("ngForOf",t.productdescription),e.xp6(5),e.Q6J("formControlName","barcode"),e.xp6(8),e.Q6J("formControlName","unitPrice"),e.xp6(6),e.Q6J("formControlName","amount"),e.xp6(5),e.Q6J("formControlName","stockState"),e.xp6(4),e.Q6J("formControlName","reserved"),e.xp6(2),e.Q6J("color","warn"),e.xp6(3),e.Q6J("ngIf",t.flashMessage),e.xp6(1),e.Q6J("color","primary")}}function kt(n,r){1&n&&(e.TgZ(0,"div",72),e._uU(1,"Veri bulunamad\u0131."),e.qZA())}let ne=(()=>{class n{constructor(t,i,o,a,s,m,u,l){this.demandProductsService=t,this._changeDetectorRef=i,this._fuseConfirmationService=o,this._formBuilder=a,this.cdr=s,this._translocoService=m,this.productDescriptionService=u,this._dialog=l,this.displayedColumns=["name","categoryCode","actions"],this.productsList=[],this.selecteDemandList=[],this.productdescription=[],this.quantityInput="",this.isLoading=!1,this.flashMessage=null,this.selectedProduct=null,this.tagsEditMode=!1,this._unsubscribeAll=new Q.x}ngOnInit(){this.getProducts(),this.getDemandProducts(),this.selectedProductForm=this._formBuilder.group({id:["",c.kI.required],productId:["",c.kI.required],barcode:["",c.kI.required],stockState:[0],reserved:[0],unitPrice:[0],amount:[0],isActive:[{value:0,disabled:!0}],quantity:[0]})}isActiveClick(){const t=this.getFormValueByName("productId"),i=this.productdescription.find(o=>o.id===t);this.selectedProduct.isActive=1==i.active?1:0,this._changeDetectorRef.markForCheck()}onProductSelectionChange(t){const i=t.value,o=this.productdescription.find(u=>u.id===i);o&&(this.selectedProductForm.patchValue({productId:i,barcode:o.productBarcode,isActive:!0===o.active?1:0,unitPrice:o.buyingPrice,stockState:0,reserved:0,amount:0}),this.selectedProduct.isActive=1==o.active?1:0,this.quantityAdet=o.id)}onQuantitySelectionChange(t){const i=parseFloat(this.getFormValueByName("stockState")),o=this.getFormValueByName("productId");if(null!==i){const l=this.productdescription.find(A=>A.id===o);var a=!0!==l.buyingIncludeKDV?i*(l.buyingPrice*(1+l.ratio/100)):i*l.buyingPrice,m=a*(1+l.ratio/100)-a;l&&this.selectedProductForm.patchValue({reserved:a.toFixed(2),amount:m.toFixed(2)})}}getDemandProducts(){this.demandProductsService.getDemandProductsList().pipe((0,f.R)(this._unsubscribeAll)).subscribe(t=>{t&&t.data&&(this.productsList=t.data,this.cdr.markForCheck(),console.log(this.productsList))})}getProducts(){this.productDescriptionService.GetProductDescriptionList().pipe((0,f.R)(this._unsubscribeAll)).subscribe(t=>{t&&t.data&&(this.productdescription=t.data,this.cdr.markForCheck())})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,f.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),(0,S.T)(this._sort.sortChange,this._paginator.page).pipe((0,R.w)(()=>(this.closeDetails(),this.isLoading=!0,this.productsList)),(0,Y.U)(()=>{this.isLoading=!1})).subscribe(),this.demand2Component&&this.demand2Component.getDemands())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}toggleDetails(t){if(this.selectedProduct&&this.selectedProduct.id===t)this.closeDetails();else{var i=this.productsList.find(o=>o.id===t);this.selectedProduct=i,this.getDemandProducts(),this.selectedProductForm.patchValue(i),this._changeDetectorRef.markForCheck()}}closeDetails(){this.selectedProduct=null}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(t){const i=t.target.value.toLowerCase();this.filteredTags=this.tags.filter(o=>o.title.toLowerCase().includes(i))}filterTagsInputKeyDown(t){if("Enter"===t.key)return 0===this.filteredTags.length?(this.createTag(t.target.value),void(t.target.value="")):void 0}createTag(t){}updateTagTitle(t,i){t.title=i.target.value,this._changeDetectorRef.markForCheck()}deleteTag(t){this._changeDetectorRef.markForCheck()}addTagToProduct(t){this._changeDetectorRef.markForCheck()}removeTagFromProduct(t){this._changeDetectorRef.markForCheck()}toggleProductTag(t,i){i.checked?this.addTagToProduct(t):this.removeTagFromProduct(t)}shouldShowCreateTagButton(t){return!(""===t||this.tags.findIndex(i=>i.title.toLowerCase()===t.toLowerCase())>-1)}getFormValueByName(t){return this.selectedProductForm.get(t).value}addDemand(){if(this.selecteDemandList=this.productsList.filter(i=>!0===i.selected),0!==this.selecteDemandList.length)if(this.selecteDemandList.filter(i=>"00000000-0000-0000-0000-000000000000"===i.productId).length>0){const i=new h.c("Uyar\u0131!","\xdcr\xfcn Se\xe7ilmeyen sat\u0131r/sat\u0131rlar mevcuttur. L\xfctfen se\xe7ili sat\u0131r/sat\u0131rlar\u0131 kontrol ediniz.",x.p.error);v.m.sweetAlert(i)}else this.selecteDemandList.length>0&&this._dialog.open(L,{maxWidth:"100vw !important",disableClose:!0,data:this.selecteDemandList}).afterClosed().subscribe(o=>{o.status&&this.getDemandProducts()});else{const i=new h.c("Uyar\u0131!","L\xfctfen sat\u0131r se\xe7iniz!",x.p.error);v.m.sweetAlert(i)}}createProduct(){const t=new W("00000000-0000-0000-0000-000000000000",0,0,0,0,0,0,"0");this.demandProductsService.createDemandProduct(t).subscribe(o=>{o.isSuccessful?this.getlist(o.data.id):this.showSweetAlert("error")},o=>{console.log(o)})}getlist(t){var i;this.selectedProductForm=this._formBuilder.group({id:["",c.kI.required],productId:["",c.kI.required],barcode:["",c.kI.required],stockState:[0],reserved:[0],unitPrice:[0],amount:[0],isActive:[{value:0,disabled:!0}],quantity:[0]}),this.demandProductsService.getDemandProductsList().pipe((0,f.R)(this._unsubscribeAll)).subscribe(o=>{o&&o.data&&(this.productsList=o.data,(i=this.productsList.find(a=>a.id===t))&&(this.selectedProduct=i,this.getDemandProducts(),this.selectedProductForm.patchValue(i),this._changeDetectorRef.markForCheck()))})}showSweetAlert(t){if("success"===t){const i=new h.c(this.translate("sweetalert.success"),this.translate("sweetalert.transactionSuccessful"),x.p.success);v.m.sweetAlert(i)}else{const i=new h.c(this.translate("sweetalert.error"),this.translate("sweetalert.transactionFailed"),x.p.error);v.m.sweetAlert(i)}}translate(t){return this._translocoService.translate(t)}updateSelectedProduct(){const t=this.selectedProductForm.getRawValue();null!=t&&(t.isActive=1==t.isActive?1:0),this.demandProductsService.updateDemandProduct(t).subscribe(i=>{i.isSuccessful?(this.showSweetAlert("success"),this.getDemandProducts(),this._changeDetectorRef.markForCheck()):this.showSweetAlert("error")},i=>{console.log(i)})}deleteSelectedProduct(){this._fuseConfirmationService.open({title:"\xdcr\xfcn Silinecektir!",message:"Bu \xfcr\xfcn\xfc kald\u0131rmak istedi\u011finizden emin misiniz? Bu i\u015flem geri al\u0131namaz!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(i=>{if("confirmed"===i){const o=this.selectedProductForm.getRawValue();this.demandProductsService.deleteDemandProduct(o).subscribe(a=>{a.isSuccessful?(this.getDemandProducts(),this._changeDetectorRef.markForCheck(),this.showSweetAlert("success"),this._changeDetectorRef.markForCheck()):this.showSweetAlert("error")})}})}showFlashMessage(t){this.flashMessage=t,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(t,i){return i.id||t}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(F.W),e.Y36(e.sBO),e.Y36(O.R),e.Y36(c.QS),e.Y36(e.sBO),e.Y36(N.Vn),e.Y36(q.d),e.Y36(w.uw))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-demand1"]],viewQuery:function(i,o){if(1&i&&(e.Gf(L,5),e.Gf(V,5),e.Gf(k.NW,5),e.Gf(C.YE,5)),2&i){let a;e.iGM(a=e.CRH())&&(o.CreateEditDemandDialogComponent=a.first),e.iGM(a=e.CRH())&&(o.demand2Component=a.first),e.iGM(a=e.CRH())&&(o._paginator=a.first),e.iGM(a=e.CRH())&&(o._sort=a.first)}},decls:7,vars:1,consts:[[4,"ngIf"],["rowDetailsTemplate",""],["noProducts",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block","w-12"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inventory-grid","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,"flex","flex-col","gt-sm:flex-row"],[1,"flex","flex-col"],["type","checkbox",1,"mb-2",3,"checked","ngModel","color","ngModelChange"],[4,"ngFor","ngForOf"],["class","truncate text-red-500",4,"ngIf"],[1,"hidden","sm:block"],[1,"hidden","lg:flex","items-center"],[1,"min-w-4"],["class","flex items-end ml-2 w-1 h-4 bg-red-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-orange-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-green-100 rounded overflow-hidden",4,"ngIf"],[1,"hidden","lg:block"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5","text-gray-500",3,"svgIcon"],["class","truncate",4,"ngIf"],[1,"truncate"],[1,"truncate","text-red-500"],[1,"flex","items-end","ml-2","w-1","h-4","bg-red-200","rounded","overflow-hidden"],[1,"flex","w-full","h-1/3","bg-red-600"],[1,"flex","items-end","ml-2","w-1","h-4","bg-orange-200","rounded","overflow-hidden"],[1,"flex","w-full","h-2/4","bg-orange-400"],[1,"flex","items-end","ml-2","w-1","h-4","bg-green-100","rounded","overflow-hidden"],[1,"flex","w-full","h-full","bg-green-400"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"shadow-lg","overflow-hidden"],[1,"flex","border-b"],[1,"flex","flex-col","w-full",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","p-8"],[1,"flex","flex-col","items-center","sm:items-start","mb-8","sm:mb-0"],[1,"flex","flex-col","items-center"],[1,"w-32","h-44","border","rounded","overflow-hidden"],[1,"flex","flex-col","mt-8"],[1,"font-semibold","mb-2"],[3,"formControlName","color","disabled","click"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","flex-col","w-full","lg:w-2/4","sm:pl-8"],[1,"w-full"],["name","productdescription",3,"formControlName","placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex"],[1,"w-2/3","pl-2"],["readonly","true","matInput","",3,"formControlName"],[1,"flex","flex-col","w-full","lg:w-1/4","sm:pl-8"],["matPrefix",""],["matInput","","readonly","true",3,"formControlName"],["matSuffix",""],["type","number","matInput","",3,"formControlName","input"],["type","number","matInput","","readonly","true",3,"formControlName"],[1,"flex","items-center","justify-between","w-full","border-t","px-8","py-4"],["mat-button","",1,"-ml-4",3,"color","click"],[1,"flex","items-center"],["class","flex items-center mr-4",4,"ngIf"],["mat-flat-button","",3,"color","click"],[1,"flex","items-center","min-h-20","text-lg","font-semibold"],[3,"value"],[1,"flex","items-center","mr-4"],[1,"!text-green-500",3,"svgIcon"],[1,"ml-2"],[1,"text-red-500",3,"svgIcon"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(i,o){1&i&&(e.TgZ(0,"div"),e.ynx(1),e.YNc(2,Tt,2,2,"ng-container",0),e.BQk(),e.YNc(3,At,57,16,"ng-template",null,1,e.W1O),e.YNc(5,kt,2,0,"ng-template",null,2,e.W1O),e.qZA()),2&i&&(e.xp6(2),e.Q6J("ngIf",o.productsList))},dependencies:[c._Y,c.Fj,c.wV,c.JJ,c.JL,c.On,c.sg,c.u,T.lW,g.KE,g.hX,g.qo,g.R9,p.Hw,Z.Nt,_.sg,_.O5,_.tP,y.oG,I.gD,b.ey,J.Rr,C.YE,C.nU,_.H9],styles:[".inventory-grid{grid-template-columns:48px auto 40px}@media (min-width: 600px){.inventory-grid{grid-template-columns:96px auto 112px 72px}}@media (min-width: 960px){.inventory-grid{grid-template-columns:48px 112px auto 112px 72px}}@media (min-width: 1280px){.inventory-grid{grid-template-columns:48px 112px auto 112px 96px 96px 72px 72px}}\n"],encapsulation:2,data:{animation:B.L},changeDetection:0})}return n})();var yt=d(70377);function It(n,r){if(1&n&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.suppliername," ")}}function Qt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,It,2,1,"div",25),e.BQk()),2&n){const t=r.$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.id===i.suppliers)}}function Ft(n,r){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",27),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Nt(n,r){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",28),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function qt(n,r){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",27),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Jt(n,r){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",28),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Ut(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw(4);return e.KtG(a.toggleDetails(o.id))}),e._UZ(1,"mat-icon",30),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(1),e.Q6J("svgIcon",(null==i.selectedDemand?null:i.selectedDemand.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down")}}function Pt(n,r){1&n&&e.GkF(0)}const St=function(n){return{$implicit:n}};function Yt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Pt,1,0,"ng-container",31),e.BQk()),2&n){const t=e.oxw().$implicit;e.oxw(4);const i=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,St,t))}}function Bt(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",13)(2,"div",14)(3,"div",15),e._uU(4),e.qZA()(),e.TgZ(5,"div")(6,"div",11),e._uU(7),e.qZA()(),e.TgZ(8,"div",11),e._uU(9),e.qZA(),e.TgZ(10,"div",14)(11,"div",15),e._uU(12),e.qZA()(),e.YNc(13,Qt,2,1,"ng-container",16),e.TgZ(14,"div",17),e.YNc(15,Ft,2,1,"ng-container",2),e.YNc(16,Nt,2,1,"ng-container",2),e.qZA(),e.TgZ(17,"div",17),e.YNc(18,qt,2,1,"ng-container",2),e.YNc(19,Jt,2,1,"ng-container",2),e.qZA(),e.TgZ(20,"div"),e.YNc(21,Ut,2,1,"button",18),e.qZA(),e.TgZ(22,"div")(23,"div",19)(24,"button",20),e._UZ(25,"mat-icon",21),e.qZA(),e.TgZ(26,"mat-menu",null,22)(28,"button",23),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.createBuyingOrder(a.id))}),e._uU(29,"Al\u0131\u015f Olu\u015ftur"),e.qZA(),e.TgZ(30,"button",24),e._uU(31,"Muhasebele\u015ftir"),e.qZA()()()()(),e.TgZ(32,"div",6),e.YNc(33,Yt,2,4,"ng-container",2),e.qZA(),e.BQk()}if(2&n){const t=r.$implicit,i=e.MAs(27),o=e.oxw(4);e.xp6(4),e.Oqu(t.date.split("T")[0].split("-")[2]+"-"+t.date.split("T")[0].split("-")[1]+"-"+t.date.split("T")[0].split("-")[0]),e.xp6(3),e.hij(" ",t.note," "),e.xp6(2),e.hij(" ",t.documentno," "),e.xp6(3),e.Oqu(t.deliverydate.split("T")[0].split("-")[2]+"-"+t.deliverydate.split("T")[0].split("-")[1]+"-"+t.deliverydate.split("T")[0].split("-")[0]),e.xp6(1),e.Q6J("ngForOf",o.supplierscards),e.xp6(2),e.Q6J("ngIf",!0===t.isBuying),e.xp6(1),e.Q6J("ngIf",!1===t.isBuying),e.xp6(2),e.Q6J("ngIf",!0===t.isAccounting),e.xp6(1),e.Q6J("ngIf",!1===t.isAccounting),e.xp6(2),e.Q6J("ngIf",2===o.stateNumber),e.xp6(3),e.Q6J("matMenuTriggerFor",i)("demand",t),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:dots-vertical"),e.xp6(3),e.Q6J("disabled",!0===t.isBuying),e.xp6(5),e.Q6J("ngIf",(null==o.selectedDemand?null:o.selectedDemand.id)===t.id)}}function Lt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Bt,34,15,"ng-container",12),e.BQk()),2&n){const t=r.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}function Mt(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",6)(2,"div",7)(3,"div",8),e._uU(4,"Tarih"),e.qZA(),e.TgZ(5,"div",9),e._uU(6,"Sipari\u015f Notu"),e.qZA(),e.TgZ(7,"div",9),e._uU(8," D\xf6k\xfcman No "),e.qZA(),e.TgZ(9,"div",9),e._uU(10," Teslim Tarihi "),e.qZA(),e.TgZ(11,"div",10),e._uU(12," Tedarik\xe7i "),e.qZA(),e.TgZ(13,"div",9),e._uU(14,"Al\u0131\u015f"),e.qZA(),e.TgZ(15,"div",9),e._uU(16,"Muhasebele\u015fme"),e.qZA(),e.TgZ(17,"div",11),e._uU(18,"Detay"),e.qZA(),e.TgZ(19,"div",11),e._uU(20,"\u0130\u015flem"),e.qZA()(),e.YNc(21,Lt,2,2,"ng-container",2),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","date"),e.xp6(2),e.Q6J("mat-sort-header","productId"),e.xp6(2),e.Q6J("mat-sort-header",t.documentno),e.xp6(2),e.Q6J("mat-sort-header",t.deliverydate),e.xp6(2),e.Q6J("mat-sort-header","suppliers"),e.xp6(2),e.Q6J("mat-sort-header","isBuying"),e.xp6(2),e.Q6J("mat-sort-header","isAccounting"),e.xp6(6),e.Q6J("ngIf",t.demandList)}}function Ot(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Mt,22,8,"ng-container",5),e.BQk()),2&n){const t=r.ngIf;e.oxw();const i=e.MAs(7);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function Et(n,r){if(1&n&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Rt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Et,2,1,"div",25),e.BQk()),2&n){const t=r.$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.id===i.productId)}}function Gt(n,r){1&n&&(e.TgZ(0,"div",46),e._UZ(1,"div",47),e.qZA())}function Vt(n,r){1&n&&(e.TgZ(0,"div",48),e._UZ(1,"div",49),e.qZA())}function Ht(n,r){1&n&&(e.TgZ(0,"div",50),e._UZ(1,"div",51),e.qZA())}function $t(n,r){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",27),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function zt(n,r){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",28),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Kt(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",38)(2,"div",39)(3,"div",40),e._UZ(4,"img",41),e.TgZ(5,"div",42),e._uU(6," NO THUMB "),e.qZA()()(),e.TgZ(7,"div"),e.YNc(8,Rt,2,1,"ng-container",16),e.qZA(),e.TgZ(9,"div",11),e._uU(10),e.ALo(11,"currency"),e.qZA(),e.TgZ(12,"div",14)(13,"div",15),e._uU(14),e.qZA(),e.YNc(15,Gt,2,0,"div",43),e.YNc(16,Vt,2,0,"div",44),e.YNc(17,Ht,2,0,"div",45),e.qZA(),e.TgZ(18,"div",17),e.YNc(19,$t,2,1,"ng-container",2),e.YNc(20,zt,2,1,"ng-container",2),e.qZA()(),e.BQk()),2&n){const t=r.$implicit,i=e.oxw(5);e.xp6(8),e.Q6J("ngForOf",i.productdescription),e.xp6(2),e.hij(" ",e.gM2(11,8,t.reserved,"\u20ba","symbol","1.2-2")," "),e.xp6(4),e.Oqu(t.stockState),e.xp6(1),e.Q6J("ngIf",t.stockState<20),e.xp6(1),e.Q6J("ngIf",t.stockState>=20&&t.stockState<30),e.xp6(1),e.Q6J("ngIf",t.stockState>=30),e.xp6(2),e.Q6J("ngIf",1===t.isActive),e.xp6(1),e.Q6J("ngIf",0===t.isActive)}}function jt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Kt,21,13,"ng-container",12),e.BQk()),2&n){const t=r.ngIf,i=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}function Wt(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",6)(2,"div",37),e._UZ(3,"div"),e.TgZ(4,"div",9),e._uU(5,"\xdcr\xfcn Ad\u0131"),e.qZA(),e.TgZ(6,"div",9),e._uU(7," Toplam Tutar "),e.qZA(),e.TgZ(8,"div",10),e._uU(9," Adet "),e.qZA(),e.TgZ(10,"div",10),e._uU(11," Aktif "),e.qZA(),e._UZ(12,"div"),e.qZA(),e.YNc(13,jt,2,2,"ng-container",2),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(4),e.Q6J("mat-sort-header","productId"),e.xp6(2),e.Q6J("mat-sort-header",t.reserved),e.xp6(2),e.Q6J("mat-sort-header",t.stockState),e.xp6(2),e.Q6J("mat-sort-header","isActive"),e.xp6(3),e.Q6J("ngIf",t.demandTransList)}}function Xt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Wt,14,5,"ng-container",5),e.BQk()),2&n){const t=r.ngIf;e.oxw();const i=e.MAs(6);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function en(n,r){1&n&&(e.TgZ(0,"div",52),e._uU(1,"Veri bulunamad\u0131."),e.qZA())}function tn(n,r){if(1&n&&(e.TgZ(0,"div",32)(1,"div",33)(2,"form",34)(3,"div",35),e.YNc(4,Xt,2,2,"ng-container",2),e.YNc(5,en,2,0,"ng-template",null,36,e.W1O),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.demandTransList)}}function nn(n,r){1&n&&(e.TgZ(0,"div",52),e._uU(1,"Veri bulunamad\u0131."),e.qZA())}let ie=(()=>{class n{constructor(t,i,o,a,s,m,u,l,A){this.demandProductsService=t,this._changeDetectorRef=i,this._fuseConfirmationService=o,this._formBuilder=a,this.cdr=s,this._translocoService=m,this.productDescriptionService=u,this._dialog=l,this._suppliersService=A,this.displayedColumns=["name","categoryCode","actions"],this.demandList=[],this.SelecteddemandListAll=[],this.demandTransList=[],this.demandTransListlast=[],this.selecteDemandList=[],this.productdescription=[],this.quantityInput="",this.isLoading=!1,this.flashMessage=null,this.selectedProduct=null,this.selectedDemand=null,this.tagsEditMode=!1,this._unsubscribeAll=new Q.x,this.supplierscards=[],this.productsList=[],this.stateNumber=2}ngOnInit(){this.selectedDemandForm=this._formBuilder.group({id:["",c.kI.required],date:["",c.kI.required],documentno:["",c.kI.required],suppliers:["",c.kI.required],deliverydate:["",c.kI.required],note:["",c.kI.required],state:[0],isBuying:[!1],isAccounting:[!1]}),this.getProducts(),this.getDemands(),this.getDemandsTedarikci(),this.getDemandProducts()}getProducts(){this.productDescriptionService.GetProductDescriptionList().pipe((0,f.R)(this._unsubscribeAll)).subscribe(t=>{t&&t.data&&(this.productdescription=t.data,this.cdr.markForCheck())})}getDemandProducts(){const t=new te.N(this.selectedDemand.id,"00000000-0000-0000-0000-000000000000",0,0,0,0,0,0,"0","00000000-0000-0000-0000-000000000000");this.demandProductsService.getDemandTransList(t).pipe((0,f.R)(this._unsubscribeAll)).subscribe(i=>{i&&i.data&&(this.demandTransListlast=i.data,this.demandTransList=this.demandTransListlast.filter(o=>o.ownerId===this.selectedDemand.id),this.cdr.markForCheck(),console.log(this.demandTransList))})}getDemandsTedarikci(){this._suppliersService.getSuppliersList().subscribe(t=>{this.supplierscards=t.data,console.log(this.supplierscards)})}onQuantitySelectionChange(t){const i=parseFloat(this.getFormValueByName("stockState")),o=this.getFormValueByName("productId");if(null!==i){const l=this.productdescription.find(A=>A.id===o);var a=!0!==l.buyingIncludeKDV?i*(l.buyingPrice*(1+l.ratio/100)):i*l.buyingPrice,m=a*(1+l.ratio/100)-a;l&&this.selectedDemandForm.patchValue({reserved:a.toFixed(2),amount:m.toFixed(2)})}}getDemands(){this.demandProductsService.getDemandComplateList().pipe((0,f.R)(this._unsubscribeAll)).subscribe(t=>{t&&t.data&&(this.demandList=t.data,this.cdr.markForCheck(),console.log(this.demandList))})}createBuyingOrder(t){this.stateNumber=1;var i=this.demandList.find(s=>s.id===t);this.selectedDemand=i,this._dialog.open(yt.Z,{maxWidth:"100vw !important",disableClose:!0,data:{selectedsalebuy:null,visibleCustomer:!1,salebuyType:2,isSupplier:!1,demandList:this.selectedDemand}}).afterClosed().subscribe(s=>{s.status&&(this.selectedDemand=void 0,this.getProducts(),this.getDemands(),this.getDemandsTedarikci(),this.getDemandProducts())})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,f.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),(0,S.T)(this._sort.sortChange,this._paginator.page).pipe((0,R.w)(()=>(this.closeDetails(),this.isLoading=!0,this.demandList)),(0,Y.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}toggleDetails(t){if(this.selectedDemand&&this.selectedDemand.id===t)this.closeDetails();else{this.stateNumber=2;var i=this.demandList.find(o=>o.id===t);this.selectedDemand=i,this.getDemandProducts(),this.selectedDemandForm.patchValue(i),this.cdr.markForCheck()}}closeDetails(){this.selectedDemand=null}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(t){const i=t.target.value.toLowerCase();this.filteredTags=this.tags.filter(o=>o.title.toLowerCase().includes(i))}filterTagsInputKeyDown(t){if("Enter"===t.key)return 0===this.filteredTags.length?(this.createTag(t.target.value),void(t.target.value="")):void 0}createTag(t){}updateTagTitle(t,i){t.title=i.target.value,this._changeDetectorRef.markForCheck()}deleteTag(t){this._changeDetectorRef.markForCheck()}addTagToProduct(t){this._changeDetectorRef.markForCheck()}removeTagFromProduct(t){this._changeDetectorRef.markForCheck()}toggleProductTag(t,i){i.checked?this.addTagToProduct(t):this.removeTagFromProduct(t)}shouldShowCreateTagButton(t){return!(""===t||this.tags.findIndex(i=>i.title.toLowerCase()===t.toLowerCase())>-1)}getFormValueByName(t){return this.selectedDemandForm.get(t).value}showSweetAlert(t){if("success"===t){const i=new h.c(this.translate("sweetalert.success"),this.translate("sweetalert.transactionSuccessful"),x.p.success);v.m.sweetAlert(i)}else{const i=new h.c(this.translate("sweetalert.error"),this.translate("sweetalert.transactionFailed"),x.p.error);v.m.sweetAlert(i)}}translate(t){return this._translocoService.translate(t)}showFlashMessage(t){this.flashMessage=t,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(t,i){return i.id||t}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(F.W),e.Y36(e.sBO),e.Y36(O.R),e.Y36(c.QS),e.Y36(e.sBO),e.Y36(N.Vn),e.Y36(q.d),e.Y36(w.uw),e.Y36(G.R))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-demand3"]],viewQuery:function(i,o){if(1&i&&(e.Gf(L,5),e.Gf(k.NW,5),e.Gf(C.YE,5)),2&i){let a;e.iGM(a=e.CRH())&&(o.CreateEditDemandDialogComponent=a.first),e.iGM(a=e.CRH())&&(o._paginator=a.first),e.iGM(a=e.CRH())&&(o._sort=a.first)}},decls:8,vars:1,consts:[["href","https://fonts.googleapis.com/icon?family=Material+Icons","rel","stylesheet"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf"],["rowDetailsTemplate",""],["noDemands",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","shadow","text-md","font-semibold","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","sm:block","md:px-8",3,"mat-sort-header"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inventory-grid","grid","items-center","gap-2","py-1","px-4","md:px-6","border-b"],[1,"hidden","lg:flex","items-center"],[1,"min-w-4"],[4,"ngFor","ngForOf"],[1,"hidden","lg:block"],["class","min-w-10 min-h-7 h-7 px-2 leading-6","mat-stroked-button","",3,"click",4,"ngIf"],[1,"ml-2","-mt-2","-mr-3"],["mat-icon-button","",3,"matMenuTriggerFor","demand"],[1,"text-gray-800","icon-size-4",3,"svgIcon"],["issuesMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","","disabled","true"],["class","truncate",4,"ngIf"],[1,"truncate"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5","text-gray-500",3,"svgIcon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"shadow-lg","overflow-hidden"],[1,"flex","border-b"],[1,"flex","flex-col","w-full"],[1,"flex","flex-col","flex-2","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],["noTrans",""],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"inventory-grid","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,"flex","items-center"],[1,"relative","flex","flex-0","items-center","justify-center","w-12","h-12","mr-6","rounded","overflow-hidden","border"],[1,"w-8"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],["class","flex items-end ml-2 w-1 h-4 bg-red-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-orange-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-green-100 rounded overflow-hidden",4,"ngIf"],[1,"flex","items-end","ml-2","w-1","h-4","bg-red-200","rounded","overflow-hidden"],[1,"flex","w-full","h-1/3","bg-red-600"],[1,"flex","items-end","ml-2","w-1","h-4","bg-orange-200","rounded","overflow-hidden"],[1,"flex","w-full","h-2/4","bg-orange-400"],[1,"flex","items-end","ml-2","w-1","h-4","bg-green-100","rounded","overflow-hidden"],[1,"flex","w-full","h-full","bg-green-400"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(i,o){1&i&&(e.TgZ(0,"header"),e._UZ(1,"link",0),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,Ot,2,2,"ng-container",2),e.YNc(4,tn,7,1,"ng-template",null,3,e.W1O),e.YNc(6,nn,2,0,"ng-template",null,4,e.W1O),e.qZA()),2&i&&(e.xp6(3),e.Q6J("ngIf",o.demandList))},dependencies:[c._Y,c.JL,c.F,T.lW,T.RK,p.Hw,D.VK,D.OP,D.p6,_.sg,_.O5,_.tP,C.YE,C.nU,_.H9],styles:[".inventory-grid{grid-template-columns:48px auto 40px}@media (min-width: 600px){.inventory-grid{grid-template-columns:48px auto 112px 72px 96px 72px}}@media (min-width: 960px){.inventory-grid{grid-template-columns:48px 112px auto 112px 72px}}@media (min-width: 1280px){.inventory-grid{grid-template-columns:96px auto 112px 112px 96px 48px 96px 72px 72px}}\n"],encapsulation:2,data:{animation:B.L},changeDetection:0})}return n})();var oe=d(89299);const on=["tabGroup"];function rn(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addTalep())}),e._UZ(1,"mat-icon",19),e._uU(2," Yeni Talep "),e.qZA()}2&n&&(e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:link"))}function an(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.handleButtonClick())}),e._UZ(1,"mat-icon",19),e._uU(2),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("color","accent"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(1),e.hij(" ",t.buttonLabel," ")}}let sn=(()=>{class n{constructor(t,i,o,a,s,m,u,l){this.demandProductsService=t,this._changeDetectorRef=i,this._fuseConfirmationService=o,this._formBuilder=a,this.cdr=s,this._translocoService=m,this.productDescriptionService=u,this._dialog=l,this.indexs=0,this._unsubscribeAll=new Q.x,this.isLoading=!1,this.CreateDemandCom=W,this.buttonLabel="Sipari\u015f Olu\u015ftur"}ngOnInit(){}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,f.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,S.T)(this._sort.sortChange,this._paginator.page).pipe(),(0,Y.U)(()=>{this.isLoading=!1}))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onTabChange(t){const i=t.index;0===i?(this.buttonLabel="Sipari\u015f Olu\u015ftur",this.demand1Component.getDemandProducts(),this.indexs=0):1===i?(this.buttonLabel="Onayla",this.indexs=1,this.getDemands()):2===i&&(this.indexs=2,this.demand3Component.getDemands()),this._changeDetectorRef.markForCheck()}addTalep(){this.demand1Component.createProduct()}handleButtonClick(){0==this.indexs&&(console.log(this.indexs),this.demand1Component.addDemand())}getDemands(){this.demand2Component.getDemands()}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(F.W),e.Y36(e.sBO),e.Y36(O.R),e.Y36(c.QS),e.Y36(e.sBO),e.Y36(N.Vn),e.Y36(q.d),e.Y36(w.uw))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-demands"]],viewQuery:function(i,o){if(1&i&&(e.Gf(ne,5),e.Gf(V,5),e.Gf(ie,5),e.Gf(k.NW,5),e.Gf(C.YE,5),e.Gf(on,5)),2&i){let a;e.iGM(a=e.CRH())&&(o.demand1Component=a.first),e.iGM(a=e.CRH())&&(o.demand2Component=a.first),e.iGM(a=e.CRH())&&(o.demand3Component=a.first),e.iGM(a=e.CRH())&&(o._paginator=a.first),e.iGM(a=e.CRH())&&(o._sort=a.first),e.iGM(a=e.CRH())&&(o.tabGroup=a.first)}},decls:26,vars:4,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"font-medium","tracking-tight","text-secondary"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],["class","ml-3","mat-flat-button","",3,"color","click",4,"ngIf"],["id","dynamicButton","class","ml-3","mat-flat-button","",3,"color","click",4,"ngIf"],[1,"flex-auto","-mt-16","p-6","sm:p-10","rounded-t-2xl","shadow","bg-card"],[3,"selectedTabChange"],["label","TALEP"],["label","S\u0130PAR\u0130\u015e"],["label","TAMAMLANDI"],["mat-flat-button","",1,"ml-3",3,"color","click"],[1,"icon-size-5","mr-2",3,"svgIcon"],["id","dynamicButton","mat-flat-button","",1,"ml-3",3,"color","click"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"a",4),e._UZ(6,"mat-icon",5),e.TgZ(7,"span",6),e._uU(8,"Back"),e.qZA()()()(),e.TgZ(9,"div",7)(10,"h2",8),e._uU(11," Talep "),e.qZA()(),e.TgZ(12,"div",9),e._uU(13,"\xdcr\xfcn/A\u015f\u0131 vb. \xdcr\xfcnlerin Talep Listesini Olu\u015fturabilirsiniz."),e.qZA()(),e.TgZ(14,"div",10),e.YNc(15,rn,3,2,"button",11),e.qZA(),e.TgZ(16,"div",10),e.YNc(17,an,3,3,"button",12),e.qZA()(),e.TgZ(18,"div",13)(19,"mat-tab-group",14),e.NdJ("selectedTabChange",function(s){return o.onTabChange(s)}),e.TgZ(20,"mat-tab",15),e._UZ(21,"app-demand1"),e.qZA(),e.TgZ(22,"mat-tab",16),e._UZ(23,"app-demand2"),e.qZA(),e.TgZ(24,"mat-tab",17),e._UZ(25,"app-demand3"),e.qZA()()()()),2&i&&(e.xp6(5),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(9),e.Q6J("ngIf",0===o.indexs),e.xp6(2),e.Q6J("ngIf",0==o.indexs))},dependencies:[T.lW,p.Hw,E.uX,E.SP,_.O5,oe.rH,ne,V,ie],styles:[".inventory-grid{grid-template-columns:48px auto 40px}@media (min-width: 600px){.inventory-grid{grid-template-columns:48px auto auto 72px}}@media (min-width: 960px){.inventory-grid{grid-template-columns:48px auto 112px 112px 72px}}@media (min-width: 1280px){.inventory-grid{grid-template-columns:40px 112px auto 112px 96px 96px 72px}}\n"],encapsulation:2,data:{animation:B.L},changeDetection:0})}return n})();var H=d(73162),$=d(10266),z=d(44466),re=d(71948);const cn=[{path:"",component:sn}];let dn=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[c.u5,c.UX,T.ot,g.lN,p.Ps,Z.c,P.J,D.Tx,j.p0,E.Nh,_.ez,y.p9,g.lN,p.Ps,Z.c,D.Tx,k.TU,H.Cv,b.si,I.LD,J.rP,$.AV,z.m,g.lN,Z.c,U.FA,b.XK,re.Fk,T.ot,g.lN,p.Ps,Z.c,c.u5,c.UX,P.J,D.Tx,I.LD,p.Ps,y.p9,T.ot,y.p9,g.lN,p.Ps,Z.c,D.Tx,k.TU,H.Cv,b.si,C.JX,I.LD,J.rP,$.AV,z.m,g.lN,Z.c,U.FA,b.XK,re.Fk,c.u5,T.ot,g.lN,p.Ps,Z.c,c.u5,c.UX,P.J,D.Tx,c.u5,j.p0,_.ez,p.Ps,g.lN,T.ot,g.lN,p.Ps,Z.c,c.u5,c.UX,P.J,D.Tx,I.LD,p.Ps,y.p9,T.ot,y.p9,g.lN,p.Ps,Z.c,D.Tx,k.TU,H.Cv,b.si,C.JX,I.LD,J.rP,$.AV,z.m,w.Is,oe.Bz.forChild(cn)]})}return n})()}}]);