"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[6969],{30629:(at,H,o)=>{o.d(H,{Z:()=>a});var it,j,P=o(87462),T=o(71924),$=o(46885),U=o(67771),D=o(68082),W=o(48966),I=o(37075),g=o(83520),C=o(8817),b=o(56836),V=o(80316),M=o(83684),w=o(68262),X=o(17839),R=o(21374),G=o(83626),Z=o(64596),x=o(50663),q=o(34500),h=o(24705),p=o(63429),c=o(45390),_=o(16129),u=o(89967),E=(0,q.Jj)(),f="dxDraggable",y=(0,_.V4)(p.BL,f),z=(0,_.V4)(p.pB,f),n=(0,_.V4)(p.ut,f),v=(0,_.V4)(p.IO,f),A=(0,_.V4)(p.Zu,f),K=(0,_.V4)(c.Z.down,f),F=(0,_.V4)("keydown",f),Y="clone",N=t=>({x:t.pageX-(0,g.Z)(E).scrollLeft(),y:t.pageY-(0,g.Z)(E).scrollTop()});class ot{constructor(i,s){this._$scrollableAtPointer=null,this._preventScroll=!0,this._component=s,"vertical"===i?(this._scrollValue="scrollTop",this._overFlowAttr="overflowY",this._sizeAttr="height",this._scrollSizeProp="scrollHeight",this._clientSizeProp="clientHeight",this._limitProps={start:"top",end:"bottom"}):(this._scrollValue="scrollLeft",this._overFlowAttr="overflowX",this._sizeAttr="width",this._scrollSizeProp="scrollWidth",this._clientSizeProp="clientWidth",this._limitProps={start:"left",end:"right"})}updateScrollable(i,s){var l=!1;i.some(d=>{var m=(0,g.Z)(d),S=m.hasClass("dx-overlay-wrapper"),O=m.hasClass("dx-overlay-content");return!(!S&&!O)||(l=this._trySetScrollable(d,s))}),l||(this._$scrollableAtPointer=null,this._scrollSpeed=0)}isScrolling(){return!!this._scrollSpeed}isScrollable(i){return("auto"===i.css(this._overFlowAttr)||i.hasClass("dx-scrollable-container"))&&i.prop(this._scrollSizeProp)>Math.ceil("width"===this._sizeAttr?(0,R.dz)(i):(0,R.Cr)(i))}_trySetScrollable(i,s){var d,l=(0,g.Z)(i),m=this._component.option("scrollSensitivity"),S=this.isScrollable(l);return S&&(m>(d=this._calculateDistanceToBorders(l,s))[this._limitProps.start]?this._preventScroll||(this._scrollSpeed=-this._calculateScrollSpeed(d[this._limitProps.start]),this._$scrollableAtPointer=l):m>d[this._limitProps.end]?this._preventScroll||(this._scrollSpeed=this._calculateScrollSpeed(d[this._limitProps.end]),this._$scrollableAtPointer=l):(S=!1,this._preventScroll=!1)),S}_calculateDistanceToBorders(i,s){var d,l=i.get(0);return l?(d=(0,X.l)(l),{left:s.x-d.left,top:s.y-d.top,right:d.right-s.x,bottom:d.bottom-s.y}):{}}_calculateScrollSpeed(i){var s=this._component,l=s.option("scrollSensitivity"),d=s.option("scrollSpeed");return Math.ceil(Math.pow((l-i)/l,2)*d)}scrollByStep(){if(this._$scrollableAtPointer&&this._scrollSpeed){if(this._$scrollableAtPointer.hasClass("dx-scrollable-container")){var i=this._$scrollableAtPointer.closest(".dx-scrollable"),s=i.data("dxScrollable")||i.data("dxScrollView");if(s){var l=s.scrollOffset()[this._limitProps.start]+this._scrollSpeed;s.scrollTo({[this._limitProps.start]:l})}}else{var d=this._$scrollableAtPointer[this._scrollValue]()+this._scrollSpeed;this._$scrollableAtPointer[this._scrollValue](d)}var m=this._component._dragMoveArgs;m&&this._component._dragMoveHandler(m)}}reset(){this._$scrollableAtPointer=null,this._scrollSpeed=0,this._preventScroll=!0}isOutsideScrollable(i,s){if(!i)return!1;var l=(0,X.l)(i.get(0)),d=l[this._limitProps.start],m=l[this._sizeAttr],S=N(s),O="width"===this._sizeAttr?S.x:S.y;return O<d||O>d+m}}var e=u.Z.inherit({ctor(t){this.callBase(),this._strategy=t},_step(){var t=this._strategy._horizontalScrollHelper,i=this._strategy._verticalScrollHelper;t&&t.scrollByStep(),i&&i.scrollByStep()}}),r=W.Z.inherit({reset:b.ZT,dragMove:b.ZT,dragEnter:b.ZT,dragLeave:b.ZT,dragEnd(t){return this._getSourceDraggable()._fireRemoveEvent(t),(0,V.BH)().resolve()},_fireRemoveEvent:b.ZT,_getDefaultOptions(){return(0,M.l)(this.callBase(),{onDragStart:null,onDragMove:null,onDragEnd:null,onDragEnter:null,onDragLeave:null,onDragCancel:null,onCancelByEsc:!1,onDrop:null,immediate:!0,dragDirection:"both",boundary:void 0,boundOffset:0,allowMoveByClick:!1,itemData:null,container:void 0,dragTemplate:void 0,contentTemplate:"content",handle:"",filter:"",clone:!1,autoScroll:!0,scrollSpeed:30,scrollSensitivity:60,group:void 0,data:void 0})},_setOptionsByReference(){this.callBase.apply(this,arguments),(0,M.l)(this._optionsByReference,{component:!0,group:!0,itemData:!0,data:!0})},_init(){this.callBase(),this._attachEventHandlers(),this._scrollAnimator=new e(this),this._horizontalScrollHelper=new ot("horizontal",this),this._verticalScrollHelper=new ot("vertical",this),this._initScrollTop=0,this._initScrollLeft=0},_normalizeCursorOffset:t=>((0,Z.Kn)(t)&&(t={h:t.x,v:t.y}),{left:(t=(0,b.Um)(t).map(i=>parseFloat(i)))[0],top:1===t.length?t[0]:t[1]}),_getNormalizedCursorOffset(t,i){return(0,Z.mf)(t)&&(t=t.call(this,i)),this._normalizeCursorOffset(t)},_calculateElementOffset(t){var i,s,{event:l}=t,d=(0,g.Z)(t.itemElement),m=(0,g.Z)(t.dragElement),S=this._dragElementIsCloned(),O=this.option("cursorOffset"),L={left:0,top:0},Q=this._initialLocate=(0,$.jt)(m);return(S||t.initialOffset||O)&&(i=t.initialOffset||d.offset(),O&&(L=this._getNormalizedCursorOffset(O,t),isFinite(L.left)&&(i.left=l.pageX),isFinite(L.top)&&(i.top=l.pageY)),s=m.offset(),i.top-=s.top+(L.top||0)-Q.top,i.left-=s.left+(L.left||0)-Q.left),i},_initPosition(t){var i=(0,g.Z)(t.dragElement),s=this._calculateElementOffset(t);s&&this._move(s,i),this._startPosition=(0,$.jt)(i)},_startAnimator(){this._scrollAnimator.inProgress()||this._scrollAnimator.start()},_stopAnimator(){this._scrollAnimator.stop()},_addWidgetPrefix(t){return(0,w.H0)(this.NAME)+(t?"-".concat(t):"")},_getItemsSelector(){return this.option("filter")||""},_$content(){var t=this.$element(),i=t.children(".dx-template-wrapper");return i.length?i:t},_attachEventHandlers(){if(!this.option("disabled")){var t=this._$content(),i=this._getItemsSelector(),s=this.option("allowMoveByClick"),l={direction:this.option("dragDirection"),immediate:this.option("immediate"),checkDropTarget:(d,m)=>{var S=this.option("group"),O=this._getSourceDraggable().option("group"),L=this._getScrollable(d);return!this._verticalScrollHelper.isOutsideScrollable(L,m)&&!this._horizontalScrollHelper.isOutsideScrollable(L,m)&&O&&O===S}};s&&(t=this._getArea(),h.Z.on(t,K,l,this._pointerDownHandler.bind(this))),">"===i[0]&&(i=i.slice(1)),h.Z.on(t,y,i,l,this._dragStartHandler.bind(this)),h.Z.on(t,z,l,this._dragMoveHandler.bind(this)),h.Z.on(t,n,l,this._dragEndHandler.bind(this)),h.Z.on(t,v,l,this._dragEnterHandler.bind(this)),h.Z.on(t,A,l,this._dragLeaveHandler.bind(this)),this.option("onCancelByEsc")&&h.Z.on(t,F,this._keydownHandler.bind(this))}},_dragElementIsCloned(){return this._$dragElement&&this._$dragElement.hasClass(this._addWidgetPrefix(Y))},_getDragTemplateArgs(t,i){return{container:(0,I.u)(i),model:{itemData:this.option("itemData"),itemElement:(0,I.u)(t)}}},_createDragElement(t){var i=t,s=this.option("clone"),l=this._getContainer(),d=this.option("dragTemplate");return d?(d=this._getTemplate(d),i=(0,g.Z)("<div>").appendTo(l),d.render(this._getDragTemplateArgs(t,i))):s&&(i=(0,g.Z)("<div>").appendTo(l),t.clone().css({width:t.css("width"),height:t.css("height")}).appendTo(i)),i.toggleClass(this._addWidgetPrefix(Y),i.get(0)!==t.get(0)).toggleClass("dx-rtl",this.option("rtlEnabled"))},_resetDragElement(){this._dragElementIsCloned()?this._$dragElement.remove():this._toggleDraggingClass(!1),this._$dragElement=null},_resetSourceElement(){this._toggleDragSourceClass(!1),this._$sourceElement=null},_detachEventHandlers(){h.Z.off(this._$content(),".".concat(f)),h.Z.off(this._getArea(),".".concat(f))},_move(t,i){(0,$.pB)(i||this._$dragElement,t)},_getDraggableElement(t){var i=this._getSourceElement();if(i)return i;if(this.option("allowMoveByClick"))return this.$element();var l=(0,g.Z)(t&&t.target),d=this._getItemsSelector();if(">"===d[0]){var m=this._$content().find(d);m.is(l)||(l=l.closest(m))}return l},_getSourceElement(){return this._getSourceDraggable()._$sourceElement},_pointerDownHandler(t){if(!(0,_.r1)(t)){var i={},s=this.$element(),l=this.option("dragDirection");("horizontal"===l||"both"===l)&&(i.left=t.pageX-s.offset().left+(0,$.jt)(s).left-(0,R.dz)(s)/2),("vertical"===l||"both"===l)&&(i.top=t.pageY-s.offset().top+(0,$.jt)(s).top-(0,R.Cr)(s)/2),this._move(i,s),this._getAction("onDragMove")(this._getEventArgs(t))}},_isValidElement(t,i){var s=this.option("handle"),l=(0,g.Z)(t.originalEvent&&t.originalEvent.target);return!(s&&!l.closest(s).length||!i.length||i.is(".dx-state-disabled, .dx-state-disabled *"))},_dragStartHandler(t){var i=this._getDraggableElement(t);if(this.dragInProgress=!0,this._isValidElement(t,i)){if(!this._$sourceElement){var s=this._getDragStartArgs(t,i);if(this._getAction("onDragStart")(s),s.cancel)return void(t.cancel=!0);this.option("itemData",s.itemData),this._setSourceDraggable(),this._$sourceElement=i;var l=i.offset();!this._hasClonedDraggable()&&this.option("autoScroll")&&(this._initScrollTop=this._getScrollableScrollTop(),this._initScrollLeft=this._getScrollableScrollLeft(),l=this._getDraggableElementOffset(l.left,l.top));var d=this._$dragElement=this._createDragElement(i);this._toggleDraggingClass(!0),this._toggleDragSourceClass(!0),this._setGestureCoverCursor(d.children());var m="fixed"===d.css("position");this._initPosition((0,M.l)({},s,{dragElement:d.get(0),initialOffset:m&&l})),this._getAction("onDraggableElementShown")((0,P.Z)((0,P.Z)({},s),{dragElement:d}));var S=this._getArea(),O=this._getAreaOffset(S),L=this._getBoundOffset(),Q=(0,R.Y_)(S),rt=(0,R.zp)(S),nt=(0,R.dz)(d),J=(0,R.Cr)(d),lt=d.offset().left-O.left,_t=d.offset().top-O.top;S.length&&(t.maxLeftOffset=lt-L.left,t.maxRightOffset=Q-lt-nt-L.right,t.maxTopOffset=_t-L.top,t.maxBottomOffset=rt-_t-J-L.bottom),this.option("autoScroll")&&this._startAnimator()}}else t.cancel=!0},_getAreaOffset:t=>t&&T.Z.offset(t)||{left:0,top:0},_toggleDraggingClass(t){this._$dragElement&&this._$dragElement.toggleClass(this._addWidgetPrefix("dragging"),t)},_toggleDragSourceClass(t,i){var s=i||this._$sourceElement;s&&s.toggleClass(this._addWidgetPrefix("source"),t)},_setGestureCoverCursor(t){(0,g.Z)(".".concat("dx-gesture-cover")).css("cursor",t.css("cursor"))},_getBoundOffset(){var t=this.option("boundOffset");return(0,Z.mf)(t)&&(t=t.call(this)),(0,G.$b)(t)},_getArea(){var t=this.option("boundary");return(0,Z.mf)(t)&&(t=t.call(this)),(0,g.Z)(t)},_getContainer(){var t=this.option("container");return void 0===t&&(t=(0,x.S3)()),(0,g.Z)(t)},_getDraggableElementOffset(t,i){var s,l,d,m,S=this._initScrollTop,O=this._initScrollLeft,L=this._getScrollableScrollTop(),Q=this._getScrollableScrollLeft(),rt=(0,g.Z)(this.element()).css("position"),J={left:(null!==(l=null===(s=this._startPosition)||void 0===s?void 0:s.left)&&void 0!==l?l:0)+t,top:(null!==(m=null===(d=this._startPosition)||void 0===d?void 0:d.top)&&void 0!==m?m:0)+i};return"fixed"===rt||this._hasClonedDraggable()?J:{left:(0,Z.kE)(Q)?J.left+Q-O:J.left,top:(0,Z.kE)(L)?J.top+L-S:J.top}},_hasClonedDraggable(){return this.option("clone")||this.option("dragTemplate")},_dragMoveHandler(t){if(this._dragMoveArgs=t,this._$dragElement){var i=this._getDraggableElementOffset(t.offset.x,t.offset.y);this._move(i),this._updateScrollable(t);var s=this._getEventArgs(t);this._getAction("onDragMove")(s),!0!==s.cancel&&this._getTargetDraggable().dragMove(t,scrollBy)}else t.cancel=!0},_updateScrollable(t){if(this.option("autoScroll")){var i=N(t),s=D.Z.elementsFromPoint(i.x,i.y,this.$element().get(0));this._verticalScrollHelper.updateScrollable(s,i),this._horizontalScrollHelper.updateScrollable(s,i)}},_getScrollable(t){var i;return t.parents().toArray().some(s=>{var l=(0,g.Z)(s);return!(!this._horizontalScrollHelper.isScrollable(l)&&!this._verticalScrollHelper.isScrollable(l)||(i=l,0))}),i},_getScrollableScrollTop(){var t,i;return null!==(i=null===(t=this._getScrollable((0,g.Z)(this.element())))||void 0===t?void 0:t.scrollTop())&&void 0!==i?i:0},_getScrollableScrollLeft(){var t,i;return null!==(i=null===(t=this._getScrollable((0,g.Z)(this.element())))||void 0===t?void 0:t.scrollLeft())&&void 0!==i?i:0},_defaultActionArgs(){var t=this.callBase.apply(this,arguments),i=this.option("component");return i&&(t.component=i,t.element=i.element()),t},_getEventArgs(t){var i=this._getSourceDraggable(),s=this._getTargetDraggable();return{event:t,itemData:i.option("itemData"),itemElement:(0,I.u)(i._$sourceElement),fromComponent:i.option("component")||i,toComponent:s.option("component")||s,fromData:i.option("data"),toData:s.option("data")}},_getDragStartArgs(t,i){var s=this._getEventArgs(t);return{event:s.event,itemData:s.itemData,itemElement:i,fromData:s.fromData}},_revertItemToInitialPosition(){!this._dragElementIsCloned()&&this._move(this._initialLocate,this._$sourceElement)},_dragEndHandler(t){var i=(0,V.BH)(),s=this._getEventArgs(t),l=this._getEventArgs(t),d=this._getTargetDraggable(),m=!0;this.dragInProgress=!1;try{this._getAction("onDragEnd")(s)}finally{(0,V.gx)((0,V.p4)(s.cancel)).done(S=>{if(!S&&(d!==this&&d._getAction("onDrop")(l),!l.cancel))return m=!1,void(0,V.gx)((0,V.p4)(d.dragEnd(s))).always(i.resolve);i.resolve()}).fail(i.resolve),i.done(()=>{m&&this._revertItemToInitialPosition(),this._resetDragOptions(d)})}},_isTargetOverAnotherDraggable(t){var i=this._getSourceDraggable();if(this===i)return!1;var s=i._$dragElement,l=i.$element(),d=this.$element(),m=N(t),O=D.Z.elementsFromPoint(m.x,m.y,this.element()).filter(nt=>{var J=(0,g.Z)(nt);return!!J.hasClass(this._addWidgetPrefix())&&!J.closest(s).length})[0],L=this._getSourceElement(),Q=O===l.get(0),rt=(0,g.Z)(O).closest(L).length;return!O||O===d.get(0)&&!Q&&!rt},_dragEnterHandler(t){this._fireDragEnterEvent(t),this._isTargetOverAnotherDraggable(t)&&this._setTargetDraggable(),this._getSourceDraggable().dragEnter(t)},_dragLeaveHandler(t){this._fireDragLeaveEvent(t),this._resetTargetDraggable(),this!==this._getSourceDraggable()&&this.reset(),this._getSourceDraggable().dragLeave(t)},_keydownHandler(t){this.dragInProgress&&"Escape"===t.key&&this._keydownEscapeHandler(t)},_keydownEscapeHandler(t){if(this._getSourceElement()){var s=this._getEventArgs(t);if(this._getAction("onDragCancel")(s),!s.cancel){this.dragInProgress=!1,j?._toggleDraggingClass(!1),this._detachEventHandlers(),this._revertItemToInitialPosition();var l=this._getTargetDraggable();this._resetDragOptions(l),this._attachEventHandlers()}}},_getAction(t){return this["_".concat(t,"Action")]||this._createActionByOption(t)},_getAnonymousTemplateName:()=>"content",_initTemplates(){this.option("contentTemplate")&&(this._templateManager.addDefaultTemplates({content:new C.s}),this.callBase.apply(this,arguments))},_render(){this.callBase(),this.$element().addClass(this._addWidgetPrefix());var t=this._templateManager.anonymousTemplateName===this.option("contentTemplate"),i=this._getTemplateByOption("contentTemplate");i&&(0,g.Z)(i.render({container:this.element(),transclude:t}))},_optionChanged(t){var{name:i}=t;switch(i){case"onDragStart":case"onDragMove":case"onDragEnd":case"onDrop":case"onDragEnter":case"onDragLeave":case"onDragCancel":case"onDraggableElementShown":this["_".concat(i,"Action")]=this._createActionByOption(i);break;case"dragTemplate":case"contentTemplate":case"container":case"clone":case"scrollSensitivity":case"scrollSpeed":case"boundOffset":case"handle":case"group":case"data":case"itemData":break;case"allowMoveByClick":case"dragDirection":case"disabled":case"boundary":case"filter":case"immediate":this._resetDragElement(),this._detachEventHandlers(),this._attachEventHandlers();break;case"onCancelByEsc":this._keydownHandler();break;case"autoScroll":this._verticalScrollHelper.reset(),this._horizontalScrollHelper.reset();break;default:this.callBase(t)}},_getTargetDraggable(){return it||this},_getSourceDraggable(){return j||this},_setTargetDraggable(){var t=this.option("group"),i=this._getSourceDraggable();t&&t===i.option("group")&&(it=this)},_setSourceDraggable(){j=this},_resetSourceDraggable(){j=null},_resetTargetDraggable(){it=null},_resetDragOptions(t){this.reset(),t.reset(),this._stopAnimator(),this._horizontalScrollHelper.reset(),this._verticalScrollHelper.reset(),this._resetDragElement(),this._resetSourceElement(),this._resetTargetDraggable(),this._resetSourceDraggable()},_dispose(){this.callBase(),this._detachEventHandlers(),this._resetDragElement(),this._resetTargetDraggable(),this._resetSourceDraggable(),this._$sourceElement=null,this._stopAnimator()},_fireDragEnterEvent(t){var i=this._getEventArgs(t);this._getAction("onDragEnter")(i)},_fireDragLeaveEvent(t){var i=this._getEventArgs(t);this._getAction("onDragLeave")(i)}});(0,U.Z)(f,r);const a=r},328:(at,H,o)=>{o.d(H,{Z:()=>T});const T=o(30629).Z},79359:(at,H,o)=>{o.d(H,{R:()=>q,f:()=>p});var P=o(87462),T=o(63366),$=o(64596),U=o(83684),D=o(71924),W=o(56836),I=o(21374),g={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},G=o(31390),Z=["shading","target","$arrow"],x={left:-1,top:-1,center:0,right:1,bottom:1},q={top:{my:"bottom center",at:"top center",collision:"fit flip"},bottom:{my:"top center",at:"bottom center",collision:"fit flip"},right:{my:"left center",at:"right center",collision:"flip fit"},left:{my:"right center",at:"left center",collision:"flip fit"}},h={h:10,v:10};class p extends G.H{constructor(_){var{shading:u,target:E,$arrow:B}=_;super((0,T.Z)(_,Z)),this._props=(0,P.Z)({},this._props,{shading:u,target:E}),this._$arrow=B,this._positionSide=void 0,this.updatePosition(this._props.position)}positionWrapper(){this._props.shading&&this._$wrapper.css({top:0,left:0})}updateTarget(_){this._props.target=_,this.updatePosition(this._props.position)}_renderBoundaryOffset(){}_getContainerPosition(){var _=(0,W.TG)(this._position.offset||""),{h:u,v:E}=_,B=this._isVerticalSide(),f=this._isHorizontalSide();if(B||f){var A=(this._isPopoverInside()?-1:1)*x[this._positionSide]*((B?(0,I.Cr)(this._$arrow):(0,I.dz)(this._$arrow))-this._getContentBorderWidth(this._positionSide));B?E+=A:u+=A}return(0,U.l)({},this._position,{offset:u+" "+E})}_getContentBorderWidth(_){var u=this._$content.css(g[_]);return parseInt(u)||0}_isPopoverInside(){var _=D.Z.setup.normalizeAlign(this._position.my),u=D.Z.setup.normalizeAlign(this._position.at);return _.h===u.h&&_.v===u.v}_isVerticalSide(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._positionSide;return"top"===_||"bottom"===_}_isHorizontalSide(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._positionSide;return"left"===_||"right"===_}_getDisplaySide(_){var u=D.Z.setup.normalizeAlign(_.my),E=D.Z.setup.normalizeAlign(_.at),B=x[u.h]===x[E.h]&&x[u.v]===x[E.v]?-1:1;return Math.abs(x[u.h]-B*x[E.h])>Math.abs(x[u.v]-B*x[E.v])?E.h:E.v}_normalizePosition(_){var E,u={of:this._props.target,boundaryOffset:h};return E=(0,$.$K)(_)?(0,U.l)(!0,{},u,this._positionToObject(_)):u,this._positionSide=this._getDisplaySide(E),E}_positionToObject(_){return(0,$.HD)(_)?(0,U.l)({},q[_]):_}}},53216:(at,H,o)=>{o.d(H,{Z:()=>z});var P=o(21374),T=o(83520),$=o(34500),U=o(37075),D=o(68082),W=o(24705),I=o(67771),g=o(83684),C=o(46885),b=o(71924),V=o(64596),M=o(92657),w=o(16129),X=o(6795),R=o(49158),G=o(17839),Z=o(79359),c={left:"right",top:"bottom",right:"left",bottom:"top",center:"center"},_=function(n){return(0,V.Kn)(n)?n.name:n},u=function(n,v){var A=n.option(v);return _(A)},B=function(n,v){var{target:A,shading:K,disabled:F,hideEvent:Y}=n.option(),it=(0,V.HD)(A),j=K&&"hide"===v,tt=j?null:u(n,"".concat(v,"Event"));if(j&&Y&&X.Z.log("W1020"),tt&&!F){var N=(0,w.V4)(tt,n.NAME),st=n._createAction(function(){var e=function(n,v){var A=n.option(v);return(0,V.Kn)(A)&&A.delay}(n,v+"Event");this._clearEventsTimeouts(),e?this._timeouts[v]=setTimeout(function(){n[v]()},e):n[v]()}.bind(n),{validatingTargetName:"target"}),et=function(e){st({event:e,target:(0,T.Z)(e.currentTarget)})},k="_"+v+"EventHandler";if(it)n[k]=et,W.Z.on(D.Z.getDocument(),N,A,et);else{var ot=(0,U.u)((0,T.Z)(A));n[k]=void 0,W.Z.on(ot,N,et)}}},f=function(n,v,A,K){var F=K||u(n,A+"Event");if(F){F=(0,w.V4)(F,n.NAME);var Y="_"+A+"EventHandler";n[Y]?W.Z.off(D.Z.getDocument(),F,v,n[Y]):W.Z.off((0,U.u)((0,T.Z)(v)),F)}},y=R.Z.inherit({_getDefaultOptions:function(){return(0,g.l)(this.callBase(),{target:void 0,shading:!1,position:(0,g.l)({},Z.R.bottom),hideOnOutsideClick:!0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",from:1,to:0}},showTitle:!1,width:"auto",height:"auto",dragEnabled:!1,resizeEnabled:!1,fullScreen:!1,hideOnParentScroll:!0,arrowPosition:"",arrowOffset:0,_fixWrapperPosition:!0})},_defaultOptionsRules:function(){return[{device:{platform:"ios"},options:{arrowPosition:{boundaryOffset:{h:20,v:-10},collision:"fit"}}},{device:function(){return!(0,$.Ym)()},options:{animation:null}}]},_init:function(){var n;this.callBase(),this._renderArrow(),this._timeouts={},this.$element().addClass("dx-popover"),this.$wrapper().addClass("dx-popover-wrapper");var v=null===(n=this.option("toolbarItems"))||void 0===n?void 0:n.length;this.setAria("role",v?"dialog":"tooltip")},_render:function(){this.callBase.apply(this,arguments),this._detachEvents(this.option("target")),this._attachEvents()},_detachEvents:function(n){f(this,n,"show"),f(this,n,"hide")},_attachEvents:function(){B(this,"show"),B(this,"hide")},_renderArrow:function(){this._$arrow=(0,T.Z)("<div>").addClass("dx-popover-arrow").prependTo(this.$overlayContent())},_documentDownHandler:function(n){return!this._isOutsideClick(n)||this.callBase(n)},_isOutsideClick:function(n){return!(0,T.Z)(n.target).closest(this.option("target")).length},_animate:function(n){n&&n.to&&"object"==typeof n.to&&(0,g.l)(n.to,{position:this._getContainerPosition()}),this.callBase.apply(this,arguments)},_stopAnimation:function(){this.callBase.apply(this,arguments)},_renderTitle:function(){this.$wrapper().toggleClass("dx-popover-without-title",!this.option("showTitle")),this.callBase()},_renderPosition:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.callBase(),this._renderOverlayPosition(n),this._actions.onPositioned()},_renderOverlayPosition:function(n){this._resetOverlayPosition(n),this._updateContentSize(n);var v=this._getContainerPosition(),A=b.Z.setup(this.$overlayContent(),v),K=this._getSideByLocation(A);this._togglePositionClass("dx-position-"+K),this._toggleFlippedClass(A.h.flip,A.v.flip),(this._isHorizontalSide()||this._isVerticalSide())&&this._renderArrowPosition(K)},_resetOverlayPosition:function(n){this._setContentHeight(n),this._togglePositionClass("dx-position-"+this._positionController._positionSide),(0,C.pB)(this.$overlayContent(),{left:0,top:0}),this._$arrow.css({top:"auto",right:"auto",bottom:"auto",left:"auto"})},_updateContentSize:function(n){if(this.$content()&&n){var v=b.Z.calculate(this.$overlayContent(),this._getContainerPosition());if(v.h.oversize>0&&this._isHorizontalSide()&&!v.h.fit){var A=(0,P.dz)(this.$overlayContent())-v.h.oversize;(0,P.cl)(this.$overlayContent(),A)}if(v.v.oversize>0&&this._isVerticalSide()&&!v.v.fit){var K=(0,P.Cr)(this.$overlayContent())-v.v.oversize,F=(0,P.Cr)(this.$content())-v.v.oversize;(0,P.QQ)(this.$overlayContent(),K),(0,P.QQ)(this.$content(),F)}}},_getContainerPosition:function(){return this._positionController._getContainerPosition()},_hideOnParentScrollTarget:function(){return(0,T.Z)(this._positionController._position.of||this.callBase())},_getSideByLocation:function(n){var v=n.v.flip,A=n.h.flip;return this._isVerticalSide()&&v||this._isHorizontalSide()&&A||this._isPopoverInside()?c[this._positionController._positionSide]:this._positionController._positionSide},_togglePositionClass:function(n){this.$wrapper().removeClass("dx-position-left dx-position-right dx-position-top dx-position-bottom").addClass(n)},_toggleFlippedClass:function(n,v){this.$wrapper().toggleClass("dx-popover-flipped-horizontal",n).toggleClass("dx-popover-flipped-vertical",v)},_renderArrowPosition:function(n){var v=(0,G.l)(this._$arrow.get(0)),A=-(this._isVerticalSide(n)?v.height:v.width);this._$arrow.css(c[n],A);var a,K=this._isVerticalSide(n)?"left":"top",F=this._isVerticalSide(n)?"width":"height",Y=(0,T.Z)(this._positionController._position.of),it=b.Z.offset(Y)||{top:0,left:0},j=b.Z.offset(this.$overlayContent()),tt=v[F],N=j[K],st=(0,G.l)(this.$overlayContent().get(0))[F],et=it[K],k=Y.get(0),ot=k&&!k.preventDefault?(0,G.l)(k)[F]:0,e=Math.max(N,et),r=Math.min(N+st,et+ot);a="start"===this.option("arrowPosition")?e-N:"end"===this.option("arrowPosition")?r-N-tt:(e+r)/2-N-tt/2;var t=this._positionController._getContentBorderWidth(n),i=(0,M.n$)(a-t+this.option("arrowOffset"),t,st-tt-2*t);this._$arrow.css(K,i)},_isPopoverInside:function(){return this._positionController._isPopoverInside()},_setContentHeight:function(n){n&&this.callBase()},_getPositionControllerConfig(){var{shading:n,target:v}=this.option();return(0,g.l)({},this.callBase(),{target:v,shading:n,$arrow:this._$arrow})},_initPositionController(){this._positionController=new Z.f(this._getPositionControllerConfig())},_renderWrapperDimensions:function(){this.option("shading")&&this.$wrapper().css({width:"100%",height:"100%"})},_isVerticalSide:function(n){return this._positionController._isVerticalSide(n)},_isHorizontalSide:function(n){return this._positionController._isHorizontalSide(n)},_clearEventTimeout:function(n){clearTimeout(this._timeouts[n])},_clearEventsTimeouts:function(){this._clearEventTimeout("show"),this._clearEventTimeout("hide")},_clean:function(){this._detachEvents(this.option("target")),this.callBase.apply(this,arguments)},_optionChanged:function(n){switch(n.name){case"arrowPosition":case"arrowOffset":this._renderGeometry();break;case"fullScreen":n.value&&this.option("fullScreen",!1);break;case"target":n.previousValue&&this._detachEvents(n.previousValue),this._positionController.updateTarget(n.value),this._invalidate();break;case"showEvent":case"hideEvent":var v=n.name.substring(0,4),A=_(n.previousValue);this.hide(),f(this,this.option("target"),v,A),B(this,v);break;case"visible":this._clearEventTimeout(n.value?"show":"hide"),this.callBase(n);break;default:this.callBase(n)}},show:function(n){return n&&this.option("target",n),this.callBase()}});(0,I.Z)("dxPopover",y);const z=y},8166:(at,H,o)=>{o.d(H,{Z:()=>ot});var P=o(21374),T=o(83520),$=o(13921),U=o(29694),D=o(24705),W=o(67771),I=o(56836),g=o(41334),C=o(80316),b=o(43615),V=o(37075),M=o(64596),w=o(34500),X=o(83684),R=o(91553),G=o(46769),Z=o(40911),x=o(16129),q=o(1037),h=o(43310),p=o(2928),c=o(41760),_=o(20903),u=o(98595),E=o(9861),B=o(6795),f="dxTagData",n="dx-tag",v="dx-tagbox-multi-tag",A="dx-tag-custom",K="dx-tag-remove-button",Y="dx-tagbox-single-line",k=_.Z.inherit({_supportedKeys:function(){var e=this.callBase(),r=t=>this._list._keyboardHandler(t),a=this.option("rtlEnabled");return(0,X.l)({},e,{backspace:function(t){if(this._isCaretAtTheStart()){this._processKeyboardEvent(t),this._isTagRemoved=!0;var i=this._$focusedTag||this._tagElements().last();this._$focusedTag&&this._moveTagFocus("prev",!0),0!==i.length&&(this._preserveFocusedTag=!0,this._removeTagElement(i),delete this._preserveFocusedTag)}},upArrow:(t,i)=>t.altKey||!this._list?e.upArrow.call(this,t):r(i),downArrow:(t,i)=>t.altKey||!this._list?e.downArrow.call(this,t):r(i),del:function(t){if(this._$focusedTag&&this._isCaretAtTheStart()){this._processKeyboardEvent(t),this._isTagRemoved=!0;var i=this._$focusedTag;this._moveTagFocus("next",!0),this._preserveFocusedTag=!0,this._removeTagElement(i),delete this._preserveFocusedTag}},enter:function(t,i){var s=this._list&&null!==this._list.option("focusedElement");if(this.option("acceptCustomValue")&&!s)return t.preventDefault(),void(""!==this._searchValue()&&this._customItemAddedHandler(t));this.option("opened")&&(this._saveValueChangeEvent(t),r(i),t.preventDefault())},space:function(t,i){var s=this.option("opened"),l=this._shouldRenderSearchEvent();s&&!l&&(this._saveValueChangeEvent(t),r(i),t.preventDefault())},leftArrow:function(t){if(!(!this._isCaretAtTheStart()||this._isEmpty()||this._isEditable()&&a&&!this._$focusedTag)){t.preventDefault();var i=a?"next":"prev";this._moveTagFocus(i),!this.option("multiline")&&this._scrollContainer(i)}},rightArrow:function(t){if(this._isCaretAtTheStart()&&!this._isEmpty()&&(!this._isEditable()||a||this._$focusedTag)){t.preventDefault();var i=a?"prev":"next";this._moveTagFocus(i),!this.option("multiline")&&this._scrollContainer(i)}}})},_processKeyboardEvent:function(e){e.preventDefault(),e.stopPropagation(),this._saveValueChangeEvent(e)},_isEmpty:function(){return 0===this._getValue().length},_updateTagsContainer:function(e){this._$tagsContainer=e.addClass("dx-tag-container")},_allowSelectItemByTab:function(){return!1},_isCaretAtTheStart:function(){var e=(0,h.Z)(this._input());return 0===e.start&&0===e.end},_updateInputAriaActiveDescendant(e){this.setAria("activedescendant",e,this._input())},_moveTagFocus:function(e,r){if(!this._$focusedTag){var a=this._tagElements();return this._$focusedTag="next"===e?a.first():a.last(),this._toggleFocusClass(!0,this._$focusedTag),void this._updateInputAriaActiveDescendant(this._$focusedTag.attr("id"))}var t=this._$focusedTag[e](".".concat(n));t.length>0?(this._replaceFocusedTag(t),this._updateInputAriaActiveDescendant(t.attr("id"))):(r||"next"===e&&this._isEditable())&&(this._clearTagFocus(),this._updateInputAriaActiveDescendant())},_replaceFocusedTag:function(e){this._toggleFocusClass(!1,this._$focusedTag),this._$focusedTag=e,this._toggleFocusClass(!0,this._$focusedTag)},_clearTagFocus:function(){this._$focusedTag&&(this._toggleFocusClass(!1,this._$focusedTag),this._updateInputAriaActiveDescendant(),delete this._$focusedTag)},_focusClassTarget:function(e){return e&&e.length&&e[0]!==this._focusTarget()[0]?e:this.callBase()},_getLabelContainer:function(){return this._$tagsContainer},_getFieldElement(){return this._input()},_scrollContainer:function(e){if(!this.option("multiline")&&(0,w.Ym)()&&this._$tagsContainer){var r=this._getScrollPosition(e);this._$tagsContainer.scrollLeft(r)}},_getScrollPosition:function(e){return"start"===e||"end"===e?this._getBorderPosition(e):this._$focusedTag?this._getFocusedTagPosition(e):this._getBorderPosition("end")},_getBorderPosition:function(e){var r=this.option("rtlEnabled");return"end"===e^r^!r?0:(r?-1:1)*(this._$tagsContainer.get(0).scrollWidth-(0,P.Y_)(this._$tagsContainer))},_getFocusedTagPosition:function(e){var a="next"===e^this.option("rtlEnabled"),{left:t}=this._$focusedTag.position(),i=this._$tagsContainer.scrollLeft();return a&&(t+=(0,P.Y_)(this._$focusedTag,!0)-(0,P.Y_)(this._$tagsContainer)),a^t<0&&(i+=t),i},_setNextValue:I.ZT,_getDefaultOptions:function(){return(0,X.l)(this.callBase(),{value:[],showDropDownButton:!1,maxFilterQueryLength:1500,tagTemplate:"tag",selectAllText:Z.Z.format("dxList-selectAll"),hideSelectedItems:!1,selectedItems:[],selectAllMode:"page",onSelectAllValueChanged:null,maxDisplayedTags:void 0,showMultiTagOnly:!0,onMultiTagPreparing:null,multiline:!0,useSubmitBehavior:!0})},_init:function(){this.callBase(),this._selectedItems=[],this._initSelectAllValueChangedAction()},_initActions:function(){this.callBase(),this._initMultiTagPreparingAction()},_initMultiTagPreparingAction:function(){this._multiTagPreparingAction=this._createActionByOption("onMultiTagPreparing",{beforeExecute:function(e){this._multiTagPreparingHandler(e.args[0])}.bind(this),excludeValidators:["disabled","readOnly"]})},_multiTagPreparingHandler:function(e){var{length:r}=this._getValue();e.text=this.option("showMultiTagOnly")?Z.Z.getFormatter("dxTagBox-selected")(r):Z.Z.getFormatter("dxTagBox-moreSelected")(r-this.option("maxDisplayedTags")+1)},_initDynamicTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({tag:new u.c((e,r)=>{var a,t=(0,T.Z)("<div>").addClass("dx-tag-content");(0,T.Z)("<span>").text(null!==(a=r.text)&&void 0!==a?a:r).appendTo(t),(0,T.Z)("<div>").addClass(K).appendTo(t),e.append(t)},["text"],this.option("integrationOptions.watchMethod"),{text:this._displayGetter})})},_toggleSubmitElement:function(e){e?(this._renderSubmitElement(),this._setSubmitValue()):(this._$submitElement&&this._$submitElement.remove(),delete this._$submitElement)},_renderSubmitElement:function(){this.option("useSubmitBehavior")&&(this._$submitElement=(0,T.Z)("<select>").attr({multiple:"multiple","aria-label":"Selected items"}).css("display","none").appendTo(this.$element()))},_setSubmitValue:function(){if(this.option("useSubmitBehavior")){for(var e=this._getValue(),r=[],a=0,t=e.length;a<t;a++){var i=this._shouldUseDisplayValue(e[a]);r.push((0,T.Z)("<option>").val(i?this._displayGetter(e[a]):e[a]).attr("selected","selected"))}this._getSubmitElement().empty().append(r)}},_initMarkup:function(){this._tagElementsCache=(0,T.Z)();var e=!this.option("multiline");this.$element().addClass("dx-tagbox").toggleClass("dx-tagbox-only-select",!(this.option("searchEnabled")||this.option("acceptCustomValue"))).toggleClass(Y,e),this.setAria({role:"group",roledescription:"tagbox"},this.$element()),this._initTagTemplate(),this.callBase()},_getNewLabelId:(e,r,a)=>e?a?e===r?void 0:e.split(" ").filter(t=>t!==r).join(" "):"".concat(e," ").concat(r):r,_updateElementAria(e,r){if(e){var t=this.$element().attr("aria-labelledby"),i=this._getNewLabelId(t,e,r);this.setAria("labelledby",i,this.$element())}else this.setAria("labelledby",void 0,this.$element())},_render:function(){this.callBase(),this._renderTagRemoveAction(),this._renderSingleLineScroll(),this._scrollContainer("start")},_initTagTemplate:function(){this._tagTemplate=this._getTemplateByOption("tagTemplate")},_renderField:function(){var e=!(0,M.$K)(this.option("fieldTemplate"));this.$element().toggleClass("dx-tagbox-default-template",e).toggleClass("dx-tagbox-custom-template",!e),this.callBase()},_renderTagRemoveAction:function(){var e=this._createAction(this._removeTagHandler.bind(this)),r=(0,x.V4)(q.u,"dxTagBoxTagRemove");D.Z.off(this._$tagsContainer,r),D.Z.on(this._$tagsContainer,r,".".concat(K),a=>{e({event:a})})},_renderSingleLineScroll:function(){var e=(0,x.V4)("dxmousewheel",this.NAME),r=this.$element(),a=this.option("multiline");D.Z.off(r,e),"desktop"===$.Z.real().deviceType?a||D.Z.on(r,e,this._tagContainerMouseWheelHandler.bind(this)):this._$tagsContainer&&this._$tagsContainer.css("overflowX",a?"":"auto")},_tagContainerMouseWheelHandler:function(e){var r=this._$tagsContainer.scrollLeft(),a=-.3*e.delta;if(!(0,x.j1)(e)&&(0,E.u)(this._$tagsContainer,a,!0))return this._$tagsContainer.scrollLeft(r+a),!1},_renderEvents:function(){this.callBase();var e=this._input(),r=(0,x.V4)("keydown",this.NAME);D.Z.on(e,r,a=>{var t=(0,x.EV)(a);!this._isControlKey(t)&&this._isEditable()&&this._clearTagFocus()})},_popupWrapperClass:function(){return this.callBase()+" dx-tagbox-popup-wrapper"},_renderInput:function(){this.callBase(),this._renderPreventBlurOnInputClick()},_renderPreventBlurOnInputClick:function(){var e=(0,x.V4)("mousedown","dxTagBox");D.Z.off(this._inputWrapper(),e),D.Z.on(this._inputWrapper(),e,r=>{r.target!==this._input()[0]&&this._isFocused()&&r.preventDefault()})},_renderInputValueImpl:function(){return this._renderMultiSelect()},_loadInputValue:function(){return(0,C.gx)()},_clearTextValue:function(){this._input().val(""),this._toggleEmptinessEventHandler(),this.option("text","")},_focusInHandler:function(e){this._preventNestedFocusEvent(e)||this._scrollContainer("end"),this.callBase(e)},_renderInputValue:function(){return this.option("displayValue",this._searchValue()),this.callBase()},_restoreInputText:function(e){e||this._clearTextValue()},_focusOutHandler:function(e){this._preventNestedFocusEvent(e)||(this._clearTagFocus(),this._scrollContainer("start")),this.callBase(e)},_getFirstPopupElement:function(){return this.option("showSelectionControls")?this._list._focusTarget():this.callBase()},_initSelectAllValueChangedAction:function(){this._selectAllValueChangeAction=this._createActionByOption("onSelectAllValueChanged")},_renderList:function(){this.callBase(),this._setListDataSourceFilter(),this.option("showSelectionControls")&&(this._list.registerKeyHandler("tab",e=>this._popupElementTabHandler(e)),this._list.registerKeyHandler("escape",e=>this._popupElementEscHandler(e)))},_canListHaveFocus:function(){return"useButtons"===this.option("applyValueMode")},_listConfig:function(){var e=this.option("showSelectionControls")?"all":"multiple";return(0,X.l)(this.callBase(),{selectionMode:e,selectAllText:this.option("selectAllText"),onSelectAllValueChanged:r=>{var{value:a}=r;this._selectAllValueChangeAction({value:a})},selectAllMode:this.option("selectAllMode"),selectedItems:this._selectedItems,onFocusedItemChanged:null})},_renderMultiSelect:function(){var e=new C.BH;return this._updateTagsContainer(this._$textEditorInputContainer),this._renderInputSize(),this._renderTags().done(()=>{this._popup&&this._popup.refreshPosition(),e.resolve()}).fail(e.reject),e.promise()},_listItemClickHandler:function(e){!this.option("showSelectionControls")&&this._clearTextValue(),"useButtons"!==this.option("applyValueMode")&&(this.callBase(e),this._saveValueChangeEvent(void 0))},_shouldClearFilter:function(){var e=this.callBase();return!this.option("showSelectionControls")&&e},_renderInputSize:function(){var e=this._input(),r=e.val(),a=(0,M.HD)(r)&&r,t="",i="",s=this.option("searchEnabled")||this.option("acceptCustomValue");if(a&&s){var l=(0,b.l5)(e,r,{includePaddings:!0});l.insertAfter(e),t=(0,P.Y_)(l)+5,l.remove()}else r||(i=1);e.css("width",t),e.attr("size",i)},_renderInputSubstitution:function(){this.callBase(),this._updateWidgetHeight()},_getValue:function(){return this.option("value")||[]},_multiTagRequired:function(){var e=this._getValue(),r=this.option("maxDisplayedTags");return(0,M.$K)(r)&&e.length>r},_renderMultiTag:function(e){var r=(0,T.Z)("<div>").addClass(n).addClass(v),a={multiTagElement:(0,V.u)(r),selectedItems:this.option("selectedItems")};return this._multiTagPreparingAction(a),!a.cancel&&(r.data(f,a.text),r.insertBefore(e),this._tagTemplate.render({model:a.text,container:(0,V.u)(r)}),r)},_getFilter:function(e){var r=this._dataController.filter(),a=e.getCombinedFilter(this.option("valueExpr"),r),t=encodeURI(JSON.stringify(a)).length,i=this.option("maxFilterQueryLength");if(t<=i)return a;B.Z.log("W1019",i)},_getFilteredItems:function(e){var r,a;null===(r=this._loadFilteredItemsPromise)||void 0===r||r.reject();var t=new g.M(e),i=null===(a=this._list)||void 0===a?void 0:a.option("selectedItems"),s=!!i&&this._list._dataController.isLoaded(),l=i||this.option("selectedItems"),d=t.getLocalFilter(this._valueGetter),m=l.filter(d),S=m.length===e.length,O=new C.BH,L=this._dataController;if((!this._isDataSourceChanged||s)&&S)return O.resolve(m).promise();var{customQueryParams:Q,expand:rt,select:nt}=L.loadOptions(),J=this._getFilter(t);return L.loadFromStore({filter:J,customQueryParams:Q,expand:rt,select:nt}).done((lt,_t)=>{if(this._isDataSourceChanged=!1,this._disposed)O.reject();else{var{data:ht}=(0,p.r6)(lt,_t),dt=L.applyMapFunction(ht);O.resolve(dt.filter(d))}}).fail(O.reject),this._loadFilteredItemsPromise=O,O.promise()},_createTagsData:function(e,r){var a=[],t={},i="this"===this._valueGetterExpr(),s={};r.forEach(m=>{var S=i?JSON.stringify(m):this._valueGetter(m);s[S]=m});var l=[];e.forEach((m,S)=>{var O=s[i?JSON.stringify(m):m];if(i&&!(0,M.$K)(O))l.push(this._loadItem(m,t).always(Q=>{var rt=this._createTagData(a,Q,m,S);a.splice(S,0,rt)}));else{var L=this._createTagData(a,O,m,S);a.splice(S,0,L)}});var d=new C.BH;return C.gx.apply(this,l).always(function(){d.resolve(a)}),d.promise()},_createTagData:function(e,r,a,t){if((0,M.$K)(r))return this._selectedItems.push(r),r;var i=this.option("selectedItem");return this._valueGetter(i)===a?i:a},_isGroupedData:function(){return this.option("grouped")&&!this._dataController.group()},_getItemsByValues:function(e){var r=[];return e.forEach(function(a){var t=this._getItemFromPlain(a);(0,M.$K)(t)&&r.push(t)}.bind(this)),r},_getFilteredGroupedItems:function(e){var r=new C.BH;return this._filteredGroupedItemsLoadPromise&&this._dataController.cancel(this._filteredGroupedItemsLoadPromise.operationId),this._dataController.items().length?r.resolve(this._getItemsByValues(e)):this._filteredGroupedItemsLoadPromise=this._dataController.load().done(()=>{r.resolve(this._getItemsByValues(e))}).fail(()=>{r.resolve([])}).always(()=>{this._filteredGroupedItemsLoadPromise=void 0}),r.promise()},_loadTagsData:function(){var e=this._getValue(),r=new C.BH;return this._selectedItems=[],(this._isGroupedData()?this._getFilteredGroupedItems(e):this._getFilteredItems(e)).done(t=>{this._createTagsData(e,t).always(function(s){r.resolve(s)})}).fail(r.reject.bind(this)),r.promise()},_renderTags:function(){var e=new C.BH,r=!1;return this._shouldGetItemsFromPlain(this._valuesToUpdate)&&(this._selectedItems=this._getItemsFromPlain(this._valuesToUpdate),this._selectedItems.length===this._valuesToUpdate.length&&(this._renderTagsImpl(this._selectedItems),r=!0,e.resolve())),r||this._loadTagsData().done(a=>{this._disposed?e.reject():(this._renderTagsImpl(a),e.resolve())}).fail(e.reject),e.promise()},_renderTagsImpl:function(e){this._renderTagsCore(e),this._renderEmptyState(),this._preserveFocusedTag||this._clearTagFocus()},_shouldGetItemsFromPlain:function(e){return e&&this._dataController.isLoaded()&&e.length<=this._getPlainItems().length},_getItemsFromPlain:function(e){var r=this._getSelectedItemsFromList(e);if(0===r.length&&e.length>0||r.length<e.length){var t=this._getPlainItems();r=this._filterSelectedItems(t,e)}return r},_getSelectedItemsFromList:function(e){var r,a=null===(r=this._list)||void 0===r?void 0:r.option("selectedItems"),t=[];return e.length===a?.length&&(t=this._filterSelectedItems(a,e)),t},_filterSelectedItems:function(e,r){return e.filter(t=>{for(var i,s=0;s<r.length;s++)if((0,M.Kn)(i=r[s])){if(this._isValueEquals(t,i))return!0}else if(this._isValueEquals(this._valueGetter(t),i))return!0;return!1},this)},_integrateInput:function(){this._isInputReady.resolve(),this.callBase();var e=this.$element().find(".".concat("dx-texteditor-input-container"));this._updateTagsContainer(e),this._renderTagRemoveAction()},_renderTagsCore:function(e){var r;null===(r=this._isInputReady)||void 0===r||r.reject(),this._isInputReady=new C.BH,this._renderField(),this.option("selectedItems",this._selectedItems.slice()),this._cleanTags(),this._input().length>0&&this._isInputReady.resolve(),(0,C.gx)(this._isInputReady).done(()=>{this._renderTagsElements(e)})},_renderTagsElements(e){var r=this._multiTagRequired()&&this._renderMultiTag(this._input()),a=this.option("showMultiTagOnly"),t=this.option("maxDisplayedTags");e.forEach((i,s)=>{if(r&&a||r&&!a&&s-t>=-1)return!1;this._renderTag(i,r||this._input())}),this._isFocused()&&this._scrollContainer("end"),this._refreshTagElements()},_cleanTags:function(){if(this._multiTagRequired())this._tagElements().remove();else{var e=this._tagElements(),r=this._getValue();(0,R.S6)(e,function(a,t){var i=(0,T.Z)(t),s=i.data(f);null!=r&&r.includes(s)||i.remove()})}this._updateElementAria()},_renderEmptyState:function(){var e=!(this._getValue().length||this._selectedItems.length||this._searchValue());this._toggleEmptiness(e),this._renderDisplayText()},_renderDisplayText:function(){this._renderInputSize()},_refreshTagElements:function(){this._tagElementsCache=this.$element().find(".".concat(n))},_tagElements:function(){return this._tagElementsCache},_applyTagTemplate:function(e,r){this._tagTemplate.render({model:e,container:(0,V.u)(r)})},_renderTag:function(e,r){var a=this._valueGetter(e);if((0,M.$K)(a)){var t=this._getTag(a),i=this._displayGetter(e),s=this._getItemModel(e,i);if(t)(0,M.$K)(i)&&(t.empty(),this._applyTagTemplate(s,t)),t.removeClass(A),this._updateElementAria(t.attr("id"));else{var l="dx-".concat(new c.Z);t=this._createTag(a,r,l),(0,M.$K)(e)?this._applyTagTemplate(s,t):(t.addClass(A),this._applyTagTemplate(a,t)),this._updateElementAria(l)}}},_getItemModel:function(e,r){return(0,M.Kn)(e)&&(0,M.$K)(r)?e:(0,I.IS)(r,"")},_getTag:function(e){for(var r=this._tagElements(),a=r.length,t=!1,i=0;i<a;i++){var s=r[i],l=(0,U.aT)(s,f);if(e===l||(0,I.bY)(e,l)){t=(0,T.Z)(s);break}}return t},_createTag:function(e,r,a){return(0,T.Z)("<div>").attr("id",a).addClass(n).data(f,e).insertBefore(r)},_toggleEmptinessEventHandler:function(){this._toggleEmptiness(!this._getValue().length&&!this._searchValue().length)},_customItemAddedHandler:function(e){this.callBase(e),this._clearTextValue()},_removeTagHandler:function(e){var r=e.event;r.stopPropagation(),this._saveValueChangeEvent(r);var a=(0,T.Z)(r.target).closest(".".concat(n));this._removeTagElement(a)},_removeTagElement:function(e){if(e.hasClass(v))this.option("showMultiTagOnly")?this.reset():this.option("value",this._getValue().slice(0,this.option("maxDisplayedTags")));else{var r=e.data(f),a=e.attr("id");this._removeTagWithUpdate(r),this._updateElementAria(a,!0),this._refreshTagElements()}},_updateField:I.ZT,_removeTagWithUpdate:function(e){var r=this._getValue().slice();this._removeTag(r,e),this.option("value",r),0===r.length&&this._clearTagFocus()},_getCurrentValue:function(){return this._lastValue()},_selectionChangeHandler:function(e){if("useButtons"!==this.option("applyValueMode")){var r=this._getValue().slice();if((0,R.S6)(e.removedItems||[],(t,i)=>{this._removeTag(r,this._valueGetter(i))}),(0,R.S6)(e.addedItems||[],(t,i)=>{this._addTag(r,this._valueGetter(i))}),this._updateWidgetHeight(),!(0,I.bY)(this._list.option("selectedItemKeys"),this.option("value"))){var a=this._list._getSelectionChangeEvent();a&&this._saveValueChangeEvent(a),this.option("value",r)}this._list._saveSelectionChangeEvent(void 0)}},_removeTag:function(e,r){var a=this._valueIndex(r,e);a>=0&&e.splice(a,1)},_addTag:function(e,r){this._valueIndex(r)<0&&e.push(r)},_fieldRenderData:function(){return this._selectedItems.slice()},_completeSelection:function(e){this.option("showSelectionControls")||this._setValue(e)},_setValue:function(e){if(null!==e){var r="useButtons"===this.option("applyValueMode"),a=this._valueIndex(e),t=(r?this._list.option("selectedItemKeys"):this._getValue()).slice();a>=0?t.splice(a,1):t.push(e),"useButtons"===this.option("applyValueMode")?this._list.option("selectedItemKeys",t):this.option("value",t)}},_isSelectedValue:function(e,r){return this._valueIndex(e,null,r)>-1},_valueIndex:function(e,r,a){var t=-1;return a&&"object"!=typeof e&&(a.indexByValues||(a.indexByValues={},(r=r||this._getValue()).forEach(function(i,s){a.indexByValues[i]=s})),e in a.indexByValues)?a.indexByValues[e]:(r=r||this._getValue(),(0,R.S6)(r,(i,s)=>{if(this._isValueEquals(e,s))return t=i,!1}),t)},_lastValue:function(){var e=this._getValue();return e[e.length-1]??null},_shouldRenderSearchEvent:function(){return this.option("searchEnabled")||this.option("acceptCustomValue")},_searchHandler:function(e){this.option("searchEnabled")&&e&&!this._isTagRemoved&&(this.callBase(arguments),this._setListDataSourceFilter()),this._updateWidgetHeight(),delete this._isTagRemoved},_updateWidgetHeight:function(){var e=this.$element(),r=(0,P.Cr)(e);this._renderInputSize();var a=(0,P.Cr)(e);this._popup&&this.option("opened")&&this._isEditable()&&a!==r&&this._popup.repaint()},_refreshSelected:function(){var e;null!==(e=this._list)&&void 0!==e&&e.getDataSource()&&this._list.option("selectedItems",this._selectedItems)},_resetListDataSourceFilter:function(){var e=this._dataController;delete this._userFilter,e.filter(null),e.reload()},_setListDataSourceFilter:function(){if(this.option("hideSelectedItems")&&this._list){var e=this._dataController,r=this._valueGetterExpr();if((0,M.HD)(r)&&"this"!==r){var a=this._dataSourceFilterExpr();void 0===this._userFilter&&(this._userFilter=e.filter()||null),this._userFilter&&a.push(this._userFilter),e.filter(a.length?a:null)}else e.filter(this._dataSourceFilterFunction.bind(this));e.load()}},_dataSourceFilterExpr:function(){var e=[];return this._getValue().forEach(r=>e.push(["!",[this._valueGetterExpr(),r]])),e},_dataSourceFilterFunction:function(e){var r=this._valueGetter(e),a=!0;return(0,R.S6)(this._getValue(),(t,i)=>{if(this._isValueEquals(i,r))return a=!1,!1}),a},_dataSourceChangedHandler:function(){this._isDataSourceChanged=!0,this.callBase.apply(this,arguments)},_applyButtonHandler:function(e){this._saveValueChangeEvent(e.event),this.option("value",this._getSortedListValues()),this._clearTextValue(),this.callBase(),this._cancelSearchIfNeed()},_getSortedListValues:function(){var e=this._getListValues(),r=this.option("value")||[],a=e.length?(0,G.Ed)(r,e):[],t=a.length?(0,G.R1)(e,r):e;return a.concat(t)},_getListValues:function(){return this._list?this._getPlainItems(this._list.option("selectedItems")).map(e=>this._valueGetter(e)):[]},_setListDataSource:function(){var e=this._getValue();this.callBase(),e!==this.option("value")&&this.option("value",e),this._refreshSelected()},_renderOpenedState:function(){this.callBase(),"useButtons"===this.option("applyValueMode")&&!this.option("opened")&&this._refreshSelected()},reset:function(){this._restoreInputText();var e=this._getDefaultOptions().value,r=this.option("value");e&&0===e.length&&r&&e.length===r.length||this.callBase()},_clean:function(){this.callBase(),delete this._defaultTagTemplate,delete this._valuesToUpdate,delete this._tagTemplate},_getSelectedItemsDifference(e,r){if(!e.length)return{addedItems:[],removedItems:r.slice()};if(!r.length)return{addedItems:e.slice(),removedItems:[]};var a=r.reduce((i,s)=>(i[this._valueGetter(s)]=s,i),{}),t=[];return e.forEach(i=>{var s=this._valueGetter(i);a[s]||t.push(i),delete a[s]}),{addedItems:t,removedItems:Object.values(a)}},_optionChanged:function(e){var{name:r,value:a,previousValue:t}=e;switch(r){case"onSelectAllValueChanged":this._initSelectAllValueChangedAction();break;case"onMultiTagPreparing":this._initMultiTagPreparingAction(),this._renderTags();break;case"hideSelectedItems":a?this._setListDataSourceFilter():this._resetListDataSourceFilter();break;case"useSubmitBehavior":this._toggleSubmitElement(a);break;case"displayExpr":this.callBase(e),this._initTemplates(),this._invalidate();break;case"tagTemplate":this._initTagTemplate(),this._invalidate();break;case"selectAllText":this._setListOption("selectAllText",this.option("selectAllText"));break;case"readOnly":case"disabled":this.callBase(e),!a&&this._refreshEvents();break;case"value":this._valuesToUpdate=a,this.callBase(e),this._valuesToUpdate=void 0,this._setListDataSourceFilter();break;case"maxDisplayedTags":case"showMultiTagOnly":this._renderTags();break;case"selectAllMode":this._setListOption(r,a);break;case"selectedItem":case"maxFilterQueryLength":break;case"selectedItems":this._selectionChangedAction(this._getSelectedItemsDifference(a,t));break;case"multiline":this.$element().toggleClass(Y,!a),this._renderSingleLineScroll();break;default:this.callBase(e)}},_getActualSearchValue:function(){return this.callBase()||this._searchValue()},_popupHidingHandler:function(){this.callBase(),this._clearFilter()}});(0,W.Z)("dxTagBox",k);const ot=k},9861:(at,H,o)=>{o.d(H,{M:()=>U,u:()=>$});var P=o(83520),T=o(16129),$=function(D,W,I){var g=(0,P.Z)(D),C=I?g.scrollLeft():g.scrollTop(),b=I?"Width":"Height",w=g.prop("scroll".concat(b))-g.prop("client".concat(b))-C|0;return(0!==C||0!==w)&&(!!(0===C&&W>=0||0===w&&W<=0||C>0&&w>0)||void 0)},U=function(D,W){var I=(0,P.Z)(D);return{validate:function(g){if((0,T.pR)(g)&&(!W||(0,P.Z)(g.target).is(D)))return!!$(I,-g.delta,g.shiftKey)&&(g._needSkipEvent=!0,!0)}}}},38299:(at,H,o)=>{o.d(H,{Z:()=>T});const T=o(11498).Z},11498:(at,H,o)=>{o.d(H,{Z:()=>b});var P=o(83520),T=o(41760),$=o(67771),U=o(83684),D=o(53216),W=o(64596),C=D.Z.inherit({_getDefaultOptions:function(){return(0,U.l)(this.callBase(),{toolbarItems:[],showCloseButton:!1,enableBodyScroll:!0,showTitle:!1,title:null,titleTemplate:null,onTitleRendered:null,bottomTemplate:null,preventScrollEvents:!1,propagateOutsideClick:!0})},_render:function(){this.$element().addClass("dx-tooltip"),this.$wrapper().addClass("dx-tooltip-wrapper"),this.callBase()},_renderContent:function(){this.callBase(),this._contentId="dx-"+new T.Z,this.$overlayContent().attr({id:this._contentId}),this._toggleAriaDescription(!0)},_toggleAriaDescription:function(V){var M=(0,P.Z)(this.option("target")),w=V?this._contentId:void 0;(0,W.FJ)(M.get(0))||this.setAria("describedby",w,M)}});(0,$.Z)("dxTooltip",C);const b=C},64634:(at,H,o)=>{o.d(H,{Z:()=>q});var P=o(29694),T=o(47685),$=o(6795),U=o(48966),D=o(83684),W=o(91553),I=o(59150);const b=o(24245).Z.inherit({ctor(h,p){this.editor=h,this.validator=p,this.validationRequestsCallbacks=[];var c=_=>{this.validationRequestsCallbacks.forEach(u=>u(_))};h.validationRequest.add(c),h.on("disposing",function(){h.validationRequest.remove(c)})},getValue(){return this.editor.option("value")},getCurrentValidationError(){return this.editor.option("validationError")},bypass(){return this.editor.option("disabled")},applyValidationResults(h){this.editor.option({validationErrors:h.brokenRules,validationStatus:h.status})},reset(){this.editor.reset()},focus(){this.editor.focus()}});var V=o(67771),M=o(80316),w=o(41760),R="valid",Z="pending",x=U.Z.inherit({_initOptions:function(h){this.callBase.apply(this,arguments),this.option(I.Z.initValidationOptions(h))},_getDefaultOptions(){return(0,D.l)(this.callBase(),{validationRules:[]})},_init(){this.callBase(),this._initGroupRegistration(),this.focused=(0,T.Z)(),this._initAdapter(),this._validationInfo={result:null,deferred:null,skipValidation:!1}},_initGroupRegistration(){var h=this._findGroup();this._groupWasInit||this.on("disposing",function(p){I.Z.removeRegisteredValidator(p.component._validationGroup,p.component)}),(!this._groupWasInit||this._validationGroup!==h)&&(I.Z.removeRegisteredValidator(this._validationGroup,this),this._groupWasInit=!0,this._validationGroup=h,I.Z.registerValidatorInGroup(h,this))},_setOptionsByReference(){this.callBase(),(0,D.l)(this._optionsByReference,{validationGroup:!0})},_getEditor(){var h=this.$element()[0];return(0,P.aT)(h,"dx-validation-target")},_initAdapter(){var h=this._getEditor(),p=this.option("adapter");if(!p){if(h)return(p=new b(h,this)).validationRequestsCallbacks.push(_=>{this._validationInfo.skipValidation||this.validate(_)}),void this.option("adapter",p);throw $.Z.Error("E0120")}var c=p.validationRequestsCallbacks;c&&c.push(_=>{this.validate(_)})},_toggleRTLDirection(h){var p,c,_,u=null!==(p=null===(c=this.option("adapter"))||void 0===c||null===(_=c.editor)||void 0===_?void 0:_.option("rtlEnabled"))&&void 0!==p?p:h;this.callBase(u)},_initMarkup(){this.$element().addClass("dx-validator"),this.callBase()},_render(){this.callBase(),this._toggleAccessibilityAttributes()},_toggleAccessibilityAttributes(){var h=this._getEditor();if(h){var c=(this.option("validationRules")||[]).some(_=>{var{type:u}=_;return"required"===u})||null;h.isInitialized()&&h.setAria("required",c),h.option("_onMarkupRendered",()=>{h.setAria("required",c)})}},_visibilityChanged(h){h&&this._initGroupRegistration()},_optionChanged(h){switch(h.name){case"validationGroup":return void this._initGroupRegistration();case"validationRules":return this._resetValidationRules(),this._toggleAccessibilityAttributes(),void(void 0!==this.option("isValid")&&this.validate());case"adapter":this._initAdapter();break;case"isValid":case"validationStatus":this.option(I.Z.synchronizeValidationOptions(h,this.option()));break;default:this.callBase(h)}},_getValidationRules(){return this._validationRules||(this._validationRules=(0,W.UI)(this.option("validationRules"),(h,p)=>(0,D.l)({},h,{validator:this,index:p}))),this._validationRules},_findGroup(){var h=this.$element();return this.option("validationGroup")||I.Z.findGroup(h,this._modelByElement(h))},_resetValidationRules(){delete this._validationRules},validate(h){var y,p=this.option("adapter"),c=this.option("name"),_=p.bypass&&p.bypass(),u=h&&void 0!==h.value?h.value:p.getValue(),E=p.getCurrentValidationError&&p.getCurrentValidationError(),B=this._getValidationRules(),f=this._validationInfo&&this._validationInfo.result;return f&&f.status===Z&&f.value===u?(0,D.l)({},f):(_?y={isValid:!0,status:R}:E&&E.editorSpecific?(E.validator=this,y={isValid:!1,status:"invalid",brokenRule:E,brokenRules:[E]}):y=I.Z.validate(u,B,c),y.id=(new w.Z).toString(),this._applyValidationResult(y,p),y.complete&&y.complete.then(z=>{z.id===this._validationInfo.result.id&&this._applyValidationResult(z,p)}),(0,D.l)({},this._validationInfo.result))},reset(){var h=this.option("adapter"),p={id:null,isValid:!0,brokenRule:null,brokenRules:null,pendingRules:null,status:R,complete:null};this._validationInfo.skipValidation=!0,h.reset(),this._validationInfo.skipValidation=!1,this._resetValidationRules(),this._applyValidationResult(p,h)},_updateValidationResult(h){if(this._validationInfo.result&&this._validationInfo.result.id===h.id)for(var c in h)"id"!==c&&"complete"!==c&&(this._validationInfo.result[c]=h[c]);else this._validationInfo.result=(0,D.l)({},h,{complete:this._validationInfo.deferred&&this._validationInfo.result.complete})},_applyValidationResult(h,p){var c=this._createActionByOption("onValidated",{excludeValidators:["readOnly"]});if(h.validator=this,this._updateValidationResult(h),p.applyValidationResults&&p.applyValidationResults(this._validationInfo.result),this.option({validationStatus:this._validationInfo.result.status}),this._validationInfo.result.status===Z)return this._validationInfo.deferred||(this._validationInfo.deferred=new M.BH,this._validationInfo.result.complete=this._validationInfo.deferred.promise()),void this._eventsStrategy.fireEvent("validating",[this._validationInfo.result]);this._validationInfo.result.status!==Z&&(c(h),this._validationInfo.deferred&&(this._validationInfo.deferred.resolve(h),this._validationInfo.deferred=null))},focus(){var h=this.option("adapter");h&&h.focus&&h.focus()},_useTemplates:function(){return!1}});(0,V.Z)("dxValidator",x);const q=x}}]);