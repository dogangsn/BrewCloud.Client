"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[4291],{4291:(rn,X,c)=>{c.r(X),c.d(X,{Demands:()=>q});var s=c(4006),v=c(4859),_=c(9549),u=c(7392),C=c(284),M=c(5804),Z=c(8255),ee=c(671),H=c(3848),m=c(6895);class te{constructor(n,t,o,r,a,d,g,l){this.productId=n,this.quantity=t,this.unitprice=o,this.amount=r,this.stockState=a,this.isActive=d,this.reserved=g,this.barcode=l}}var J=c(7579),p=c(2722),O=c(6451),$=c(3900),E=c(4004),A=c(8739),T=c(6308),R=c(8288),f=c(487),h=c(9079),x=c(5263),D=c(5412);class re{constructor(n,t,o,r,a,d,g,l){this.date=n,this.documentno=t,this.suppliers=o,this.deliverydate=r,this.note=a,this.state=d,this.iscomplated=g,this.demandProductList=l}}var e=c(4650),U=c(5962),P=c(5707),z=c(3225),S=c(6056),ae=c(9349),k=c(6709),y=c(4385),I=c(3238),Y=c(455),B=c(148);function se(i,n){1&i&&(e.TgZ(0,"span"),e._uU(1,"Sipari\u015f Ekle"),e.qZA())}function ce(i,n){if(1&i&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.suppliername)}}function de(i,n){1&i&&(e.TgZ(0,"div",44),e._UZ(1,"div",45),e.qZA())}function le(i,n){1&i&&(e.TgZ(0,"div",46),e._UZ(1,"div",47),e.qZA())}function me(i,n){1&i&&(e.TgZ(0,"div",48),e._UZ(1,"div",49),e.qZA())}function _e(i,n){if(1&i&&(e.TgZ(0,"div",71),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function ge(i,n){if(1&i&&(e.ynx(0),e.YNc(1,_e,2,1,"div",70),e.BQk()),2&i){const t=n.$implicit,o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.id===o.productId)}}function ue(i,n){1&i&&(e.TgZ(0,"div",72),e._uU(1," \xdcR\xdcN SE\xc7\u0130N\u0130Z.. "),e.qZA())}function pe(i,n){1&i&&(e.TgZ(0,"div",73),e._UZ(1,"div",74),e.qZA())}function fe(i,n){1&i&&(e.TgZ(0,"div",75),e._UZ(1,"div",47),e.qZA())}function he(i,n){1&i&&(e.TgZ(0,"div",76),e._UZ(1,"div",77),e.qZA())}function xe(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",78),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function ve(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",79),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Te(i,n){1&i&&e.GkF(0)}const Ce=function(i){return{$implicit:i}};function Ze(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Te,1,0,"ng-container",80),e.BQk()),2&i){const t=e.oxw().$implicit;e.oxw(4);const o=e.MAs(61);e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,Ce,t))}}function De(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",57)(2,"div",58)(3,"div",59)(4,"mat-checkbox",60),e.NdJ("ngModelChange",function(r){const d=e.CHM(t).$implicit;return e.KtG(d.selected=r)})("change",function(){const a=e.CHM(t).$implicit,d=e.oxw(4);return e.KtG(d.onCheckboxChange(a.id))}),e.qZA()()(),e.TgZ(5,"div"),e.YNc(6,ge,2,1,"ng-container",61),e.YNc(7,ue,2,0,"div",62),e.qZA(),e.TgZ(8,"div",63),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"div",30)(12,"div",64),e._uU(13),e.qZA(),e.YNc(14,pe,2,0,"div",65),e.YNc(15,fe,2,0,"div",66),e.YNc(16,he,2,0,"div",67),e.qZA(),e.TgZ(17,"div",68),e.YNc(18,xe,2,1,"ng-container",6),e.YNc(19,ve,2,1,"ng-container",6),e.qZA(),e.TgZ(20,"div")(21,"button",69),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw(4);return e.KtG(d.toggleDetails(a.id))}),e._UZ(22,"mat-icon",39),e.qZA()()(),e.TgZ(23,"div",51),e.YNc(24,Ze,2,4,"ng-container",6),e.qZA(),e.BQk()}if(2&i){const t=n.$implicit,o=e.oxw(4);e.xp6(4),e.Q6J("checked",t.selected)("ngModel",t.selected)("color","primary"),e.xp6(2),e.Q6J("ngForOf",o.productdescription),e.xp6(1),e.Q6J("ngIf","00000000-0000-0000-0000-000000000000"===t.productId),e.xp6(2),e.hij(" ",e.gM2(10,14,t.reserved,"\u20ba","symbol","1.2-2")," "),e.xp6(4),e.Oqu(t.stockState),e.xp6(1),e.Q6J("ngIf",t.stockState<20),e.xp6(1),e.Q6J("ngIf",t.stockState>=20&&t.stockState<30),e.xp6(1),e.Q6J("ngIf",t.stockState>=30),e.xp6(2),e.Q6J("ngIf",1===t.isActive),e.xp6(1),e.Q6J("ngIf",0===t.isActive),e.xp6(3),e.Q6J("svgIcon",(null==o.selectedProduct?null:o.selectedProduct.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(2),e.Q6J("ngIf",(null==o.selectedProduct?null:o.selectedProduct.id)===t.id)}}function be(i,n){if(1&i&&(e.ynx(0),e.YNc(1,De,25,19,"ng-container",56),e.BQk()),2&i){const t=n.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}function we(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",51)(2,"div",52)(3,"div"),e._uU(4,"\u0130\u015flem"),e.qZA(),e.TgZ(5,"div",53),e._uU(6,"\xdcr\xfcn Ad\u0131"),e.qZA(),e.TgZ(7,"div",53),e._uU(8," Toplam Tutar "),e.qZA(),e.TgZ(9,"div",54),e._uU(10," Adet "),e.qZA(),e.TgZ(11,"div",54),e._uU(12," Aktif "),e.qZA(),e.TgZ(13,"div",55),e._uU(14,"Detay"),e.qZA()(),e.YNc(15,be,2,2,"ng-container",6),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(5),e.Q6J("mat-sort-header","productId"),e.xp6(2),e.Q6J("mat-sort-header",t.reserved),e.xp6(2),e.Q6J("mat-sort-header",t.stockState),e.xp6(2),e.Q6J("mat-sort-header","isActive"),e.xp6(4),e.Q6J("ngIf",t.productsList)}}function Ae(i,n){if(1&i&&(e.ynx(0),e.YNc(1,we,16,5,"ng-container",50),e.BQk()),2&i){const t=n.ngIf;e.oxw();const o=e.MAs(63);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function ke(i,n){1&i&&(e.TgZ(0,"span",104),e._uU(1,"NO IMAGE"),e.qZA())}function ye(i,n){if(1&i&&(e.TgZ(0,"mat-option",43),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Ie(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",81)(1,"div",82)(2,"form",83)(3,"div",84)(4,"div",85)(5,"div",86)(6,"div",87),e.YNc(7,ke,2,0,"ng-template"),e.qZA()(),e.TgZ(8,"div",88)(9,"span",89),e._uU(10,"\xdcr\xfcn Durumu"),e.qZA(),e.TgZ(11,"mat-slide-toggle",90),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.isActiveClick)}),e._uU(12),e.qZA()()(),e.TgZ(13,"div",91)(14,"div",92)(15,"mat-form-field",93)(16,"mat-label"),e._uU(17,"\xdcr\xfcn Ad\u0131"),e.qZA(),e.TgZ(18,"mat-select",94),e.NdJ("selectionChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.onProductSelectionChange(r))}),e.TgZ(19,"mat-option"),e._uU(20,"None"),e.qZA(),e.YNc(21,ye,2,2,"mat-option",20),e.qZA()(),e.TgZ(22,"div",95)(23,"mat-form-field",96)(24,"mat-label"),e._uU(25,"Barcode"),e.qZA(),e._UZ(26,"input",97),e.qZA()(),e._UZ(27,"div",95),e.qZA(),e.TgZ(28,"div",98)(29,"mat-form-field",93)(30,"mat-label"),e._uU(31,"Al\u0131\u015f Fiyat"),e.qZA(),e.TgZ(32,"span",99),e._uU(33,"\u20ba"),e.qZA(),e._UZ(34,"input",100),e.qZA(),e.TgZ(35,"mat-form-field",93)(36,"mat-label"),e._uU(37,"Kdv Tutar"),e.qZA(),e.TgZ(38,"span",101),e._uU(39,"\u20ba"),e.qZA(),e._UZ(40,"input",100),e.qZA()(),e.TgZ(41,"div",98)(42,"mat-form-field",93)(43,"mat-label"),e._uU(44,"Adet"),e.qZA(),e.TgZ(45,"input",102),e.NdJ("input",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.onQuantitySelectionChange(r))}),e.qZA()(),e.TgZ(46,"mat-form-field",93)(47,"mat-label"),e._uU(48,"Toplam Tutar"),e.qZA(),e._UZ(49,"input",103),e.qZA()()()()()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.selectedProductForm),e.xp6(9),e.Q6J("formControlName","isActive")("color","primary")("disabled",!0),e.xp6(1),e.hij(" ",1===t.selectedProductForm.get("isActive").value?"Aktif":"Pasif"," "),e.xp6(6),e.Q6J("formControlName","productId")("placeholder","name"),e.xp6(3),e.Q6J("ngForOf",t.productdescription),e.xp6(5),e.Q6J("formControlName","barcode"),e.xp6(8),e.Q6J("formControlName","unitPrice"),e.xp6(6),e.Q6J("formControlName","amount"),e.xp6(5),e.Q6J("formControlName","stockState"),e.xp6(4),e.Q6J("formControlName","reserved")}}function Qe(i,n){1&i&&(e.TgZ(0,"div",105),e._uU(1,"Veri bulunamad\u0131."),e.qZA())}const Fe=function(){return{standalone:!0}};class w{constructor(n,t,o,r,a,d,g,l){this._dialogRef=n,this._formBuilder=t,this._demandService=o,this._translocoService=r,this._suppliersService=a,this.productDescriptionService=d,this.cdr=g,this.data=l,this.demandProductList=[],this.supplierscards=[],this.selectedCustomerId="",this.productsList=[],this.productdescription=[],this._unsubscribeAll=new J.x,this.selectedProduct=null}ngOnInit(){this.getProductstedarik(),this.demandList=this._formBuilder.group({date:[new Date,s.kI.required],documentno:["",s.kI.required],deliverydate:["",s.kI.required],note:["",s.kI.required],state:[0,s.kI.required],suppliers:[,s.kI.required],iscomplated:[!0,s.kI.required]}),this.selectedProductForm=this._formBuilder.group({id:["",s.kI.required],productId:[{value:"",disabled:!0},s.kI.required],barcode:["",s.kI.required],stockState:[0],reserved:[0],unitPrice:[0],amount:[0],isActive:[{value:0,disabled:!0}],quantity:[0]}),this.getProducts(),this.demandProductList=this.data,this.productsList=this.data}getProducts(){this.productDescriptionService.GetProductDescriptionList().pipe((0,p.R)(this._unsubscribeAll)).subscribe(n=>{n&&n.data&&(this.productdescription=n.data,this.cdr.markForCheck())})}getProductstedarik(){this._suppliersService.getSuppliersList().subscribe(n=>{this.supplierscards=n.data,console.log(this.supplierscards)})}addDemandProductList(n){this.ngOnInit(),this.demandProductList=n}filterCustomerId(n){this.selectedCustomerId=n}filterProductId(n){this.selectedCustomerId=n}closeDetails(){this.selectedProduct=null}toggleDetails(n){if(this.selectedProduct&&this.selectedProduct.id===n)this.closeDetails();else{var t=this.productsList.find(o=>o.id===n);this.selectedProduct=t,this.productsList.filter(o=>o.id===n),this.selectedProductForm.patchValue(t),this.cdr.markForCheck()}}getDemandProducts(){this._demandService.getDemandProductsList().pipe((0,p.R)(this._unsubscribeAll)).subscribe(n=>{})}fillFormData(n){null!==this.selecteddemand&&this.demandList.setValue({})}closeDialog(){this._dialogRef.close({status:null})}addOrUpdateStore(){this.addDemand()}trackByFn(n,t){return t.id||n}setAgendaPriority(n){this.demandList.get("state").setValue(n)}controlProperty(){const n=this.getFormValueByName("deliverydate").toLocaleString(),t=this.getFormValueByName("documentno"),o=this.getFormValueByName("suppliers"),r=this.getFormValueByName("state");if(!n||null===n){const a=new f.c(this.translate("sweetalert.error"),this.translate("Teslimat Tarihi Giriniz."),h.p.warning);return x.m.sweetAlert(a),!1}if(!t||null===t){const a=new f.c(this.translate("sweetalert.error"),this.translate("D\xf6k\xfcman No Giriniz."),h.p.warning);return x.m.sweetAlert(a),!1}if(!o||null===o){const a=new f.c(this.translate("sweetalert.error"),this.translate("Tedarik\xe7i Giriniz."),h.p.warning);return x.m.sweetAlert(a),!1}if(!r||null===r){const a=new f.c(this.translate("sweetalert.error"),this.translate("Durum Giriniz."),h.p.warning);return x.m.sweetAlert(a),!1}return!0}addDemand(){if(!this.controlProperty())return;this.getFormValueByName("date").toLocaleString(),this.getFormValueByName("deliverydate").toLocaleString();const o=this.demandProductList.filter(a=>!0===a.selected);if(0===o.length){const a=new f.c(this.translate("sweetalert.error"),this.translate("L\xfctfen en az 1 tane Talep Se\xe7iniz."),h.p.warning);return void x.m.sweetAlert(a)}const r=new re(this.getFormValueByName("date"),this.getFormValueByName("documentno"),this.getFormValueByName("suppliers"),this.getFormValueByName("deliverydate"),this.getFormValueByName("note"),this.getFormValueByName("state"),!1,o);this._demandService.createDemands(r).subscribe(a=>{a.isSuccessful?(this.showSweetAlert("success"),this._dialogRef.close({status:!0})):this.showSweetAlert("error")},a=>{console.log(a)})}onCheckboxChange(n){const t=this.productsList.find(o=>o.id===n);t.selected=!0!==t.selected}getFormValueByName(n){return this.demandList.get(n).value}showSweetAlert(n){if("success"===n){const t=new f.c(this.translate("sweetalert.success"),this.translate("sweetalert.transactionSuccessful"),h.p.success);x.m.sweetAlert(t)}else{const t=new f.c(this.translate("sweetalert.error"),this.translate("sweetalert.transactionFailed"),h.p.error);x.m.sweetAlert(t)}}translate(n){return this._translocoService.translate(n)}}w.\u0275fac=function(n){return new(n||w)(e.Y36(D.so),e.Y36(s.qu),e.Y36(U.W),e.Y36(P.Vn),e.Y36(z.R),e.Y36(S.d),e.Y36(e.sBO),e.Y36(D.WI))},w.\u0275cmp=e.Xpm({type:w,selectors:[["app-create-edit-demand-dialog"]],decls:80,vars:29,consts:[["mat-dialog-title","",1,"mat-dialog-title"],[1,"dialog-close-button",3,"tabIndex","click"],[1,"material-icons"],[1,"modalForm"],[1,"modal-header"],[1,"modal-title"],[4,"ngIf"],[1,"modal-body","mbody-productcategory"],[1,"qm-pr-content"],[1,"container-fluid",3,"formGroup"],[1,"row"],[1,"col-sm-4","mt-2","common-width"],[1,"w-1/3","pr-2"],["matInput","","readonly","",3,"matDatepicker","formControlName"],["matIconSuffix","",3,"for"],["firstPicker",""],[2,"width","100%"],["matInput","",3,"formControlName"],[3,"formControlName","placeholder"],[3,"ngModelOptions","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["picker",""],[1,"col-sm-8","mt-2","common-width"],[1,"flex-auto"],["matInput","","cdkTextareaAutosize","",3,"cdkAutosizeMinRows","formControlName"],[2,"width","50%"],[3,"formControlName","ngModel","ngModelChange"],["value","1"],["value","0"],["value","-1"],[1,"hidden","lg:flex","items-center"],["class","flex items-end ml-2 w-5 h-4 bg-red-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-5 h-4 bg-orange-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-5 h-4 bg-green-100 rounded overflow-hidden",4,"ngIf"],["rowDetailsTemplate",""],["noProducts",""],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","mt-4","sm:mt-6"],[1,"-ml-2"],["mat-icon-button",""],[1,"icon-size-5",3,"svgIcon"],[1,"flex","items-center","mt-4","sm:mt-0"],["mat-stroked-button","",1,"ml-auto","sm:ml-0",3,"click"],["mat-flat-button","",1,"order-first","sm:order-last",3,"color","click"],[3,"value"],[1,"flex","items-end","ml-2","w-5","h-4","bg-red-200","rounded","overflow-hidden"],[1,"flex","w-full","h-full","bg-red-600"],[1,"flex","items-end","ml-2","w-5","h-4","bg-orange-200","rounded","overflow-hidden"],[1,"flex","w-full","h-2/4","bg-orange-400"],[1,"flex","items-end","ml-2","w-5","h-4","bg-green-100","rounded","overflow-hidden"],[1,"flex","w-full","h-1/3","bg-green-400"],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block","w-12"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inventory-grid","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,"flex","flex-col","gt-sm:flex-row"],[1,"flex","flex-col"],["type","checkbox",1,"mb-2",3,"checked","ngModel","color","ngModelChange","change"],[4,"ngFor","ngForOf"],["class","truncate text-red-500",4,"ngIf"],[1,"hidden","sm:block"],[1,"min-w-4"],["class","flex items-end ml-2 w-1 h-4 bg-red-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-orange-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-green-100 rounded overflow-hidden",4,"ngIf"],[1,"hidden","lg:block"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],["class","truncate",4,"ngIf"],[1,"truncate"],[1,"truncate","text-red-500"],[1,"flex","items-end","ml-2","w-1","h-4","bg-red-200","rounded","overflow-hidden"],[1,"flex","w-full","h-1/3","bg-red-600"],[1,"flex","items-end","ml-2","w-1","h-4","bg-orange-200","rounded","overflow-hidden"],[1,"flex","items-end","ml-2","w-1","h-4","bg-green-100","rounded","overflow-hidden"],[1,"flex","w-full","h-full","bg-green-400"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"shadow-lg","overflow-hidden"],[1,"flex","border-b"],[1,"flex","flex-col","w-full",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","p-8"],[1,"flex","flex-col","items-center","sm:items-start","mb-8","sm:mb-0"],[1,"flex","flex-col","items-center"],[1,"w-32","h-44","border","rounded","overflow-hidden"],[1,"flex","flex-col","mt-8"],[1,"font-semibold","mb-2"],[3,"formControlName","color","disabled","click"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","flex-col","w-full","lg:w-2/4","sm:pl-8"],[1,"w-full"],["name","productdescription",3,"formControlName","placeholder","selectionChange"],[1,"flex"],[1,"w-2/3","pl-2"],["readonly","true","matInput","",3,"formControlName"],[1,"flex","flex-col","w-full","lg:w-1/4","sm:pl-8"],["matPrefix",""],["matInput","","readonly","true",3,"formControlName"],["matSuffix",""],["type","number","matInput","","readonly","true",3,"formControlName","input"],["type","number","matInput","","readonly","true",3,"formControlName"],[1,"flex","items-center","min-h-20","text-lg","font-semibold"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(n,t){if(1&n&&(e.TgZ(0,"h1",0)(1,"button",1),e.NdJ("click",function(){return t.closeDialog()}),e.TgZ(2,"span",2),e._uU(3," highlight_off "),e.qZA()()(),e.TgZ(4,"div",3)(5,"mat-dialog-content")(6,"div",4)(7,"h5",5),e.YNc(8,se,2,0,"span",6),e.qZA()(),e.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"mat-form-field",12)(15,"mat-label"),e._uU(16,"Tarih"),e.qZA(),e._UZ(17,"input",13)(18,"mat-datepicker-toggle",14)(19,"mat-datepicker",null,15),e.qZA(),e.TgZ(21,"mat-form-field",16)(22,"mat-label"),e._uU(23,"D\xf6k\xfcman No"),e.qZA(),e._UZ(24,"input",17),e.qZA(),e.TgZ(25,"mat-form-field",16)(26,"mat-label"),e._uU(27,"Tedarik\xe7i"),e.qZA(),e.TgZ(28,"mat-select",18)(29,"mat-select-filter",19),e.NdJ("ngModelChange",function(r){return t.filterCustomerId(r)}),e.qZA(),e.YNc(30,ce,2,2,"mat-option",20),e.qZA()(),e.TgZ(31,"mat-form-field",16)(32,"mat-label"),e._uU(33,"Teslimat Tarihi"),e.qZA(),e._UZ(34,"input",13)(35,"mat-datepicker-toggle",14)(36,"mat-datepicker",null,21),e.qZA()(),e.TgZ(38,"div",22)(39,"mat-form-field",23)(40,"mat-label"),e._uU(41,"Not"),e.qZA(),e._UZ(42,"textarea",24),e.qZA(),e.TgZ(43,"mat-form-field",25)(44,"mat-label"),e._uU(45,"Durumu"),e.qZA(),e.TgZ(46,"mat-select",26),e.NdJ("ngModelChange",function(r){return t.selectedValue=r}),e.TgZ(47,"mat-option",27),e._uU(48,"Acil"),e.qZA(),e.TgZ(49,"mat-option",28),e._uU(50,"Normal"),e.qZA(),e.TgZ(51,"mat-option",29),e._uU(52,"Planl\u0131"),e.qZA()(),e.TgZ(53,"div",30),e.YNc(54,de,2,0,"div",31),e.YNc(55,le,2,0,"div",32),e.YNc(56,me,2,0,"div",33),e.qZA()()(),e.TgZ(57,"div"),e.ynx(58),e.YNc(59,Ae,2,2,"ng-container",6),e.BQk(),e.YNc(60,Ie,50,13,"ng-template",null,34,e.W1O),e.YNc(62,Qe,2,0,"ng-template",null,35,e.W1O),e.qZA()()()(),e.TgZ(64,"div",36)(65,"div",37)(66,"button",38),e._UZ(67,"mat-icon",39),e.qZA(),e._uU(68," Insert link "),e.TgZ(69,"button",38),e._UZ(70,"mat-icon",39),e.qZA(),e.TgZ(71,"button",38),e._UZ(72,"mat-icon",39),e.qZA(),e.TgZ(73,"button",38),e._UZ(74,"mat-icon",39),e.qZA()(),e.TgZ(75,"div",40)(76,"button",41),e.NdJ("click",function(){return t.closeDialog()}),e._uU(77," Vazge\xe7 "),e.qZA(),e.TgZ(78,"button",42),e.NdJ("click",function(){return t.addOrUpdateStore()}),e._uU(79," Kaydet "),e.qZA()()()()()()),2&n){const o=e.MAs(20),r=e.MAs(37);e.xp6(1),e.Q6J("tabIndex",-1),e.xp6(7),e.Q6J("ngIf",!t.selecteddemand),e.xp6(3),e.Q6J("formGroup",t.demandList),e.xp6(6),e.Q6J("matDatepicker",o)("formControlName","date"),e.xp6(1),e.Q6J("for",o),e.xp6(6),e.Q6J("formControlName","documentno"),e.xp6(4),e.Q6J("formControlName","suppliers")("placeholder","Tedarik\xe7i"),e.xp6(1),e.Q6J("ngModelOptions",e.DdM(28,Fe))("ngModel",t.selectedCustomerId),e.xp6(1),e.Q6J("ngForOf",t.supplierscards),e.xp6(4),e.Q6J("matDatepicker",r)("formControlName","deliverydate"),e.xp6(1),e.Q6J("for",r),e.xp6(7),e.Q6J("cdkAutosizeMinRows",5)("formControlName","note"),e.xp6(4),e.Q6J("formControlName","state")("ngModel",t.selectedValue),e.xp6(8),e.Q6J("ngIf",t.selectedValue>0),e.xp6(1),e.Q6J("ngIf",t.selectedValue>-1&&t.selectedValue<1),e.xp6(1),e.Q6J("ngIf",t.selectedValue<0),e.xp6(3),e.Q6J("ngIf",t.productsList),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:paper-clip"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:link"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:emoji-happy"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:photograph"),e.xp6(4),e.Q6J("color","primary")}},dependencies:[s._Y,s.Fj,s.wV,s.JJ,s.JL,s.On,s.sg,s.u,v.lW,v.RK,_.KE,_.hX,_.qo,_.R9,u.Hw,C.Nt,ae.IC,m.sg,m.O5,m.tP,k.oG,y.gD,I.ey,Y.Rr,B.Mq,B.hl,B.nW,T.YE,T.nU,D.uh,D.xY,m.H9],styles:[".inventory-grid[_ngcontent-%COMP%]{grid-template-columns:48px auto 40px}@media (min-width: 600px){.inventory-grid[_ngcontent-%COMP%]{grid-template-columns:48px auto 112px 72px}}@media (min-width: 960px){.inventory-grid[_ngcontent-%COMP%]{grid-template-columns:48px 112px auto 112px 72px}}@media (min-width: 1280px){.inventory-grid[_ngcontent-%COMP%]{grid-template-columns:48px 112px auto 112px 96px 96px 72px 72px}}"]});var ne=c(4114),Ne=c(5226),G=c.n(Ne),V=c(7401);function qe(i,n){if(1&i&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.suppliername," ")}}function Je(i,n){if(1&i&&(e.ynx(0),e.YNc(1,qe,2,1,"div",23),e.BQk()),2&i){const t=n.$implicit,o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.id===o.suppliers)}}function Ue(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,a=e.oxw(4);return e.KtG(a.toggleDetails(r.id))}),e._UZ(2,"mat-icon",26),e.qZA()()}if(2&i){const t=e.oxw().$implicit,o=e.oxw(4);e.xp6(2),e.Q6J("svgIcon",(null==o.selectedDemand?null:o.selectedDemand.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down")}}function Pe(i,n){1&i&&e.GkF(0)}const Se=function(i){return{$implicit:i}};function Ye(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Pe,1,0,"ng-container",27),e.BQk()),2&i){const t=e.oxw().$implicit;e.oxw(4);const o=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,Se,t))}}function Be(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",14)(2,"div",15)(3,"div",16),e._uU(4),e.qZA()(),e.TgZ(5,"div")(6,"div",12),e._uU(7),e.qZA()(),e.TgZ(8,"div",12),e._uU(9),e.qZA(),e.TgZ(10,"div",15)(11,"div",16),e._uU(12),e.qZA()(),e.YNc(13,Je,2,1,"ng-container",17),e.YNc(14,Ue,3,1,"div",2),e.TgZ(15,"div",18)(16,"button",19),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw(4);return e.KtG(d.addDemandComplate(a.id))}),e._UZ(17,"mat-icon",20),e.qZA(),e.TgZ(18,"button",21),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw(4);return e.KtG(d.deleteDemandComplate(a.id))}),e.TgZ(19,"mat-icon",22),e._uU(20,"delete"),e.qZA()()()(),e.TgZ(21,"div",6),e.YNc(22,Ye,2,4,"ng-container",2),e.qZA(),e.BQk()}if(2&i){const t=n.$implicit,o=e.oxw(4);e.xp6(4),e.Oqu(t.date.split("T")[0].split("-")[2]+"-"+t.date.split("T")[0].split("-")[1]+"-"+t.date.split("T")[0].split("-")[0]),e.xp6(3),e.hij(" ",t.note," "),e.xp6(2),e.hij(" ",t.documentno.length>10?t.documentno.slice(0,10)+"...":t.documentno," "),e.xp6(3),e.Oqu(t.deliverydate.split("T")[0].split("-")[2]+"-"+t.deliverydate.split("T")[0].split("-")[1]+"-"+t.deliverydate.split("T")[0].split("-")[0]),e.xp6(1),e.Q6J("ngForOf",o.supplierscards),e.xp6(1),e.Q6J("ngIf",2===o.stateNumber),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(5),e.Q6J("ngIf",(null==o.selectedDemand?null:o.selectedDemand.id)===t.id)}}function Le(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Be,23,8,"ng-container",13),e.BQk()),2&i){const t=n.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}function Me(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",6)(2,"div",7)(3,"div",8),e._uU(4,"Tarih"),e.qZA(),e.TgZ(5,"div",9),e._uU(6,"Sipari\u015f Notu"),e.qZA(),e.TgZ(7,"div",9),e._uU(8," D\xf6k\xfcman No "),e.qZA(),e.TgZ(9,"div",9),e._uU(10," Teslim Tarihi "),e.qZA(),e.TgZ(11,"div",10),e._uU(12," Tedarik\xe7i "),e.qZA(),e.TgZ(13,"div",11),e._uU(14,"Detay"),e.qZA(),e.TgZ(15,"div",11),e._uU(16,"\u0130\u015flem"),e.qZA(),e._UZ(17,"div",12),e.qZA(),e.YNc(18,Le,2,2,"ng-container",2),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","date"),e.xp6(2),e.Q6J("mat-sort-header","productId"),e.xp6(2),e.Q6J("mat-sort-header",t.documentno),e.xp6(2),e.Q6J("mat-sort-header",t.deliverydate),e.xp6(2),e.Q6J("mat-sort-header","suppliers"),e.xp6(7),e.Q6J("ngIf",t.demandList)}}function Oe(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Me,19,6,"ng-container",5),e.BQk()),2&i){const t=n.ngIf;e.oxw();const o=e.MAs(7);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function Ee(i,n){if(1&i&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Re(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Ee,2,1,"div",23),e.BQk()),2&i){const t=n.$implicit,o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.id===o.productId)}}function Ge(i,n){1&i&&(e.TgZ(0,"div",43),e._UZ(1,"div",44),e.qZA())}function Ve(i,n){1&i&&(e.TgZ(0,"div",45),e._UZ(1,"div",46),e.qZA())}function He(i,n){1&i&&(e.TgZ(0,"div",47),e._UZ(1,"div",48),e.qZA())}function $e(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",49),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function ze(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",50),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Ke(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",34)(2,"div",35)(3,"div",36),e._UZ(4,"img",37),e.TgZ(5,"div",38),e._uU(6," NO THUMB "),e.qZA()()(),e.TgZ(7,"div"),e.YNc(8,Re,2,1,"ng-container",17),e.qZA(),e.TgZ(9,"div",12),e._uU(10),e.ALo(11,"currency"),e.qZA(),e.TgZ(12,"div",15)(13,"div",16),e._uU(14),e.qZA(),e.YNc(15,Ge,2,0,"div",39),e.YNc(16,Ve,2,0,"div",40),e.YNc(17,He,2,0,"div",41),e.qZA(),e.TgZ(18,"div",42),e.YNc(19,$e,2,1,"ng-container",2),e.YNc(20,ze,2,1,"ng-container",2),e.qZA()(),e.BQk()),2&i){const t=n.$implicit,o=e.oxw(5);e.xp6(8),e.Q6J("ngForOf",o.productdescription),e.xp6(2),e.hij(" ",e.gM2(11,8,t.reserved,"\u20ba","symbol","1.2-2")," "),e.xp6(4),e.Oqu(t.stockState),e.xp6(1),e.Q6J("ngIf",t.stockState<20),e.xp6(1),e.Q6J("ngIf",t.stockState>=20&&t.stockState<30),e.xp6(1),e.Q6J("ngIf",t.stockState>=30),e.xp6(2),e.Q6J("ngIf",1===t.isActive),e.xp6(1),e.Q6J("ngIf",0===t.isActive)}}function je(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Ke,21,13,"ng-container",13),e.BQk()),2&i){const t=n.ngIf,o=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}function We(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",6)(2,"div",33),e._UZ(3,"div"),e.TgZ(4,"div",9),e._uU(5,"\xdcr\xfcn Ad\u0131"),e.qZA(),e.TgZ(6,"div",9),e._uU(7," Toplam Tutar "),e.qZA(),e.TgZ(8,"div",10),e._uU(9," Adet "),e.qZA(),e.TgZ(10,"div",10),e._uU(11," Aktif "),e.qZA(),e._UZ(12,"div"),e.qZA(),e.YNc(13,je,2,2,"ng-container",2),e.qZA(),e.BQk()),2&i){const t=e.oxw(3);e.xp6(4),e.Q6J("mat-sort-header","productId"),e.xp6(2),e.Q6J("mat-sort-header",t.reserved),e.xp6(2),e.Q6J("mat-sort-header",t.stockState),e.xp6(2),e.Q6J("mat-sort-header","isActive"),e.xp6(3),e.Q6J("ngIf",t.demandTransList)}}function Xe(i,n){if(1&i&&(e.ynx(0),e.YNc(1,We,14,5,"ng-container",5),e.BQk()),2&i){const t=n.ngIf;e.oxw();const o=e.MAs(6);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function et(i,n){1&i&&(e.TgZ(0,"div",51),e._uU(1,"Veri bulunamad\u0131."),e.qZA())}function tt(i,n){if(1&i&&(e.TgZ(0,"div",28)(1,"div",29)(2,"form",30)(3,"div",31),e.YNc(4,Xe,2,2,"ng-container",2),e.YNc(5,et,2,0,"ng-template",null,32,e.W1O),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.demandTransList)}}function nt(i,n){1&i&&(e.TgZ(0,"div",51),e._uU(1,"Veri bulunamad\u0131."),e.qZA())}class Q{constructor(n,t,o,r,a,d,g,l,b){this.demandProductsService=n,this._changeDetectorRef=t,this._fuseConfirmationService=o,this._formBuilder=r,this.cdr=a,this._translocoService=d,this.productDescriptionService=g,this._dialog=l,this._suppliersService=b,this.displayedColumns=["name","categoryCode","actions"],this.demandList=[],this.SelecteddemandListAll=[],this.demandTransList=[],this.demandTransListlast=[],this.selecteDemandList=[],this.productdescription=[],this.quantityInput="",this.isLoading=!1,this.flashMessage=null,this.selectedProduct=null,this.selectedDemand=null,this.tagsEditMode=!1,this._unsubscribeAll=new J.x,this.supplierscards=[],this.productsList=[],this.stateNumber=2}ngOnInit(){this.selectedDemandForm=this._formBuilder.group({id:["",s.kI.required],date:["",s.kI.required],documentno:["",s.kI.required],suppliers:["",s.kI.required],deliverydate:["",s.kI.required],note:["",s.kI.required],state:[0]}),this.getProducts(),this.getDemands(),this.getDemandsTedarikci(),this.getDemandProducts()}getProducts(){this.productDescriptionService.GetProductDescriptionList().pipe((0,p.R)(this._unsubscribeAll)).subscribe(n=>{n&&n.data&&(this.productdescription=n.data,this.cdr.markForCheck())})}getDemandProducts(){const n=new ne.N(this.selectedDemand.id,"00000000-0000-0000-0000-000000000000",0,0,0,0,0,0,"0","00000000-0000-0000-0000-000000000000");this.demandProductsService.getDemandTransList(n).pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{t&&t.data&&(this.demandTransListlast=t.data,this.demandTransList=this.demandTransListlast.filter(o=>o.ownerId===this.selectedDemand.id),this.cdr.markForCheck(),console.log(this.demandTransList))})}getDemandsTedarikci(){this._suppliersService.getSuppliersList().subscribe(n=>{this.supplierscards=n.data,console.log(this.supplierscards)})}onQuantitySelectionChange(n){const t=parseFloat(this.getFormValueByName("stockState")),o=this.getFormValueByName("productId");if(null!==t){const l=this.productdescription.find(b=>b.id===o);var r=!0!==l.buyingIncludeKDV?t*(l.buyingPrice*(1+l.ratio/100)):t*l.buyingPrice,d=r*(1+l.ratio/100)-r;l&&this.selectedDemandForm.patchValue({reserved:r.toFixed(2),amount:d.toFixed(2)})}}getDemands(){this.demandProductsService.getDemandLists().pipe((0,p.R)(this._unsubscribeAll)).subscribe(n=>{n&&n.data&&(this.demandList=n.data,this.cdr.markForCheck(),console.log(this.demandList))})}addDemandComplate(n){G().fire({title:"Onayl\u0131yor musunuz?",icon:"question",showCancelButton:!0,confirmButtonText:"Evet",cancelButtonText:"Hay\u0131r"}).then(t=>{if(t.isConfirmed){this.stateNumber=1;var o=this.demandList.find(a=>a.id===n);this.selectedDemand=o,this.selectedDemandForm.patchValue(o);const r=this.selectedDemandForm.getRawValue();this.demandProductsService.updateDemands(r).subscribe(a=>{a.isSuccessful?(this.showSweetAlert("success"),this.getDemands(),this._changeDetectorRef.markForCheck(),this.stateNumber=2):this.showSweetAlert("error")},a=>{console.log(a)})}else if(t.dismiss===G().DismissReason.cancel)return void(this.stateNumber=2)})}deleteDemandComplate(n){G().fire({title:"\u0130lgili kay\u0131t silinecektir. Onayl\u0131yor musunuz?",icon:"warning",showCancelButton:!0,confirmButtonText:"Evet",cancelButtonText:"Hay\u0131r"}).then(t=>{if(t.isConfirmed){this.stateNumber=1;var o=this.demandList.find(a=>a.id===n);this.selectedDemand=o,this.selectedDemandForm.patchValue(o),this.cdr.markForCheck();const r=this.selectedDemandForm.getRawValue();this.demandProductsService.deleteDemands(r).subscribe(a=>{a.isSuccessful?(this.showSweetAlert("success"),this.getDemands(),this._changeDetectorRef.markForCheck()):this.showSweetAlert("error")},a=>{console.log(a)})}else if(t.dismiss===G().DismissReason.cancel)return})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,p.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),(0,O.T)(this._sort.sortChange,this._paginator.page).pipe((0,$.w)(()=>(this.closeDetails(),this.isLoading=!0,this.demandList)),(0,E.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}toggleDetails(n){if(this.selectedDemand&&this.selectedDemand.id===n)this.closeDetails();else{this.stateNumber=2;var t=this.demandList.find(o=>o.id===n);this.selectedDemand=t,this.getDemandProducts(),this.selectedDemandForm.patchValue(t),this.cdr.markForCheck()}}closeDetails(){this.selectedDemand=null}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(n){const t=n.target.value.toLowerCase();this.filteredTags=this.tags.filter(o=>o.title.toLowerCase().includes(t))}filterTagsInputKeyDown(n){if("Enter"===n.key)return 0===this.filteredTags.length?(this.createTag(n.target.value),void(n.target.value="")):void 0}createTag(n){}updateTagTitle(n,t){n.title=t.target.value,this._changeDetectorRef.markForCheck()}deleteTag(n){this._changeDetectorRef.markForCheck()}addTagToProduct(n){this._changeDetectorRef.markForCheck()}removeTagFromProduct(n){this._changeDetectorRef.markForCheck()}toggleProductTag(n,t){t.checked?this.addTagToProduct(n):this.removeTagFromProduct(n)}shouldShowCreateTagButton(n){return!(""===n||this.tags.findIndex(t=>t.title.toLowerCase()===n.toLowerCase())>-1)}getFormValueByName(n){return this.selectedDemandForm.get(n).value}showSweetAlert(n){if("success"===n){const t=new f.c(this.translate("sweetalert.success"),this.translate("sweetalert.transactionSuccessful"),h.p.success);x.m.sweetAlert(t)}else{const t=new f.c(this.translate("sweetalert.error"),this.translate("sweetalert.transactionFailed"),h.p.error);x.m.sweetAlert(t)}}translate(n){return this._translocoService.translate(n)}showFlashMessage(n){this.flashMessage=n,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(n,t){return t.id||n}}function it(i,n){if(1&i&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function ot(i,n){if(1&i&&(e.ynx(0),e.YNc(1,it,2,1,"div",25),e.BQk()),2&i){const t=n.$implicit,o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.id===o.productId)}}function rt(i,n){1&i&&(e.TgZ(0,"div",27),e._uU(1," \xdcR\xdcN SE\xc7\u0130N\u0130Z.. "),e.qZA())}function at(i,n){1&i&&(e.TgZ(0,"div",28),e._UZ(1,"div",29),e.qZA())}function st(i,n){1&i&&(e.TgZ(0,"div",30),e._UZ(1,"div",31),e.qZA())}function ct(i,n){1&i&&(e.TgZ(0,"div",32),e._UZ(1,"div",33),e.qZA())}function dt(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",34),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function lt(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",35),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function mt(i,n){1&i&&e.GkF(0)}Q.\u0275fac=function(n){return new(n||Q)(e.Y36(U.W),e.Y36(e.sBO),e.Y36(V.R),e.Y36(s.QS),e.Y36(e.sBO),e.Y36(P.Vn),e.Y36(S.d),e.Y36(D.uw),e.Y36(z.R))},Q.\u0275cmp=e.Xpm({type:Q,selectors:[["app-demand2"]],viewQuery:function(n,t){if(1&n&&(e.Gf(w,5),e.Gf(A.NW,5),e.Gf(T.YE,5)),2&n){let o;e.iGM(o=e.CRH())&&(t.CreateEditDemandDialogComponent=o.first),e.iGM(o=e.CRH())&&(t._paginator=o.first),e.iGM(o=e.CRH())&&(t._sort=o.first)}},decls:8,vars:1,consts:[["href","https://fonts.googleapis.com/icon?family=Material+Icons","rel","stylesheet"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf"],["rowDetailsTemplate",""],["noDemands",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","shadow","text-md","font-semibold","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","sm:block","md:px-8",3,"mat-sort-header"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block","w-12"],[1,"hidden","sm:block"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inventory-grid","grid","items-center","gap-2","py-1","px-4","md:px-6","border-b"],[1,"hidden","lg:flex","items-center"],[1,"min-w-4"],[4,"ngFor","ngForOf"],[2,"display","flex","align-items","center"],["mat-flat-button","",1,"min-w-5","min-h-1","h-7","max-w-5","bg-green-400","text-white",3,"click"],[1,"text-green-400","text-xs","icon-size-5",3,"svgIcon"],["mat-icon-button","","color","warn",1,"left-4","min-w-2","max-w-5","leading-6",3,"click"],[1,"mat-18"],["class","truncate",4,"ngIf"],[1,"truncate"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5","text-gray-500",3,"svgIcon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"shadow-lg","overflow-hidden"],[1,"flex","border-b"],[1,"flex","flex-col","w-full"],[1,"flex","flex-col","flex-2","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],["noTrans",""],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"inventory-grid","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,"flex","items-center"],[1,"relative","flex","flex-0","items-center","justify-center","w-12","h-12","mr-6","rounded","overflow-hidden","border"],[1,"w-8"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],["class","flex items-end ml-2 w-1 h-4 bg-red-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-orange-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-green-100 rounded overflow-hidden",4,"ngIf"],[1,"hidden","lg:block"],[1,"flex","items-end","ml-2","w-1","h-4","bg-red-200","rounded","overflow-hidden"],[1,"flex","w-full","h-1/3","bg-red-600"],[1,"flex","items-end","ml-2","w-1","h-4","bg-orange-200","rounded","overflow-hidden"],[1,"flex","w-full","h-2/4","bg-orange-400"],[1,"flex","items-end","ml-2","w-1","h-4","bg-green-100","rounded","overflow-hidden"],[1,"flex","w-full","h-full","bg-green-400"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(n,t){1&n&&(e.TgZ(0,"header"),e._UZ(1,"link",0),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,Oe,2,2,"ng-container",2),e.YNc(4,tt,7,1,"ng-template",null,3,e.W1O),e.YNc(6,nt,2,0,"ng-template",null,4,e.W1O),e.qZA()),2&n&&(e.xp6(3),e.Q6J("ngIf",t.demandList))},dependencies:[s._Y,s.JL,s.F,v.lW,v.RK,u.Hw,m.sg,m.O5,m.tP,T.YE,T.nU,m.H9],styles:[".inventory-grid{grid-template-columns:96px 48px auto 40px}@media (min-width: 600px){.inventory-grid{grid-template-columns:96px 48px auto 112px 72px}}@media (min-width: 960px){.inventory-grid{grid-template-columns:96px 48px 112px auto 112px 72px}}@media (min-width: 1280px){.inventory-grid{grid-template-columns:96px auto 112px 112px 96px 96px 72px 112px}}\n"],encapsulation:2,data:{animation:R.L},changeDetection:0});const _t=function(i){return{$implicit:i}};function gt(i,n){if(1&i&&(e.ynx(0),e.YNc(1,mt,1,0,"ng-container",36),e.BQk()),2&i){const t=e.oxw().$implicit;e.oxw(4);const o=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,_t,t))}}function ut(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",10)(2,"div",11)(3,"div",12)(4,"mat-checkbox",13),e.NdJ("ngModelChange",function(r){const d=e.CHM(t).$implicit;return e.KtG(d.selected=r)}),e.qZA()()(),e.TgZ(5,"div"),e.YNc(6,ot,2,1,"ng-container",14),e.YNc(7,rt,2,0,"div",15),e.qZA(),e.TgZ(8,"div",16),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"div",17)(12,"div",18),e._uU(13),e.qZA(),e.YNc(14,at,2,0,"div",19),e.YNc(15,st,2,0,"div",20),e.YNc(16,ct,2,0,"div",21),e.qZA(),e.TgZ(17,"div",22),e.YNc(18,dt,2,1,"ng-container",0),e.YNc(19,lt,2,1,"ng-container",0),e.qZA(),e.TgZ(20,"div")(21,"button",23),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw(4);return e.KtG(d.toggleDetails(a.id))}),e._UZ(22,"mat-icon",24),e.qZA()()(),e.TgZ(23,"div",4),e.YNc(24,gt,2,4,"ng-container",0),e.qZA(),e.BQk()}if(2&i){const t=n.$implicit,o=e.oxw(4);e.xp6(4),e.Q6J("checked",!1)("ngModel",t.selected)("color","primary"),e.xp6(2),e.Q6J("ngForOf",o.productdescription),e.xp6(1),e.Q6J("ngIf","00000000-0000-0000-0000-000000000000"===t.productId),e.xp6(2),e.hij(" ",e.gM2(10,14,t.reserved,"\u20ba","symbol","1.2-2")," "),e.xp6(4),e.Oqu(t.stockState),e.xp6(1),e.Q6J("ngIf",t.stockState<20),e.xp6(1),e.Q6J("ngIf",t.stockState>=20&&t.stockState<30),e.xp6(1),e.Q6J("ngIf",t.stockState>=30),e.xp6(2),e.Q6J("ngIf",1===t.isActive),e.xp6(1),e.Q6J("ngIf",0===t.isActive),e.xp6(3),e.Q6J("svgIcon",(null==o.selectedProduct?null:o.selectedProduct.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(2),e.Q6J("ngIf",(null==o.selectedProduct?null:o.selectedProduct.id)===t.id)}}function pt(i,n){if(1&i&&(e.ynx(0),e.YNc(1,ut,25,19,"ng-container",9),e.BQk()),2&i){const t=n.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}function ft(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",4)(2,"div",5)(3,"div"),e._uU(4,"\u0130\u015flem"),e.qZA(),e.TgZ(5,"div",6),e._uU(6,"\xdcr\xfcn Ad\u0131"),e.qZA(),e.TgZ(7,"div",6),e._uU(8," Toplam Tutar "),e.qZA(),e.TgZ(9,"div",7),e._uU(10," Adet "),e.qZA(),e.TgZ(11,"div",7),e._uU(12," Aktif "),e.qZA(),e.TgZ(13,"div",8),e._uU(14,"Detay"),e.qZA()(),e.YNc(15,pt,2,2,"ng-container",0),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(5),e.Q6J("mat-sort-header","productId"),e.xp6(2),e.Q6J("mat-sort-header",t.reserved),e.xp6(2),e.Q6J("mat-sort-header",t.stockState),e.xp6(2),e.Q6J("mat-sort-header","isActive"),e.xp6(4),e.Q6J("ngIf",t.productsList)}}function ht(i,n){if(1&i&&(e.ynx(0),e.YNc(1,ft,16,5,"ng-container",3),e.BQk()),2&i){const t=n.ngIf;e.oxw();const o=e.MAs(6);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function xt(i,n){1&i&&(e.TgZ(0,"span",66),e._uU(1,"NO IMAGE"),e.qZA())}function vt(i,n){if(1&i&&(e.TgZ(0,"mat-option",67),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Tt(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",69),e.TgZ(2,"span",70),e._uU(3,"Product updated"),e.qZA(),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:check"))}function Ct(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",71),e.TgZ(2,"span",70),e._uU(3,"An error occurred, try again!"),e.qZA(),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"))}function Zt(i,n){if(1&i&&(e.TgZ(0,"div",68),e.YNc(1,Tt,4,1,"ng-container",0),e.YNc(2,Ct,4,1,"ng-container",0),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","success"===t.flashMessage),e.xp6(1),e.Q6J("ngIf","error"===t.flashMessage)}}function Dt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",37)(1,"div",38)(2,"form",39)(3,"div",40)(4,"div",41)(5,"div",42)(6,"div",43),e.YNc(7,xt,2,0,"ng-template"),e.qZA()(),e.TgZ(8,"div",44)(9,"span",45),e._uU(10,"\xdcr\xfcn Durumu"),e.qZA(),e.TgZ(11,"mat-slide-toggle",46),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.isActiveClick)}),e._uU(12),e.qZA()()(),e.TgZ(13,"div",47)(14,"div",48)(15,"mat-form-field",49)(16,"mat-label"),e._uU(17,"\xdcr\xfcn Ad\u0131"),e.qZA(),e.TgZ(18,"mat-select",50),e.NdJ("selectionChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.onProductSelectionChange(r))}),e.TgZ(19,"mat-option"),e._uU(20,"None"),e.qZA(),e.YNc(21,vt,2,2,"mat-option",51),e.qZA()(),e.TgZ(22,"div",52)(23,"mat-form-field",53)(24,"mat-label"),e._uU(25,"Barcode"),e.qZA(),e._UZ(26,"input",54),e.qZA()(),e._UZ(27,"div",52),e.qZA(),e.TgZ(28,"div",55)(29,"mat-form-field",49)(30,"mat-label"),e._uU(31,"Al\u0131\u015f Fiyat"),e.qZA(),e.TgZ(32,"span",56),e._uU(33,"\u20ba"),e.qZA(),e._UZ(34,"input",57),e.qZA(),e.TgZ(35,"mat-form-field",49)(36,"mat-label"),e._uU(37,"Kdv Tutar"),e.qZA(),e.TgZ(38,"span",58),e._uU(39,"\u20ba"),e.qZA(),e._UZ(40,"input",57),e.qZA()(),e.TgZ(41,"div",55)(42,"mat-form-field",49)(43,"mat-label"),e._uU(44,"Adet"),e.qZA(),e.TgZ(45,"input",59),e.NdJ("input",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.onQuantitySelectionChange(r))}),e.qZA()(),e.TgZ(46,"mat-form-field",49)(47,"mat-label"),e._uU(48,"Toplam Tutar"),e.qZA(),e._UZ(49,"input",60),e.qZA()()()(),e.TgZ(50,"div",61)(51,"button",62),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.deleteSelectedProduct())}),e._uU(52," Sil "),e.qZA(),e.TgZ(53,"div",63),e.YNc(54,Zt,3,2,"div",64),e.TgZ(55,"button",65),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updateSelectedProduct())}),e._uU(56," D\xfczenle "),e.qZA()()()()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.selectedProductForm),e.xp6(9),e.Q6J("formControlName","isActive")("color","primary")("disabled",!0),e.xp6(1),e.hij(" ",1===t.selectedProductForm.get("isActive").value?"Aktif":"Pasif"," "),e.xp6(6),e.Q6J("formControlName","productId")("placeholder","name"),e.xp6(3),e.Q6J("ngForOf",t.productdescription),e.xp6(5),e.Q6J("formControlName","barcode"),e.xp6(8),e.Q6J("formControlName","unitPrice"),e.xp6(6),e.Q6J("formControlName","amount"),e.xp6(5),e.Q6J("formControlName","stockState"),e.xp6(4),e.Q6J("formControlName","reserved"),e.xp6(2),e.Q6J("color","warn"),e.xp6(3),e.Q6J("ngIf",t.flashMessage),e.xp6(1),e.Q6J("color","primary")}}function bt(i,n){1&i&&(e.TgZ(0,"div",72),e._uU(1,"Veri bulunamad\u0131."),e.qZA())}class F{constructor(n,t,o,r,a,d,g,l){this.demandProductsService=n,this._changeDetectorRef=t,this._fuseConfirmationService=o,this._formBuilder=r,this.cdr=a,this._translocoService=d,this.productDescriptionService=g,this._dialog=l,this.displayedColumns=["name","categoryCode","actions"],this.productsList=[],this.selecteDemandList=[],this.productdescription=[],this.quantityInput="",this.isLoading=!1,this.flashMessage=null,this.selectedProduct=null,this.tagsEditMode=!1,this._unsubscribeAll=new J.x}ngOnInit(){this.getProducts(),this.getDemandProducts(),this.selectedProductForm=this._formBuilder.group({id:["",s.kI.required],productId:["",s.kI.required],barcode:["",s.kI.required],stockState:[0],reserved:[0],unitPrice:[0],amount:[0],isActive:[{value:0,disabled:!0}],quantity:[0]})}isActiveClick(){const n=this.getFormValueByName("productId"),t=this.productdescription.find(o=>o.id===n);this.selectedProduct.isActive=1==t.active?1:0,this._changeDetectorRef.markForCheck()}onProductSelectionChange(n){const t=n.value,o=this.productdescription.find(g=>g.id===t);o&&(this.selectedProductForm.patchValue({productId:t,barcode:o.productBarcode,isActive:!0===o.active?1:0,unitPrice:o.buyingPrice,stockState:0,reserved:0,amount:0}),this.selectedProduct.isActive=1==o.active?1:0,this.quantityAdet=o.id)}onQuantitySelectionChange(n){const t=parseFloat(this.getFormValueByName("stockState")),o=this.getFormValueByName("productId");if(null!==t){const l=this.productdescription.find(b=>b.id===o);var r=!0!==l.buyingIncludeKDV?t*(l.buyingPrice*(1+l.ratio/100)):t*l.buyingPrice,d=r*(1+l.ratio/100)-r;l&&this.selectedProductForm.patchValue({reserved:r.toFixed(2),amount:d.toFixed(2)})}}getDemandProducts(){this.demandProductsService.getDemandProductsList().pipe((0,p.R)(this._unsubscribeAll)).subscribe(n=>{n&&n.data&&(this.productsList=n.data,this.cdr.markForCheck(),console.log(this.productsList))})}getProducts(){this.productDescriptionService.GetProductDescriptionList().pipe((0,p.R)(this._unsubscribeAll)).subscribe(n=>{n&&n.data&&(this.productdescription=n.data,this.cdr.markForCheck())})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,p.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),(0,O.T)(this._sort.sortChange,this._paginator.page).pipe((0,$.w)(()=>(this.closeDetails(),this.isLoading=!0,this.productsList)),(0,E.U)(()=>{this.isLoading=!1})).subscribe(),this.demand2Component&&this.demand2Component.getDemands())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}toggleDetails(n){if(this.selectedProduct&&this.selectedProduct.id===n)this.closeDetails();else{var t=this.productsList.find(o=>o.id===n);this.selectedProduct=t,this.getDemandProducts(),this.selectedProductForm.patchValue(t),this._changeDetectorRef.markForCheck()}}closeDetails(){this.selectedProduct=null}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(n){const t=n.target.value.toLowerCase();this.filteredTags=this.tags.filter(o=>o.title.toLowerCase().includes(t))}filterTagsInputKeyDown(n){if("Enter"===n.key)return 0===this.filteredTags.length?(this.createTag(n.target.value),void(n.target.value="")):void 0}createTag(n){}updateTagTitle(n,t){n.title=t.target.value,this._changeDetectorRef.markForCheck()}deleteTag(n){this._changeDetectorRef.markForCheck()}addTagToProduct(n){this._changeDetectorRef.markForCheck()}removeTagFromProduct(n){this._changeDetectorRef.markForCheck()}toggleProductTag(n,t){t.checked?this.addTagToProduct(n):this.removeTagFromProduct(n)}shouldShowCreateTagButton(n){return!(""===n||this.tags.findIndex(t=>t.title.toLowerCase()===n.toLowerCase())>-1)}getFormValueByName(n){return this.selectedProductForm.get(n).value}addDemand(){if(this.selecteDemandList=this.productsList.filter(t=>!0===t.selected),0!==this.selecteDemandList.length)if(this.selecteDemandList.filter(t=>"00000000-0000-0000-0000-000000000000"===t.productId).length>0){const t=new f.c("Uyar\u0131!","\xdcr\xfcn Se\xe7ilmeyen sat\u0131r/sat\u0131rlar mevcuttur. L\xfctfen se\xe7ili sat\u0131r/sat\u0131rlar\u0131 kontrol ediniz.",h.p.error);x.m.sweetAlert(t)}else this.selecteDemandList.length>0&&this._dialog.open(w,{maxWidth:"100vw !important",disableClose:!0,data:this.selecteDemandList}).afterClosed().subscribe(o=>{o.status&&this.getDemandProducts()});else{const t=new f.c("Uyar\u0131!","L\xfctfen sat\u0131r se\xe7iniz!",h.p.error);x.m.sweetAlert(t)}}createProduct(){const n=new te("00000000-0000-0000-0000-000000000000",0,0,0,0,0,0,"0");this.demandProductsService.createDemandProduct(n).subscribe(o=>{o.isSuccessful?this.getlist(o.data.id):this.showSweetAlert("error")},o=>{console.log(o)})}getlist(n){var t;this.selectedProductForm=this._formBuilder.group({id:["",s.kI.required],productId:["",s.kI.required],barcode:["",s.kI.required],stockState:[0],reserved:[0],unitPrice:[0],amount:[0],isActive:[{value:0,disabled:!0}],quantity:[0]}),this.demandProductsService.getDemandProductsList().pipe((0,p.R)(this._unsubscribeAll)).subscribe(o=>{o&&o.data&&(this.productsList=o.data,(t=this.productsList.find(r=>r.id===n))&&(this.selectedProduct=t,this.getDemandProducts(),this.selectedProductForm.patchValue(t),this._changeDetectorRef.markForCheck()))})}showSweetAlert(n){if("success"===n){const t=new f.c(this.translate("sweetalert.success"),this.translate("sweetalert.transactionSuccessful"),h.p.success);x.m.sweetAlert(t)}else{const t=new f.c(this.translate("sweetalert.error"),this.translate("sweetalert.transactionFailed"),h.p.error);x.m.sweetAlert(t)}}translate(n){return this._translocoService.translate(n)}updateSelectedProduct(){const n=this.selectedProductForm.getRawValue();null!=n&&(n.isActive=1==n.isActive?1:0),this.demandProductsService.updateDemandProduct(n).subscribe(t=>{t.isSuccessful?(this.showSweetAlert("success"),this.getDemandProducts(),this._changeDetectorRef.markForCheck()):this.showSweetAlert("error")},t=>{console.log(t)})}deleteSelectedProduct(){this._fuseConfirmationService.open({title:"\xdcr\xfcn Silinecektir!",message:"Bu \xfcr\xfcn\xfc kald\u0131rmak istedi\u011finizden emin misiniz? Bu i\u015flem geri al\u0131namaz!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(t=>{if("confirmed"===t){const o=this.selectedProductForm.getRawValue();this.demandProductsService.deleteDemandProduct(o).subscribe(r=>{r.isSuccessful?(this.getDemandProducts(),this._changeDetectorRef.markForCheck(),this.showSweetAlert("success"),this._changeDetectorRef.markForCheck()):this.showSweetAlert("error")})}})}showFlashMessage(n){this.flashMessage=n,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(n,t){return t.id||n}}F.\u0275fac=function(n){return new(n||F)(e.Y36(U.W),e.Y36(e.sBO),e.Y36(V.R),e.Y36(s.QS),e.Y36(e.sBO),e.Y36(P.Vn),e.Y36(S.d),e.Y36(D.uw))},F.\u0275cmp=e.Xpm({type:F,selectors:[["app-demand1"]],viewQuery:function(n,t){if(1&n&&(e.Gf(w,5),e.Gf(Q,5),e.Gf(A.NW,5),e.Gf(T.YE,5)),2&n){let o;e.iGM(o=e.CRH())&&(t.CreateEditDemandDialogComponent=o.first),e.iGM(o=e.CRH())&&(t.demand2Component=o.first),e.iGM(o=e.CRH())&&(t._paginator=o.first),e.iGM(o=e.CRH())&&(t._sort=o.first)}},decls:7,vars:1,consts:[[4,"ngIf"],["rowDetailsTemplate",""],["noProducts",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block","w-12"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inventory-grid","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,"flex","flex-col","gt-sm:flex-row"],[1,"flex","flex-col"],["type","checkbox",1,"mb-2",3,"checked","ngModel","color","ngModelChange"],[4,"ngFor","ngForOf"],["class","truncate text-red-500",4,"ngIf"],[1,"hidden","sm:block"],[1,"hidden","lg:flex","items-center"],[1,"min-w-4"],["class","flex items-end ml-2 w-1 h-4 bg-red-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-orange-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-green-100 rounded overflow-hidden",4,"ngIf"],[1,"hidden","lg:block"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5","text-gray-500",3,"svgIcon"],["class","truncate",4,"ngIf"],[1,"truncate"],[1,"truncate","text-red-500"],[1,"flex","items-end","ml-2","w-1","h-4","bg-red-200","rounded","overflow-hidden"],[1,"flex","w-full","h-1/3","bg-red-600"],[1,"flex","items-end","ml-2","w-1","h-4","bg-orange-200","rounded","overflow-hidden"],[1,"flex","w-full","h-2/4","bg-orange-400"],[1,"flex","items-end","ml-2","w-1","h-4","bg-green-100","rounded","overflow-hidden"],[1,"flex","w-full","h-full","bg-green-400"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"shadow-lg","overflow-hidden"],[1,"flex","border-b"],[1,"flex","flex-col","w-full",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","p-8"],[1,"flex","flex-col","items-center","sm:items-start","mb-8","sm:mb-0"],[1,"flex","flex-col","items-center"],[1,"w-32","h-44","border","rounded","overflow-hidden"],[1,"flex","flex-col","mt-8"],[1,"font-semibold","mb-2"],[3,"formControlName","color","disabled","click"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","flex-col","w-full","lg:w-2/4","sm:pl-8"],[1,"w-full"],["name","productdescription",3,"formControlName","placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex"],[1,"w-2/3","pl-2"],["readonly","true","matInput","",3,"formControlName"],[1,"flex","flex-col","w-full","lg:w-1/4","sm:pl-8"],["matPrefix",""],["matInput","","readonly","true",3,"formControlName"],["matSuffix",""],["type","number","matInput","",3,"formControlName","input"],["type","number","matInput","","readonly","true",3,"formControlName"],[1,"flex","items-center","justify-between","w-full","border-t","px-8","py-4"],["mat-button","",1,"-ml-4",3,"color","click"],[1,"flex","items-center"],["class","flex items-center mr-4",4,"ngIf"],["mat-flat-button","",3,"color","click"],[1,"flex","items-center","min-h-20","text-lg","font-semibold"],[3,"value"],[1,"flex","items-center","mr-4"],[1,"!text-green-500",3,"svgIcon"],[1,"ml-2"],[1,"text-red-500",3,"svgIcon"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(n,t){1&n&&(e.TgZ(0,"div"),e.ynx(1),e.YNc(2,ht,2,2,"ng-container",0),e.BQk(),e.YNc(3,Dt,57,16,"ng-template",null,1,e.W1O),e.YNc(5,bt,2,0,"ng-template",null,2,e.W1O),e.qZA()),2&n&&(e.xp6(2),e.Q6J("ngIf",t.productsList))},dependencies:[s._Y,s.Fj,s.wV,s.JJ,s.JL,s.On,s.sg,s.u,v.lW,_.KE,_.hX,_.qo,_.R9,u.Hw,C.Nt,m.sg,m.O5,m.tP,k.oG,y.gD,I.ey,Y.Rr,T.YE,T.nU,m.H9],styles:[".inventory-grid{grid-template-columns:48px auto 40px}@media (min-width: 600px){.inventory-grid{grid-template-columns:96px auto 112px 72px}}@media (min-width: 960px){.inventory-grid{grid-template-columns:48px 112px auto 112px 72px}}@media (min-width: 1280px){.inventory-grid{grid-template-columns:48px 112px auto 112px 96px 96px 72px 72px}}\n"],encapsulation:2,data:{animation:R.L},changeDetection:0});var wt=c(377);function At(i,n){if(1&i&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.suppliername," ")}}function kt(i,n){if(1&i&&(e.ynx(0),e.YNc(1,At,2,1,"div",25),e.BQk()),2&i){const t=n.$implicit,o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.id===o.suppliers)}}function yt(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",27),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function It(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",28),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Qt(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",27),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Ft(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",28),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Nt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,a=e.oxw(4);return e.KtG(a.toggleDetails(r.id))}),e._UZ(1,"mat-icon",30),e.qZA()}if(2&i){const t=e.oxw().$implicit,o=e.oxw(4);e.xp6(1),e.Q6J("svgIcon",(null==o.selectedDemand?null:o.selectedDemand.id)===t.id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down")}}function qt(i,n){1&i&&e.GkF(0)}const Jt=function(i){return{$implicit:i}};function Ut(i,n){if(1&i&&(e.ynx(0),e.YNc(1,qt,1,0,"ng-container",31),e.BQk()),2&i){const t=e.oxw().$implicit;e.oxw(4);const o=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,Jt,t))}}function Pt(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",13)(2,"div",14)(3,"div",15),e._uU(4),e.qZA()(),e.TgZ(5,"div")(6,"div",11),e._uU(7),e.qZA()(),e.TgZ(8,"div",11),e._uU(9),e.qZA(),e.TgZ(10,"div",14)(11,"div",15),e._uU(12),e.qZA()(),e.YNc(13,kt,2,1,"ng-container",16),e.TgZ(14,"div",17),e.YNc(15,yt,2,1,"ng-container",2),e.YNc(16,It,2,1,"ng-container",2),e.qZA(),e.TgZ(17,"div",17),e.YNc(18,Qt,2,1,"ng-container",2),e.YNc(19,Ft,2,1,"ng-container",2),e.qZA(),e.TgZ(20,"div"),e.YNc(21,Nt,2,1,"button",18),e.qZA(),e.TgZ(22,"div")(23,"div",19)(24,"button",20),e._UZ(25,"mat-icon",21),e.qZA(),e.TgZ(26,"mat-menu",null,22)(28,"button",23),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw(4);return e.KtG(d.createBuyingOrder(a.id))}),e._uU(29,"Al\u0131\u015f Olu\u015ftur"),e.qZA(),e.TgZ(30,"button",24),e._uU(31,"Muhasebele\u015ftir"),e.qZA()()()()(),e.TgZ(32,"div",6),e.YNc(33,Ut,2,4,"ng-container",2),e.qZA(),e.BQk()}if(2&i){const t=n.$implicit,o=e.MAs(27),r=e.oxw(4);e.xp6(4),e.Oqu(t.date.split("T")[0].split("-")[2]+"-"+t.date.split("T")[0].split("-")[1]+"-"+t.date.split("T")[0].split("-")[0]),e.xp6(3),e.hij(" ",t.note," "),e.xp6(2),e.hij(" ",t.documentno," "),e.xp6(3),e.Oqu(t.deliverydate.split("T")[0].split("-")[2]+"-"+t.deliverydate.split("T")[0].split("-")[1]+"-"+t.deliverydate.split("T")[0].split("-")[0]),e.xp6(1),e.Q6J("ngForOf",r.supplierscards),e.xp6(2),e.Q6J("ngIf",!0===t.isBuying),e.xp6(1),e.Q6J("ngIf",!1===t.isBuying),e.xp6(2),e.Q6J("ngIf",!0===t.isAccounting),e.xp6(1),e.Q6J("ngIf",!1===t.isAccounting),e.xp6(2),e.Q6J("ngIf",2===r.stateNumber),e.xp6(3),e.Q6J("matMenuTriggerFor",o)("demand",t),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:dots-vertical"),e.xp6(3),e.Q6J("disabled",!0===t.isBuying),e.xp6(5),e.Q6J("ngIf",(null==r.selectedDemand?null:r.selectedDemand.id)===t.id)}}function St(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Pt,34,15,"ng-container",12),e.BQk()),2&i){const t=n.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}function Yt(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",6)(2,"div",7)(3,"div",8),e._uU(4,"Tarih"),e.qZA(),e.TgZ(5,"div",9),e._uU(6,"Sipari\u015f Notu"),e.qZA(),e.TgZ(7,"div",9),e._uU(8," D\xf6k\xfcman No "),e.qZA(),e.TgZ(9,"div",9),e._uU(10," Teslim Tarihi "),e.qZA(),e.TgZ(11,"div",10),e._uU(12," Tedarik\xe7i "),e.qZA(),e.TgZ(13,"div",9),e._uU(14,"Al\u0131\u015f"),e.qZA(),e.TgZ(15,"div",9),e._uU(16,"Muhasebele\u015fme"),e.qZA(),e.TgZ(17,"div",11),e._uU(18,"Detay"),e.qZA(),e.TgZ(19,"div",11),e._uU(20,"\u0130\u015flem"),e.qZA()(),e.YNc(21,St,2,2,"ng-container",2),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","date"),e.xp6(2),e.Q6J("mat-sort-header","productId"),e.xp6(2),e.Q6J("mat-sort-header",t.documentno),e.xp6(2),e.Q6J("mat-sort-header",t.deliverydate),e.xp6(2),e.Q6J("mat-sort-header","suppliers"),e.xp6(2),e.Q6J("mat-sort-header","isBuying"),e.xp6(2),e.Q6J("mat-sort-header","isAccounting"),e.xp6(6),e.Q6J("ngIf",t.demandList)}}function Bt(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Yt,22,8,"ng-container",5),e.BQk()),2&i){const t=n.ngIf;e.oxw();const o=e.MAs(7);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function Lt(i,n){if(1&i&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Mt(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Lt,2,1,"div",25),e.BQk()),2&i){const t=n.$implicit,o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.id===o.productId)}}function Ot(i,n){1&i&&(e.TgZ(0,"div",46),e._UZ(1,"div",47),e.qZA())}function Et(i,n){1&i&&(e.TgZ(0,"div",48),e._UZ(1,"div",49),e.qZA())}function Rt(i,n){1&i&&(e.TgZ(0,"div",50),e._UZ(1,"div",51),e.qZA())}function Gt(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",27),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Vt(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",28),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Ht(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",38)(2,"div",39)(3,"div",40),e._UZ(4,"img",41),e.TgZ(5,"div",42),e._uU(6," NO THUMB "),e.qZA()()(),e.TgZ(7,"div"),e.YNc(8,Mt,2,1,"ng-container",16),e.qZA(),e.TgZ(9,"div",11),e._uU(10),e.ALo(11,"currency"),e.qZA(),e.TgZ(12,"div",14)(13,"div",15),e._uU(14),e.qZA(),e.YNc(15,Ot,2,0,"div",43),e.YNc(16,Et,2,0,"div",44),e.YNc(17,Rt,2,0,"div",45),e.qZA(),e.TgZ(18,"div",17),e.YNc(19,Gt,2,1,"ng-container",2),e.YNc(20,Vt,2,1,"ng-container",2),e.qZA()(),e.BQk()),2&i){const t=n.$implicit,o=e.oxw(5);e.xp6(8),e.Q6J("ngForOf",o.productdescription),e.xp6(2),e.hij(" ",e.gM2(11,8,t.reserved,"\u20ba","symbol","1.2-2")," "),e.xp6(4),e.Oqu(t.stockState),e.xp6(1),e.Q6J("ngIf",t.stockState<20),e.xp6(1),e.Q6J("ngIf",t.stockState>=20&&t.stockState<30),e.xp6(1),e.Q6J("ngIf",t.stockState>=30),e.xp6(2),e.Q6J("ngIf",1===t.isActive),e.xp6(1),e.Q6J("ngIf",0===t.isActive)}}function $t(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Ht,21,13,"ng-container",12),e.BQk()),2&i){const t=n.ngIf,o=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}function zt(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",6)(2,"div",37),e._UZ(3,"div"),e.TgZ(4,"div",9),e._uU(5,"\xdcr\xfcn Ad\u0131"),e.qZA(),e.TgZ(6,"div",9),e._uU(7," Toplam Tutar "),e.qZA(),e.TgZ(8,"div",10),e._uU(9," Adet "),e.qZA(),e.TgZ(10,"div",10),e._uU(11," Aktif "),e.qZA(),e._UZ(12,"div"),e.qZA(),e.YNc(13,$t,2,2,"ng-container",2),e.qZA(),e.BQk()),2&i){const t=e.oxw(3);e.xp6(4),e.Q6J("mat-sort-header","productId"),e.xp6(2),e.Q6J("mat-sort-header",t.reserved),e.xp6(2),e.Q6J("mat-sort-header",t.stockState),e.xp6(2),e.Q6J("mat-sort-header","isActive"),e.xp6(3),e.Q6J("ngIf",t.demandTransList)}}function Kt(i,n){if(1&i&&(e.ynx(0),e.YNc(1,zt,14,5,"ng-container",5),e.BQk()),2&i){const t=n.ngIf;e.oxw();const o=e.MAs(6);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function jt(i,n){1&i&&(e.TgZ(0,"div",52),e._uU(1,"Veri bulunamad\u0131."),e.qZA())}function Wt(i,n){if(1&i&&(e.TgZ(0,"div",32)(1,"div",33)(2,"form",34)(3,"div",35),e.YNc(4,Kt,2,2,"ng-container",2),e.YNc(5,jt,2,0,"ng-template",null,36,e.W1O),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.demandTransList)}}function Xt(i,n){1&i&&(e.TgZ(0,"div",52),e._uU(1,"Veri bulunamad\u0131."),e.qZA())}class N{constructor(n,t,o,r,a,d,g,l,b){this.demandProductsService=n,this._changeDetectorRef=t,this._fuseConfirmationService=o,this._formBuilder=r,this.cdr=a,this._translocoService=d,this.productDescriptionService=g,this._dialog=l,this._suppliersService=b,this.displayedColumns=["name","categoryCode","actions"],this.demandList=[],this.SelecteddemandListAll=[],this.demandTransList=[],this.demandTransListlast=[],this.selecteDemandList=[],this.productdescription=[],this.quantityInput="",this.isLoading=!1,this.flashMessage=null,this.selectedProduct=null,this.selectedDemand=null,this.tagsEditMode=!1,this._unsubscribeAll=new J.x,this.supplierscards=[],this.productsList=[],this.stateNumber=2}ngOnInit(){this.selectedDemandForm=this._formBuilder.group({id:["",s.kI.required],date:["",s.kI.required],documentno:["",s.kI.required],suppliers:["",s.kI.required],deliverydate:["",s.kI.required],note:["",s.kI.required],state:[0],isBuying:[!1],isAccounting:[!1]}),this.getProducts(),this.getDemands(),this.getDemandsTedarikci(),this.getDemandProducts()}getProducts(){this.productDescriptionService.GetProductDescriptionList().pipe((0,p.R)(this._unsubscribeAll)).subscribe(n=>{n&&n.data&&(this.productdescription=n.data,this.cdr.markForCheck())})}getDemandProducts(){const n=new ne.N(this.selectedDemand.id,"00000000-0000-0000-0000-000000000000",0,0,0,0,0,0,"0","00000000-0000-0000-0000-000000000000");this.demandProductsService.getDemandTransList(n).pipe((0,p.R)(this._unsubscribeAll)).subscribe(t=>{t&&t.data&&(this.demandTransListlast=t.data,this.demandTransList=this.demandTransListlast.filter(o=>o.ownerId===this.selectedDemand.id),this.cdr.markForCheck(),console.log(this.demandTransList))})}getDemandsTedarikci(){this._suppliersService.getSuppliersList().subscribe(n=>{this.supplierscards=n.data,console.log(this.supplierscards)})}onQuantitySelectionChange(n){const t=parseFloat(this.getFormValueByName("stockState")),o=this.getFormValueByName("productId");if(null!==t){const l=this.productdescription.find(b=>b.id===o);var r=!0!==l.buyingIncludeKDV?t*(l.buyingPrice*(1+l.ratio/100)):t*l.buyingPrice,d=r*(1+l.ratio/100)-r;l&&this.selectedDemandForm.patchValue({reserved:r.toFixed(2),amount:d.toFixed(2)})}}getDemands(){this.demandProductsService.getDemandComplateList().pipe((0,p.R)(this._unsubscribeAll)).subscribe(n=>{n&&n.data&&(this.demandList=n.data,this.cdr.markForCheck(),console.log(this.demandList))})}createBuyingOrder(n){this.stateNumber=1;var t=this.demandList.find(a=>a.id===n);this.selectedDemand=t,this._dialog.open(wt.Z,{maxWidth:"100vw !important",disableClose:!0,data:{selectedsalebuy:null,visibleCustomer:!1,salebuyType:2,isSupplier:!1,demandList:this.selectedDemand}}).afterClosed().subscribe(a=>{a.status&&(this.selectedDemand=void 0,this.getProducts(),this.getDemands(),this.getDemandsTedarikci(),this.getDemandProducts())})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,p.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),(0,O.T)(this._sort.sortChange,this._paginator.page).pipe((0,$.w)(()=>(this.closeDetails(),this.isLoading=!0,this.demandList)),(0,E.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}toggleDetails(n){if(this.selectedDemand&&this.selectedDemand.id===n)this.closeDetails();else{this.stateNumber=2;var t=this.demandList.find(o=>o.id===n);this.selectedDemand=t,this.getDemandProducts(),this.selectedDemandForm.patchValue(t),this.cdr.markForCheck()}}closeDetails(){this.selectedDemand=null}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(n){const t=n.target.value.toLowerCase();this.filteredTags=this.tags.filter(o=>o.title.toLowerCase().includes(t))}filterTagsInputKeyDown(n){if("Enter"===n.key)return 0===this.filteredTags.length?(this.createTag(n.target.value),void(n.target.value="")):void 0}createTag(n){}updateTagTitle(n,t){n.title=t.target.value,this._changeDetectorRef.markForCheck()}deleteTag(n){this._changeDetectorRef.markForCheck()}addTagToProduct(n){this._changeDetectorRef.markForCheck()}removeTagFromProduct(n){this._changeDetectorRef.markForCheck()}toggleProductTag(n,t){t.checked?this.addTagToProduct(n):this.removeTagFromProduct(n)}shouldShowCreateTagButton(n){return!(""===n||this.tags.findIndex(t=>t.title.toLowerCase()===n.toLowerCase())>-1)}getFormValueByName(n){return this.selectedDemandForm.get(n).value}showSweetAlert(n){if("success"===n){const t=new f.c(this.translate("sweetalert.success"),this.translate("sweetalert.transactionSuccessful"),h.p.success);x.m.sweetAlert(t)}else{const t=new f.c(this.translate("sweetalert.error"),this.translate("sweetalert.transactionFailed"),h.p.error);x.m.sweetAlert(t)}}translate(n){return this._translocoService.translate(n)}showFlashMessage(n){this.flashMessage=n,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(n,t){return t.id||n}}N.\u0275fac=function(n){return new(n||N)(e.Y36(U.W),e.Y36(e.sBO),e.Y36(V.R),e.Y36(s.QS),e.Y36(e.sBO),e.Y36(P.Vn),e.Y36(S.d),e.Y36(D.uw),e.Y36(z.R))},N.\u0275cmp=e.Xpm({type:N,selectors:[["app-demand3"]],viewQuery:function(n,t){if(1&n&&(e.Gf(w,5),e.Gf(A.NW,5),e.Gf(T.YE,5)),2&n){let o;e.iGM(o=e.CRH())&&(t.CreateEditDemandDialogComponent=o.first),e.iGM(o=e.CRH())&&(t._paginator=o.first),e.iGM(o=e.CRH())&&(t._sort=o.first)}},decls:8,vars:1,consts:[["href","https://fonts.googleapis.com/icon?family=Material+Icons","rel","stylesheet"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf"],["rowDetailsTemplate",""],["noDemands",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","shadow","text-md","font-semibold","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","sm:block","md:px-8",3,"mat-sort-header"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inventory-grid","grid","items-center","gap-2","py-1","px-4","md:px-6","border-b"],[1,"hidden","lg:flex","items-center"],[1,"min-w-4"],[4,"ngFor","ngForOf"],[1,"hidden","lg:block"],["class","min-w-10 min-h-7 h-7 px-2 leading-6","mat-stroked-button","",3,"click",4,"ngIf"],[1,"ml-2","-mt-2","-mr-3"],["mat-icon-button","",3,"matMenuTriggerFor","demand"],[1,"text-gray-800","icon-size-4",3,"svgIcon"],["issuesMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","","disabled","true"],["class","truncate",4,"ngIf"],[1,"truncate"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5","text-gray-500",3,"svgIcon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"shadow-lg","overflow-hidden"],[1,"flex","border-b"],[1,"flex","flex-col","w-full"],[1,"flex","flex-col","flex-2","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],["noTrans",""],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"inventory-grid","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,"flex","items-center"],[1,"relative","flex","flex-0","items-center","justify-center","w-12","h-12","mr-6","rounded","overflow-hidden","border"],[1,"w-8"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],["class","flex items-end ml-2 w-1 h-4 bg-red-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-orange-200 rounded overflow-hidden",4,"ngIf"],["class","flex items-end ml-2 w-1 h-4 bg-green-100 rounded overflow-hidden",4,"ngIf"],[1,"flex","items-end","ml-2","w-1","h-4","bg-red-200","rounded","overflow-hidden"],[1,"flex","w-full","h-1/3","bg-red-600"],[1,"flex","items-end","ml-2","w-1","h-4","bg-orange-200","rounded","overflow-hidden"],[1,"flex","w-full","h-2/4","bg-orange-400"],[1,"flex","items-end","ml-2","w-1","h-4","bg-green-100","rounded","overflow-hidden"],[1,"flex","w-full","h-full","bg-green-400"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(n,t){1&n&&(e.TgZ(0,"header"),e._UZ(1,"link",0),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,Bt,2,2,"ng-container",2),e.YNc(4,Wt,7,1,"ng-template",null,3,e.W1O),e.YNc(6,Xt,2,0,"ng-template",null,4,e.W1O),e.qZA()),2&n&&(e.xp6(3),e.Q6J("ngIf",t.demandList))},dependencies:[s._Y,s.JL,s.F,v.lW,v.RK,u.Hw,Z.VK,Z.OP,Z.p6,m.sg,m.O5,m.tP,T.YE,T.nU,m.H9],styles:[".inventory-grid{grid-template-columns:48px auto 40px}@media (min-width: 600px){.inventory-grid{grid-template-columns:48px auto 112px 72px 96px 72px}}@media (min-width: 960px){.inventory-grid{grid-template-columns:48px 112px auto 112px 72px}}@media (min-width: 1280px){.inventory-grid{grid-template-columns:96px auto 112px 112px 96px 48px 96px 72px 72px}}\n"],encapsulation:2,data:{animation:R.L},changeDetection:0});var ie=c(9299);const en=["tabGroup"];function tn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addTalep())}),e._UZ(1,"mat-icon",19),e._uU(2," Yeni Talep "),e.qZA()}2&i&&(e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:link"))}function nn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.handleButtonClick())}),e._UZ(1,"mat-icon",19),e._uU(2),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("color","accent"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(1),e.hij(" ",t.buttonLabel," ")}}class L{constructor(n,t,o,r,a,d,g,l){this.demandProductsService=n,this._changeDetectorRef=t,this._fuseConfirmationService=o,this._formBuilder=r,this.cdr=a,this._translocoService=d,this.productDescriptionService=g,this._dialog=l,this.indexs=0,this._unsubscribeAll=new J.x,this.isLoading=!1,this.CreateDemandCom=te,this.buttonLabel="Sipari\u015f Olu\u015ftur"}ngOnInit(){}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,p.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,O.T)(this._sort.sortChange,this._paginator.page).pipe(),(0,E.U)(()=>{this.isLoading=!1}))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onTabChange(n){const t=n.index;0===t?(this.buttonLabel="Sipari\u015f Olu\u015ftur",this.demand1Component.getDemandProducts(),this.indexs=0):1===t?(this.buttonLabel="Onayla",this.indexs=1,this.getDemands()):2===t&&(this.indexs=2,this.demand3Component.getDemands()),this._changeDetectorRef.markForCheck()}addTalep(){this.demand1Component.createProduct()}handleButtonClick(){0==this.indexs&&(console.log(this.indexs),this.demand1Component.addDemand())}getDemands(){this.demand2Component.getDemands()}}L.\u0275fac=function(n){return new(n||L)(e.Y36(U.W),e.Y36(e.sBO),e.Y36(V.R),e.Y36(s.QS),e.Y36(e.sBO),e.Y36(P.Vn),e.Y36(S.d),e.Y36(D.uw))},L.\u0275cmp=e.Xpm({type:L,selectors:[["app-demands"]],viewQuery:function(n,t){if(1&n&&(e.Gf(F,5),e.Gf(Q,5),e.Gf(N,5),e.Gf(A.NW,5),e.Gf(T.YE,5),e.Gf(en,5)),2&n){let o;e.iGM(o=e.CRH())&&(t.demand1Component=o.first),e.iGM(o=e.CRH())&&(t.demand2Component=o.first),e.iGM(o=e.CRH())&&(t.demand3Component=o.first),e.iGM(o=e.CRH())&&(t._paginator=o.first),e.iGM(o=e.CRH())&&(t._sort=o.first),e.iGM(o=e.CRH())&&(t.tabGroup=o.first)}},decls:26,vars:4,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"font-medium","tracking-tight","text-secondary"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],["class","ml-3","mat-flat-button","",3,"color","click",4,"ngIf"],["id","dynamicButton","class","ml-3","mat-flat-button","",3,"color","click",4,"ngIf"],[1,"flex-auto","-mt-16","p-6","sm:p-10","rounded-t-2xl","shadow","bg-card"],[3,"selectedTabChange"],["label","TALEP"],["label","S\u0130PAR\u0130\u015e"],["label","TAMAMLANDI"],["mat-flat-button","",1,"ml-3",3,"color","click"],[1,"icon-size-5","mr-2",3,"svgIcon"],["id","dynamicButton","mat-flat-button","",1,"ml-3",3,"color","click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"a",4),e._UZ(6,"mat-icon",5),e.TgZ(7,"span",6),e._uU(8,"Back"),e.qZA()()()(),e.TgZ(9,"div",7)(10,"h2",8),e._uU(11," Talep "),e.qZA()(),e.TgZ(12,"div",9),e._uU(13,"\xdcr\xfcn/A\u015f\u0131 vb. \xdcr\xfcnlerin Talep Listesini Olu\u015fturabilirsiniz."),e.qZA()(),e.TgZ(14,"div",10),e.YNc(15,tn,3,2,"button",11),e.qZA(),e.TgZ(16,"div",10),e.YNc(17,nn,3,3,"button",12),e.qZA()(),e.TgZ(18,"div",13)(19,"mat-tab-group",14),e.NdJ("selectedTabChange",function(r){return t.onTabChange(r)}),e.TgZ(20,"mat-tab",15),e._UZ(21,"app-demand1"),e.qZA(),e.TgZ(22,"mat-tab",16),e._UZ(23,"app-demand2"),e.qZA(),e.TgZ(24,"mat-tab",17),e._UZ(25,"app-demand3"),e.qZA()()()()),2&n&&(e.xp6(5),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(9),e.Q6J("ngIf",0===t.indexs),e.xp6(2),e.Q6J("ngIf",0==t.indexs))},dependencies:[v.lW,u.Hw,H.uX,H.SP,m.O5,ie.rH,F,Q,N],styles:[".inventory-grid{grid-template-columns:48px auto 40px}@media (min-width: 600px){.inventory-grid{grid-template-columns:48px auto auto 72px}}@media (min-width: 960px){.inventory-grid{grid-template-columns:48px auto 112px 112px 72px}}@media (min-width: 1280px){.inventory-grid{grid-template-columns:40px 112px auto 112px 96px 96px 72px}}\n"],encapsulation:2,data:{animation:R.L},changeDetection:0});var K=c(3162),j=c(266),W=c(4466),oe=c(1948);const on=[{path:"",component:L}];class q{}q.\u0275fac=function(n){return new(n||q)},q.\u0275mod=e.oAB({type:q}),q.\u0275inj=e.cJS({imports:[s.u5,s.UX,v.ot,_.lN,u.Ps,C.c,M.J,Z.Tx,ee.p0,H.Nh,m.ez,k.p9,_.lN,u.Ps,C.c,Z.Tx,A.TU,K.Cv,I.si,y.LD,Y.rP,j.AV,W.m,_.lN,C.c,B.FA,I.XK,oe.Fk,v.ot,_.lN,u.Ps,C.c,s.u5,s.UX,M.J,Z.Tx,y.LD,u.Ps,k.p9,v.ot,k.p9,_.lN,u.Ps,C.c,Z.Tx,A.TU,K.Cv,I.si,T.JX,y.LD,Y.rP,j.AV,W.m,_.lN,C.c,B.FA,I.XK,oe.Fk,s.u5,v.ot,_.lN,u.Ps,C.c,s.u5,s.UX,M.J,Z.Tx,s.u5,ee.p0,m.ez,u.Ps,_.lN,v.ot,_.lN,u.Ps,C.c,s.u5,s.UX,M.J,Z.Tx,y.LD,u.Ps,k.p9,v.ot,k.p9,_.lN,u.Ps,C.c,Z.Tx,A.TU,K.Cv,I.si,T.JX,y.LD,Y.rP,j.AV,W.m,D.Is,ie.Bz.forChild(on)]})}}]);