"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[9476],{95378:(At,U,s)=>{s.r(U),s.d(U,{SmstemplateModule:()=>vt});var g=s(36895),b=s(98739),c=s(24006),u=s(65412),S=s(45263),T=s(69079),C=s(70487);class Q{constructor(l=!1,a="",n="",o,m,i,p){this.active=l,this.templateName=a,this.templateContent=n,this.enableSMS=o,this.enableAppNotification=m,this.enableEmail=i,this.enableWhatsapp=p}}class F{constructor(l,a=!1,n="",o="",m,i,p,_){this.id=l,this.active=a,this.templateName=n,this.templateContent=o,this.enableSMS=m,this.enableAppNotification=i,this.enableEmail=p,this.enableWhatsapp=_}}var t=s(94650),w=s(30430),x=s(51723),D=s(76717);let J=(()=>{class e{constructor(a){this._httpService=a}getSmsTemplate(){return this._httpService.getRequest(x.z.smstemplate.getSmsTemplate)}createSmsTemplate(a){return this._httpService.post(x.z.smstemplate.createSmsTemplate,a)}updateSmsTemplate(a){return this._httpService.post(x.z.smstemplate.updateSmsTemplate,a)}deleteSmsTemplate(a){return this._httpService.post(x.z.smstemplate.deleteSmsTemplate,a)}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(D.O))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var d=s(4859),f=s(59549),v=s(284),B=s(39349),Z=s(56709),A=s(90455),N=s(77331);const I=["textareaElement"];function W(e,l){1&e&&(t.TgZ(0,"span"),t._uU(1,"\u015eablon G\xfcncelle"),t.qZA())}function O(e,l){1&e&&(t.TgZ(0,"span"),t._uU(1,"\u015eablon Ekle"),t.qZA())}function V(e,l){if(1&e){const a=t.EpF();t.TgZ(0,"mat-chip",29),t.NdJ("click",function(){const m=t.CHM(a).$implicit,i=t.oxw();return t.KtG(i.toggleSelection(m))}),t._uU(1),t.qZA()}if(2&e){const a=l.$implicit;t.Q6J("selected",a.selected),t.xp6(1),t.hij(" ",a.name," ")}}let k=(()=>{class e{constructor(a,n,o,m,i){this._dialogRef=a,this._formBuilder=n,this._translocoService=o,this._smstemplateService=m,this.data=i,this.selectedOption=1,this.buttonDisabled=!1,this.availableOptions=[{name:"Misafir Ad\u0131",selected:!1,value:"[[customername]]"},{name:"Tarih",selected:!1,value:"[[Date]]"},{name:"Hasta",selected:!1,value:"[[patient]]"},{name:"Firma Ad\u0131",selected:!1,value:"[[company]]"},{name:"Randevu Tipi",selected:!1,value:"[[appointtpe]]"}],this.selectedsmstemplate=i}ngOnInit(){this.smstemplate=this._formBuilder.group({active:[!0],templatename:[""],enableSMS:!1,enableAppNotification:!1,enableEmail:!1,enableWhatsapp:!1,templatecontent:["",c.kI.required]}),this.fillFormData(this.selectedsmstemplate)}toggleSelection(a){const n=this.textareaElement.nativeElement,o=n.selectionStart,m=n.value.substring(0,o),i=n.value.substring(o);this.smstemplate.controls.templatecontent.setValue(m+a.value+i),setTimeout(()=>{n.selectionStart=n.selectionEnd=o+a.value.length},0)}closeDialog(){this._dialogRef.close({status:null})}addOrUpdateSmsTemplate(){this.buttonDisabled=!0,this.selectedsmstemplate?this.updateSmsTemplate():this.addSmsTemplate()}addSmsTemplate(){const a=new Q(this.getFormValueByName("active"),this.getFormValueByName("templatename"),this.getFormValueByName("templatecontent"),this.getFormValueByName("enableSMS"),this.getFormValueByName("enableAppNotification"),this.getFormValueByName("enableEmail"),this.getFormValueByName("enableWhatsapp"));this._smstemplateService.createSmsTemplate(a).subscribe(n=>{n.isSuccessful?(this.showSweetAlert("success"),this._dialogRef.close({status:!0})):this.showSweetAlert("error")},n=>{console.log(n)})}updateSmsTemplate(){const a=new F(this.selectedsmstemplate.id,this.getFormValueByName("active"),this.getFormValueByName("templatename"),this.getFormValueByName("templatecontent"),this.getFormValueByName("enableSMS"),this.getFormValueByName("enableAppNotification"),this.getFormValueByName("enableEmail"),this.getFormValueByName("enableWhatsapp"));this._smstemplateService.updateSmsTemplate(a).subscribe(n=>{n.isSuccessful?(this.showSweetAlert("success"),this._dialogRef.close({status:!0})):this.showSweetAlert("error")},n=>{console.log(n)})}showSweetAlert(a){if("success"===a){const n=new C.c(this.translate("sweetalert.success"),this.translate("sweetalert.transactionSuccessful"),T.p.success);S.m.sweetAlert(n)}else{const n=new C.c(this.translate("sweetalert.error"),this.translate("sweetalert.transactionFailed"),T.p.error);S.m.sweetAlert(n)}}translate(a){return this._translocoService.translate(a)}getFormValueByName(a){return this.smstemplate.get(a).value}fillFormData(a){null!==this.selectedsmstemplate&&this.smstemplate.setValue({active:a.active,templatename:a.templateName,enableSMS:a.enableSMS,enableAppNotification:a.enableAppNotification,enableEmail:a.enableEmail,enableWhatsapp:a.enableWhatsapp,templatecontent:a.templateContent})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(u.so),t.Y36(c.qu),t.Y36(w.Vn),t.Y36(J),t.Y36(u.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-createedit-smstemplate"]],viewQuery:function(n,o){if(1&n&&t.Gf(I,5),2&n){let m;t.iGM(m=t.CRH())&&(o.textareaElement=m.first)}},decls:45,vars:12,consts:[["mat-dialog-title","",1,"mat-dialog-title"],[1,"dialog-close-button",3,"tabIndex","click"],[1,"material-icons"],[1,"modalForm"],[1,"modal-header"],[1,"modal-title"],[4,"ngIf"],[1,"modal-body","mbody-accommodationrooms"],[1,"container-fluid",3,"formGroup"],[1,"row"],[1,"flex","flex-col"],[1,"mb-2",3,"checked","formControlName","color"],[1,"col-sm-12","mt-2","common-width"],[2,"width","100%"],["matInput","",3,"formControlName"],[1,"col-sm-12","mt-2","common-width","mb-3"],["formControlName","enableSMS",1,"mr-6"],["formControlName","enableAppNotification",1,"mr-6"],["formControlName","enableEmail",1,"mr-6"],["formControlName","enableWhatsapp"],["selectable","true","color","primary","selectedColor","accent",3,"selected","click",4,"ngFor","ngForOf"],[1,"flex-auto"],["matInput","","cdkTextareaAutosize","",3,"cdkAutosizeMinRows","formControlName"],["textareaElement",""],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","mt-4","sm:mt-6"],[1,"-ml-2"],[1,"flex","items-center","mt-4","sm:mt-0"],["mat-stroked-button","",1,"ml-auto","sm:ml-0","mr-2",3,"click"],["mat-flat-button","",1,"order-first","sm:order-last",3,"color","click"],["selectable","true","color","primary","selectedColor","accent",3,"selected","click"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0)(1,"button",1),t.NdJ("click",function(){return o.closeDialog()}),t.TgZ(2,"span",2),t._uU(3," highlight_off "),t.qZA()()(),t.TgZ(4,"div",3)(5,"mat-dialog-content")(6,"div",4)(7,"h5",5),t.YNc(8,W,2,0,"span",6),t.YNc(9,O,2,0,"span",6),t.qZA()(),t.TgZ(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"mat-checkbox",11),t._uU(15," Aktif "),t.qZA()(),t.TgZ(16,"div",12)(17,"mat-form-field",13)(18,"mat-label"),t._uU(19,"\u015eablon Ad\u0131"),t.qZA(),t._UZ(20,"input",14),t.qZA()(),t.TgZ(21,"div",15)(22,"mat-slide-toggle",16),t._uU(23,"SMS"),t.qZA(),t.TgZ(24,"mat-slide-toggle",17),t._uU(25,"Mobil Uygulama Bildirimi"),t.qZA(),t.TgZ(26,"mat-slide-toggle",18),t._uU(27,"E-Posta"),t.qZA(),t.TgZ(28,"mat-slide-toggle",19),t._uU(29,"Whatsapp"),t.qZA()(),t.TgZ(30,"div",12)(31,"mat-chip-listbox"),t.YNc(32,V,2,2,"mat-chip",20),t.qZA()(),t.TgZ(33,"mat-form-field",21)(34,"mat-label"),t._uU(35,"\u015eablon Metni"),t.qZA(),t._UZ(36,"textarea",22,23),t.qZA()()()(),t.TgZ(38,"div",24),t._UZ(39,"div",25),t.TgZ(40,"div",26)(41,"button",27),t.NdJ("click",function(){return o.closeDialog()}),t._uU(42," Vazge\xe7 "),t.qZA(),t.TgZ(43,"button",28),t.NdJ("click",function(){return o.addOrUpdateSmsTemplate()}),t._uU(44," Kaydet "),t.qZA()()()()()),2&n&&(t.xp6(1),t.Q6J("tabIndex",-1),t.xp6(7),t.Q6J("ngIf",o.selectedsmstemplate),t.xp6(1),t.Q6J("ngIf",!o.selectedsmstemplate),t.xp6(2),t.Q6J("formGroup",o.smstemplate),t.xp6(3),t.Q6J("checked",!0)("formControlName","active")("color","primary"),t.xp6(6),t.Q6J("formControlName","templatename"),t.xp6(12),t.Q6J("ngForOf",o.availableOptions),t.xp6(4),t.Q6J("cdkAutosizeMinRows",3)("formControlName","templatecontent"),t.xp6(7),t.Q6J("color","primary"))},dependencies:[g.sg,g.O5,c.Fj,c.JJ,c.JL,d.lW,f.KE,f.hX,v.Nt,B.IC,c.sg,c.u,Z.oG,A.Rr,u.uh,u.xY,N.HS,N.z2]})}return e})();var r=s(30671),h=s(97392),Y=s(89299);function z(e,l){1&e&&(t.TgZ(0,"th",28),t._uU(1," Durum "),t.qZA())}function R(e,l){if(1&e){const a=t.EpF();t.TgZ(0,"td",29)(1,"mat-slide-toggle",30),t.NdJ("ngModelChange",function(o){const i=t.CHM(a).$implicit;return t.KtG(i.active=o)})("change",function(){const m=t.CHM(a).$implicit,i=t.oxw();return t.KtG(i.toggleActive(m.id,m.active))}),t.qZA()()}if(2&e){const a=l.$implicit;t.xp6(1),t.s9C("color",0===a.criticalAmount?"warn":"green-toggle"),t.Q6J("ngModel",a.active)}}function q(e,l){1&e&&(t.TgZ(0,"th",28),t._uU(1," \u015eablon Ad\u0131 "),t.qZA())}function H(e,l){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const a=l.$implicit;t.xp6(1),t.hij(" ",a.templateName," ")}}function G(e,l){1&e&&(t.TgZ(0,"th",28),t._uU(1," Sms "),t.qZA())}function $(e,l){1&e&&(t.TgZ(0,"mat-icon",33),t._uU(1,"check_box"),t.qZA())}function P(e,l){1&e&&(t.TgZ(0,"mat-icon",33),t._uU(1,"check_box_outline_blank"),t.qZA())}function K(e,l){if(1&e&&(t.TgZ(0,"td",29),t.YNc(1,$,2,0,"mat-icon",31),t.YNc(2,P,2,0,"ng-template",null,32,t.W1O),t.qZA()),2&e){const a=l.$implicit,n=t.MAs(3);t.xp6(1),t.Q6J("ngIf",a.enableSMS)("ngIfElse",n)}}function j(e,l){1&e&&(t.TgZ(0,"th",28),t._uU(1," App "),t.qZA())}function L(e,l){1&e&&(t.TgZ(0,"mat-icon",33),t._uU(1,"check_box"),t.qZA())}function X(e,l){1&e&&(t.TgZ(0,"mat-icon",33),t._uU(1,"check_box_outline_blank"),t.qZA())}function tt(e,l){if(1&e&&(t.TgZ(0,"td",29),t.YNc(1,L,2,0,"mat-icon",31),t.YNc(2,X,2,0,"ng-template",null,32,t.W1O),t.qZA()),2&e){const a=l.$implicit,n=t.MAs(3);t.xp6(1),t.Q6J("ngIf",a.enableAppNotification)("ngIfElse",n)}}function et(e,l){1&e&&(t.TgZ(0,"th",28),t._uU(1," E-Mail "),t.qZA())}function at(e,l){1&e&&(t.TgZ(0,"mat-icon",33),t._uU(1,"check_box"),t.qZA())}function nt(e,l){1&e&&(t.TgZ(0,"mat-icon",33),t._uU(1,"check_box_outline_blank"),t.qZA())}function lt(e,l){if(1&e&&(t.TgZ(0,"td",29),t.YNc(1,at,2,0,"mat-icon",31),t.YNc(2,nt,2,0,"ng-template",null,32,t.W1O),t.qZA()),2&e){const a=l.$implicit,n=t.MAs(3);t.xp6(1),t.Q6J("ngIf",a.enableEmail)("ngIfElse",n)}}function ot(e,l){1&e&&(t.TgZ(0,"th",28),t._uU(1," Aktif "),t.qZA())}function st(e,l){1&e&&(t.TgZ(0,"mat-icon",33),t._uU(1,"check_box"),t.qZA())}function mt(e,l){1&e&&(t.TgZ(0,"mat-icon",33),t._uU(1,"check_box_outline_blank"),t.qZA())}function it(e,l){if(1&e&&(t.TgZ(0,"td",29),t.YNc(1,st,2,0,"mat-icon",31),t.YNc(2,mt,2,0,"ng-template",null,32,t.W1O),t.qZA()),2&e){const a=l.$implicit,n=t.MAs(3);t.xp6(1),t.Q6J("ngIf",a.enableWhatsapp)("ngIfElse",n)}}function ct(e,l){1&e&&t._UZ(0,"tr",34)}function rt(e,l){1&e&&t._UZ(0,"tr",35)}function pt(e,l){1&e&&(t.TgZ(0,"th",28),t._uU(1," \u0130\u015flemler "),t.qZA())}function ut(e,l){if(1&e){const a=t.EpF();t.TgZ(0,"td",29)(1,"button",36),t.NdJ("click",function(){const m=t.CHM(a).$implicit,i=t.oxw();return t.KtG(i.redirectToUpdate(m.id))}),t.TgZ(2,"mat-icon",37),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",38),t.NdJ("click",function(){const m=t.CHM(a).$implicit,i=t.oxw();return t.KtG(i.redirectToDelete(m.id))}),t.TgZ(5,"mat-icon",33),t._uU(6,"delete"),t.qZA()()()}}const dt=function(){return[5,10,20]};let ft=(()=>{class e{constructor(a,n,o){this._dialog=a,this._smstemplateService=n,this._translocoService=o,this.displayedColumns=["active","templateName","enableSMS","enableAppNotification","enableEmail","enableWhatsapp","actions"],this.smstemplate=[],this.dataSource=new r.by(this.smstemplate),this.redirectToUpdate=m=>{const i=this.smstemplate.find(p=>p.id===m);i&&this._dialog.open(k,{maxWidth:"100vw !important",disableClose:!0,data:i}).afterClosed().subscribe(_=>{_.status&&this.getSmsTemplate()})},this.redirectToDelete=m=>{const i=new C.c(this.translate("sweetalert.areYouSure"),this.translate("sweetalert.areYouSureDelete"),T.p.warning);S.m.sweetAlertOfQuestion(i).then(p=>{p.isConfirmed&&this._smstemplateService.deleteSmsTemplate({id:m}).subscribe(bt=>{if(bt.isSuccessful){this.getSmsTemplate();const Zt=new C.c(this.translate("sweetalert.success"),this.translate("sweetalert.transactionSuccessful"),T.p.success);S.m.sweetAlert(Zt)}else console.error("Silme i\u015flemi ba\u015far\u0131s\u0131z.")})})}}ngOnInit(){this.getSmsTemplate()}getSmsTemplate(){this._smstemplateService.getSmsTemplate().subscribe(a=>{this.smstemplate=a.data,this.dataSource=new r.by(this.smstemplate),this.dataSource.paginator=this.paginator})}addPanelOpen(){this._dialog.open(k,{maxWidth:"100vw !important",disableClose:!0,data:null}).afterClosed().subscribe(n=>{n.status&&this.getSmsTemplate()})}translate(a){return this._translocoService.translate(a)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(u.uw),t.Y36(J),t.Y36(w.Vn))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-smstemplate"]],viewQuery:function(n,o){if(1&n&&t.Gf(b.NW,5),2&n){let m;t.iGM(m=t.CRH())&&(o.paginator=m.first)}},decls:46,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],["mat-stroked-button","",3,"click"],[1,"icon-size-5","mr-2",3,"svgIcon"],["mat-flat-button","",1,"ml-3",3,"color","click"],[1,"flex-auto","-mt-16","p-6","sm:p-10","rounded-t-2xl","shadow","bg-card"],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","active"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","templateName"],["matColumnDef","enableSMS"],["matColumnDef","enableAppNotification"],["matColumnDef","enableEmail"],["matColumnDef","enableWhatsapp"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["matColumnDef","actions"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],[3,"ngModel","color","ngModelChange","change"],["class","mat-18",4,"ngIf","ngIfElse"],["inactiveIcon",""],[1,"mat-18"],["mat-header-row",""],["mat-row",""],["mat-icon-button","","color","accent",3,"click"],["aria-label","Edit"],["mat-icon-button","","color","warn",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"a",4),t._UZ(6,"mat-icon",5),t.TgZ(7,"span",6),t._uU(8,"Back"),t.qZA()()()(),t.TgZ(9,"div",7)(10,"h2",8),t._uU(11," SMS & WhatsApp \u015eablonlar\u0131 "),t.qZA()()(),t.TgZ(12,"div",9)(13,"button",10),t.NdJ("click",function(){return o.getSmsTemplate()}),t._UZ(14,"mat-icon",11),t._uU(15," Yenile "),t.qZA(),t.TgZ(16,"button",12),t.NdJ("click",function(){return o.addPanelOpen()}),t._UZ(17,"mat-icon",11),t._uU(18," Yeni \u015eablon Ekle "),t.qZA()()(),t.TgZ(19,"div",13)(20,"div",14)(21,"table",15),t.ynx(22,16),t.YNc(23,z,2,0,"th",17),t.YNc(24,R,2,2,"td",18),t.BQk(),t.ynx(25,19),t.YNc(26,q,2,0,"th",17),t.YNc(27,H,2,1,"td",18),t.BQk(),t.ynx(28,20),t.YNc(29,G,2,0,"th",17),t.YNc(30,K,4,2,"td",18),t.BQk(),t.ynx(31,21),t.YNc(32,j,2,0,"th",17),t.YNc(33,tt,4,2,"td",18),t.BQk(),t.ynx(34,22),t.YNc(35,et,2,0,"th",17),t.YNc(36,lt,4,2,"td",18),t.BQk(),t.ynx(37,23),t.YNc(38,ot,2,0,"th",17),t.YNc(39,it,4,2,"td",18),t.BQk(),t.YNc(40,ct,1,0,"tr",24),t.YNc(41,rt,1,0,"tr",25),t.ynx(42,26),t.YNc(43,pt,2,0,"th",17),t.YNc(44,ut,7,0,"td",18),t.BQk(),t.qZA(),t._UZ(45,"mat-paginator",27),t.qZA()()()),2&n&&(t.xp6(5),t.Q6J("routerLink","./.."),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:chevron-left"),t.xp6(8),t.Q6J("svgIcon","refresh"),t.xp6(2),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:link"),t.xp6(4),t.Q6J("dataSource",o.smstemplate),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(4),t.Q6J("pageSizeOptions",t.DdM(9,dt)))},dependencies:[g.O5,c.JJ,c.On,d.lW,d.RK,h.Hw,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,b.NW,A.Rr,Y.rH]})}return e})();var E=s(85804),y=s(28255),M=s(84385),ht=s(73162),gt=s(3238),_t=s(96308),St=s(10266),Tt=s(44466),Ct=s(71948);const xt=[{path:"",component:ft}];let vt=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[g.ez,c.u5,d.ot,f.lN,h.Ps,v.c,c.u5,c.UX,E.J,y.Tx,c.u5,r.p0,g.ez,h.Ps,f.lN,d.ot,f.lN,h.Ps,v.c,c.u5,c.UX,E.J,y.Tx,M.LD,h.Ps,Z.p9,d.ot,Z.p9,f.lN,h.Ps,v.c,y.Tx,b.TU,ht.Cv,gt.si,_t.JX,M.LD,A.rP,St.AV,Tt.m,u.Is,Ct.Fk,N.Hi,Y.Bz.forChild(xt)]})}return e})()}}]);