"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[2133],{3191:(C,p,a)=>{a.d(p,{x:()=>_});var t=a(1723),m=a(4650),l=a(6717);class _{constructor(c){this._httpService=c}getAnimalColorsDefList(){return this._httpService.getRequest(t.z.animalColorsDef.animalColorsDefList)}}_.\u0275fac=function(c){return new(c||_)(m.LFG(l.O))},_.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})},3822:(C,p,a)=>{a.d(p,{X:()=>_});var t=a(1723),m=a(4650),l=a(6717);class _{constructor(c){this._httpService=c}getUnitsList(){return this._httpService.getRequest(t.z.units.unitsList)}createUnits(c){return this._httpService.post(t.z.units.createUnits,c)}updateUnits(c){return this._httpService.post(t.z.units.updateUnits,c)}deleteUnits(c){return this._httpService.post(t.z.units.deleteUnits,c)}}_.\u0275fac=function(c){return new(c||_)(m.LFG(l.O))},_.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})},2133:(C,p,a)=>{a.d(p,{y:()=>u});var t=a(4650),m=a(5412),l=a(4006),_=a(9079),d=a(487),c=a(5263),T=a(3822),P=a(5707),A=a(3191),Z=a(9345),h=a(6257),v=a(4859),x=a(9549),I=a(7392),M=a(284),E=a(6895),U=a(4385),O=a(3238),y=a(6709),F=a(455),D=a(148);function b(i,n){1&i&&(t.TgZ(0,"span"),t._uU(1,"Hasta G\xfcncelle"),t.qZA())}function B(i,n){1&i&&(t.TgZ(0,"span"),t._uU(1,"Hasta Ekle"),t.qZA())}function L(i,n){if(1&i&&(t.ynx(0),t._UZ(1,"img",47),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("src",e.selectedPatientDetailsForm.get("images").value[e.selectedPatientDetailsForm.get("currentImageIndex").value],t.LSH)}}function N(i,n){1&i&&(t.TgZ(0,"span",48),t._uU(1,"NO IMAGE"),t.qZA())}function w(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",49)(1,"button",50),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.cycleImages(!1))}),t._UZ(2,"mat-icon",42),t.qZA(),t.TgZ(3,"span",51),t._uU(4),t.qZA(),t.TgZ(5,"button",50),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.cycleImages(!0))}),t._UZ(6,"mat-icon",42),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("svgIcon","heroicons_solid:arrow-narrow-left"),t.xp6(2),t.AsE(" ",e.selectedPatientDetailsForm.get("currentImageIndex").value+1," of ",e.selectedPatientDetailsForm.get("images").value.length," "),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:arrow-narrow-right")}}function J(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"mat-option",52),t._uU(2),t.qZA(),t.BQk()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function Q(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"mat-option",52),t._uU(2),t.qZA(),t.BQk()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function K(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"mat-option",52),t._uU(2),t.qZA(),t.BQk()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("value",e.type),t.xp6(1),t.hij(" ",e.name," ")}}function k(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-checkbox",54),t.NdJ("change",function(o){const g=t.CHM(e).$implicit,f=t.oxw(3);return t.KtG(f.toggleProductTag(g,o))}),t._uU(2),t.qZA(),t.BQk()}if(2&i){const e=n.$implicit;t.xp6(1),t.Q6J("color","primary"),t.xp6(1),t.hij(" ",e.breedName," ")}}function R(i,n){if(1&i&&(t.ynx(0),t.YNc(1,k,3,2,"ng-container",53),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.filteredTags)("ngForTrackBy",e.trackByFn)}}function S(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",56)(2,"input",57),t.NdJ("input",function(o){const g=t.CHM(e).$implicit,f=t.oxw(3);return t.KtG(f.updateTagTitle(g,o))}),t.qZA(),t.TgZ(3,"button",58),t.NdJ("click",function(){const s=t.CHM(e).$implicit,g=t.oxw(3);return t.KtG(g.deleteTag(s))}),t._UZ(4,"mat-icon",42),t.qZA()(),t.BQk()}if(2&i){const e=n.$implicit;t.xp6(1),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("value",e.breedName),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:trash")}}function W(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",55),t.YNc(2,S,5,3,"ng-container",53),t.qZA(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.filteredTags)("ngForTrackBy",e.trackByFn)}}function q(i,n){if(1&i){const e=t.EpF();t.ynx(0,59),t.TgZ(1,"div",60)(2,"button",61),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.patientBack())}),t._uU(3," Back "),t.qZA(),t.TgZ(4,"button",62),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.addOrUpdatePatients())}),t._uU(5," Bitir "),t.qZA()(),t.BQk()}if(2&i){const e=t.oxw(2);t.xp6(4),t.Q6J("disabled",e.selectedPatientDetailsForm.get("name").invalid||e.selectedPatientDetailsForm.get("birthDate").invalid||e.selectedPatientDetailsForm.get("sex").invalid)}}function Y(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-step",8)(2,"div",9)(3,"div",10)(4,"form",11)(5,"div",12)(6,"div",13)(7,"div",14)(8,"div",15),t.YNc(9,L,2,1,"ng-container",16),t.YNc(10,N,2,0,"ng-template",null,17,t.W1O),t.qZA(),t.YNc(12,w,7,4,"div",18),t.qZA(),t.TgZ(13,"div",19)(14,"span",20),t._uU(15,"K\u0131s\u0131rla\u015ft\u0131r\u0131lm\u0131\u015f"),t.qZA(),t.TgZ(16,"mat-slide-toggle",21),t._uU(17),t.qZA()()(),t.TgZ(18,"div",22)(19,"div",23)(20,"mat-form-field",24)(21,"mat-label"),t._uU(22,"Hasta Ad\u0131"),t.qZA(),t._UZ(23,"input",25),t.qZA(),t.TgZ(24,"div",26)(25,"mat-form-field",27)(26,"mat-label"),t._uU(27,"\xc7ip Numaras\u0131"),t.qZA(),t._UZ(28,"input",28),t.qZA(),t.TgZ(29,"mat-form-field",29)(30,"mat-label"),t._uU(31,"Karne/K\xfcpe Numaras\u0131"),t.qZA(),t._UZ(32,"input",28),t.qZA()(),t.TgZ(33,"div",26)(34,"mat-form-field",27)(35,"mat-label"),t._uU(36,"Do\u011fum Tarihi"),t.qZA(),t._UZ(37,"input",30)(38,"mat-datepicker-toggle",31)(39,"mat-datepicker",null,32),t.qZA(),t.TgZ(41,"mat-form-field",33)(42,"mat-label"),t._uU(43,"Rengi"),t.qZA(),t.TgZ(44,"mat-select",34),t.YNc(45,J,3,2,"ng-container",7),t.qZA()()(),t.TgZ(46,"div",26)(47,"mat-form-field",35)(48,"mat-label"),t._uU(49,"Hasta \xd6zel Durumu"),t.qZA(),t._UZ(50,"textarea",28),t.qZA()()(),t.TgZ(51,"div",36)(52,"mat-form-field",24)(53,"mat-label"),t._uU(54,"Cinsiyeti"),t.qZA(),t.TgZ(55,"mat-select",34),t.YNc(56,Q,3,2,"ng-container",7),t.qZA()()(),t.TgZ(57,"div",36)(58,"mat-form-field",24)(59,"mat-label"),t._uU(60,"T\xfcr"),t.qZA(),t.TgZ(61,"mat-select",37),t.NdJ("selectionChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.filterTagsByVendor(o))}),t.YNc(62,K,3,2,"ng-container",7),t.qZA()(),t.TgZ(63,"span",38),t._uU(64,"Irk\u0131"),t.qZA(),t.TgZ(65,"div",39)(66,"div",40)(67,"div",41),t._UZ(68,"mat-icon",42),t.TgZ(69,"input",43,44),t.NdJ("input",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.filterTags(o))})("keydown",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.filterTagsInputKeyDown(o))}),t.qZA()()(),t.TgZ(71,"div",45),t.YNc(72,R,2,2,"ng-container",6),t.YNc(73,W,3,2,"ng-container",6),t.qZA()()()()(),t.YNc(74,q,6,1,"ng-container",46),t.qZA()()()(),t.BQk()}if(2&i){const e=n.index,r=t.MAs(11),o=t.MAs(40),s=t.oxw();t.xp6(1),t.Q6J("stepControl",s.selectedPatientDetailsForm)("label","Hasta "+(e+1)),t.xp6(3),t.Q6J("formGroup",s.selectedPatientDetailsForm),t.xp6(5),t.Q6J("ngIf",s.selectedPatientDetailsForm.get("images").value.length)("ngIfElse",r),t.xp6(3),t.Q6J("ngIf",s.selectedPatientDetailsForm.get("images").value.length),t.xp6(4),t.Q6J("formControlName","sterilization")("color","primary"),t.xp6(1),t.hij(" ",!0===s.selectedPatientDetailsForm.get("sterilization").value?"Evet":"Hay\u0131r"," "),t.xp6(6),t.Q6J("formControlName","name"),t.xp6(5),t.Q6J("formControlName","chipNumber"),t.xp6(4),t.Q6J("formControlName","reportNumber"),t.xp6(5),t.Q6J("matDatepicker",o)("formControlName","birthDate"),t.xp6(1),t.Q6J("for",o),t.xp6(6),t.Q6J("formControlName","animalColor"),t.xp6(1),t.Q6J("ngForOf",s.animalcolorDefList),t.xp6(5),t.Q6J("formControlName","specialNote"),t.xp6(5),t.Q6J("formControlName","sex"),t.xp6(1),t.Q6J("ngForOf",s.sextype),t.xp6(5),t.Q6J("formControlName","animalType"),t.xp6(1),t.Q6J("ngForOf",s.animalTypesList),t.xp6(6),t.Q6J("svgIcon","heroicons_solid:search"),t.xp6(1),t.Q6J("maxLength",50),t.xp6(3),t.Q6J("ngIf",!s.tagsEditMode),t.xp6(1),t.Q6J("ngIf",s.tagsEditMode),t.xp6(1),t.Q6J("ngIf",s.isLastStep())}}class u{constructor(n,e,r,o,s,g,f,G,z){this._dialogRef=n,this._formBuilder=e,this._unitservice=r,this._translocoService=o,this._animalColorDefService=s,this._customerService=g,this.dialogRef=f,this.MatStepper=G,this.tabCount=z,this.selectedImage=null,this.animalcolorDefList=[],this.animalTypesList=[],this.animalBreedsDef=[],this.patientSteps=[],this.tagsEditMode=!1,this.flashMessage=null,this.patients=[],this.modalKapatildi=new t.vpe}ngOnInit(){this.getAnimalColorsDefList(),this.getAnimalTypesList(),this.getAnimalBreedsDefList(),this.counter=parseInt(this.tabCount.count),this.counter||(this.counter=1);for(let n=0;n<this.counter;n++)this.patientSteps.push({step:"$i"});this.selectedPatientDetailsForm=this._formBuilder.group({id:[""],name:["",[l.kI.required]],birthDate:["",[l.kI.required]],chipNumber:[""],sex:["",[l.kI.required]],animalType:["",[l.kI.required]],animalBreed:["",[l.kI.required]],animalColor:[""],reportNumber:[""],specialNote:[""],sterilization:[!1],images:[[]],active:[!1]}),this.fillFormData(this.selectedpatients),this.sextype=H,this.stepIndex=0}fillFormData(n){}addOrUpdatePatients(){this.selectedpatients=this.selectedPatientDetailsForm.value,this.patients.push(this.selectedpatients),this.addpatients()}closeDialog(n){this._dialogRef.close({status:!!n,data:n})}addpatients(){this.modalKapatildi.emit(),this.closeDialog(this.patients)}checkInputValid(){return this.inputValid=!!(this.selectedPatientDetailsForm.get("name").valid&&this.selectedPatientDetailsForm.get("birthDate").valid&&this.selectedPatientDetailsForm.get("sex").valid),this.inputValid}patientNext(){(this.selectedPatientDetailsForm.get("name").valid||this.selectedPatientDetailsForm.get("birthDate").valid||this.selectedPatientDetailsForm.get("sex").valid)&&(this.selectedpatients=this.selectedPatientDetailsForm.value,this.patients.push(this.selectedpatients),this.stepIndex++)}patientBack(){this.counter>1&&this.stepIndex--}updatepatients(){}getFormValueByName(n){return this.selectedPatientDetailsForm.get(n).value}isLastStep(){return this.stepIndex===this.patientSteps.length-1}isFirstStep(){return 0===this.stepIndex}finish(){}showSweetAlert(n){if("success"===n){const e=new d.c(this.translate("sweetalert.success"),this.translate("sweetalert.transactionSuccessful"),_.p.success);c.m.sweetAlert(e)}else{const e=new d.c(this.translate("sweetalert.error"),this.translate("sweetalert.transactionFailed"),_.p.error);c.m.sweetAlert(e)}}translate(n){return this._translocoService.translate(n)}onFileSelected(n){const e=n.target.files[0];if(e){const r=new FileReader;r.onload=o=>{this.selectedImage=o.target.result},r.readAsDataURL(e),this.selectedPatientDetailsForm.patchValue({images:[e]})}}filterTagsByVendor(n){const e=n.value;this.filteredTags=this.animalBreedsDef.filter(r=>r.animaltype==e)}filterTags(n){const e=n.target.value.toLowerCase();this.filteredTags=this.animalBreedsDef.filter(r=>r.breedName.toLowerCase().includes(e))}filterTagsInputKeyDown(n){"Enter"===n.key&&(0!==this.filteredTags.length||(n.target.value=""))}getAnimalColorsDefList(){this._animalColorDefService.getAnimalColorsDefList().subscribe(n=>{this.animalcolorDefList=n.data})}getAnimalTypesList(){this._customerService.getVetVetAnimalsType().subscribe(n=>{this.animalTypesList=n.data})}getAnimalBreedsDefList(){this._customerService.getAnimalBreedsDefList().subscribe(n=>{this.animalBreedsDef=n.data})}}u.\u0275fac=function(n){return new(n||u)(t.Y36(m.so),t.Y36(l.qu),t.Y36(T.X),t.Y36(P.Vn),t.Y36(A.x),t.Y36(Z.v),t.Y36(m.so),t.Y36(h.T5),t.Y36(m.WI))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-create-edit-patients-dialog"]],outputs:{modalKapatildi:"modalKapatildi"},decls:12,vars:4,consts:[["mat-dialog-title","",1,"mat-dialog-title"],[1,"dialog-close-button",3,"tabIndex","click"],[1,"material-icons"],[1,"modalForm"],[1,"modal-header"],[1,"modal-title"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"stepControl","label"],[1,"modal-body","mbody-patients"],[1,"qm-pr-content"],[1,"flex","flex-col","w-full",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","p-8"],[1,"flex","flex-col","items-center","sm:items-start","mb-8","sm:mb-0"],[1,"flex","flex-col","items-center"],[1,"w-32","h-44","border","rounded","overflow-hidden"],[4,"ngIf","ngIfElse"],["noImage",""],["class","flex items-center mt-2 whitespace-nowrap",4,"ngIf"],[1,"flex","flex-col","mt-8"],[1,"font-semibold","mb-2"],[3,"formControlName","color"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","flex-col","w-full","lg:w-2/4","sm:pl-8"],[1,"w-full"],["matInput","","required","",3,"formControlName"],[1,"flex"],[1,"w-1/3","pr-2"],["matInput","",3,"formControlName"],[1,"w-2/3","pl-2"],["matInput","",3,"matDatepicker","formControlName"],["matIconSuffix","",3,"for"],["picker",""],[1,"w-1/3","pl-2"],[3,"formControlName"],[1,"w-1/6","pr-2"],[1,"flex","flex-col","w-full","lg:w-1/4","sm:pl-8"],[3,"formControlName","selectionChange"],[1,"mb-px","font-medium","leading-tight"],[1,"mt-1.5","rounded-md","border","border-gray-300","dark:border-gray-500","shadow-sm","overflow-hidden"],[1,"flex","items-center","-my-px","py-2","px-3"],[1,"flex","items-center","flex-auto","min-w-0"],[1,"icon-size-5",3,"svgIcon"],["type","text","placeholder","Enter tag name",1,"min-w-0","ml-2","py-1","border-0",3,"maxLength","input","keydown"],["newTagInput",""],[1,"h-56","leading-none","overflow-y-auto","border-t","border-gray-300","dark:border-gray-500"],["class","mt-2 h-full",4,"ngIf"],[1,"w-full","h-full","object-cover",3,"src"],[1,"flex","items-center","min-h-20","text-lg","font-semibold"],[1,"flex","items-center","mt-2","whitespace-nowrap"],["mat-icon-button","",3,"click"],[1,"font-sm","mx-2"],[3,"value"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","h-10","min-h-10","pl-1","pr-4",3,"color","change"],[1,"p-4","space-y-2"],[1,"fuse-mat-dense","w-full",3,"subscriptSizing"],["matInput","",3,"value","input"],["mat-icon-button","","matSuffix","",3,"click"],[1,"mt-2","h-full"],[1,"bottom-0"],["mat-button","","matStepperPrevious","",1,"mr-3",3,"click"],["mat-button","",1,"bg-primary","text-white",3,"disabled","click"]],template:function(n,e){1&n&&(t.TgZ(0,"h1",0)(1,"button",1),t.NdJ("click",function(){return e.closeDialog()}),t.TgZ(2,"span",2),t._uU(3," highlight_off "),t.qZA()()(),t.TgZ(4,"div",3)(5,"mat-dialog-content")(6,"div",4)(7,"h5",5),t.YNc(8,b,2,0,"span",6),t.YNc(9,B,2,0,"span",6),t.qZA()(),t.TgZ(10,"mat-horizontal-stepper"),t.YNc(11,Y,75,27,"ng-container",7),t.qZA()()()),2&n&&(t.xp6(1),t.Q6J("tabIndex",-1),t.xp6(7),t.Q6J("ngIf",e.selectedpatients),t.xp6(1),t.Q6J("ngIf",!e.selectedpatients),t.xp6(2),t.Q6J("ngForOf",e.patientSteps))},dependencies:[l._Y,l.Fj,l.JJ,l.JL,l.Q7,v.lW,v.RK,x.KE,x.hX,x.R9,I.Hw,M.Nt,l.sg,l.u,E.sg,E.O5,U.gD,O.ey,y.oG,F.Rr,m.uh,m.xY,D.Mq,D.hl,D.nW,h.C0,h.Vq,h.fd]});const H=[{id:"1",parentId:null,name:"Erkek",slug:"Erkek"},{id:"2",parentId:null,name:"Di\u015fi",slug:"Di\u015fi"}]}}]);