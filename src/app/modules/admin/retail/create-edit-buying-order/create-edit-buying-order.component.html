<h1 mat-dialog-title class="mat-dialog-title">
    <button class="dialog-close-button" (click)="closeDialog()" [tabIndex]="-1">
        <span class="material-icons"> highlight_off </span>
    </button>
</h1>

<div class="modalForm">
    <mat-dialog-content>
        <div class="modal-header">
            <h5 class="modal-title">
                <span *ngIf="selectedsalebuy">Alış Güncelle</span>
                <span *ngIf="!selectedsalebuy">Alış Ekle</span>
            </h5>
        </div>

        <div class="modal-body mbody-store">
            <div class="qm-pr-content">

                <div class="container-fluid" [formGroup]="salebuy">
                    <div class="row">
                        <!-- <div class="col-sm-12 mt-2 common-width">
                          <mat-form-field style="width:100%">
                              <mat-label>Depo Kodu</mat-label>
                              <input matInput [formControlName]="'depotCode'" >
                              <mat-icon class="icon-size-5" matSuffix
                                  [svgIcon]="'heroicons_solid:user-circle'"></mat-icon>
                          </mat-form-field>
                      </div>
                      <div class="col-sm-12 mt-2 common-width">
                          <mat-form-field style="width:100%">
                              <mat-label>Depo Adı</mat-label>
                              <input matInput [formControlName]="'depotName'" >
                              <mat-icon class="icon-size-5" matSuffix
                                  [svgIcon]="'heroicons_solid:user-circle'"></mat-icon>
                          </mat-form-field>
                      </div> -->
                        <!-- <div class="float : left flex  gt-xs:flex-row" *ngIf="visibleCustomer">
                        <mat-form-field class="ml-5 flex-auto gt-xs:pl-3">
                            <mat-label>Müşteri</mat-label>
                            <mat-select [formControlName]="'customerId'" [placeholder]="'Müşteri'"
                                name="customerId">
                                <mat-select-filter [ngModelOptions]="{standalone: true}" [ngModel]="selectedCustomerId"
                                (ngModelChange)="filterCustomerId($event)">
                                </mat-select-filter>
                                <mat-option *ngFor="let item of customerlist"
                                    [value]="item.id">{{item.firstName}} {{item.lastName}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div> -->
                        <div class="float : left flex  gt-xs:flex-row" *ngIf="isSupplier">
                            <mat-form-field class="ml-5 flex-auto gt-xs:pl-3">
                                <mat-label>Sipariş Döküman No</mat-label>
                                <mat-select [formControlName]="'documentno'" [placeholder]="'Sipariş Döküman No'" (selectionChange)="filterDocumentNo($event.value)"
                                    name="documentno">
                                    <mat-select-filter [ngModelOptions]="{standalone: true}"
                                        [ngModel]="selectedDocumentNo" >
                                    </mat-select-filter>
                                    <mat-option *ngFor="let item of demandcards"
                                        [value]="item.id">{{item.documentno}}</mat-option>
                                </mat-select>
                               
                            </mat-form-field>
                            
                        </div>
                        <div class = " float : left flex  gt-xs:flex-row overflow-hidden" *ngIf="isSupplier">
                            <div class="" *ngIf="isVisible">
                                <div class="float : left flex  gt-xs:flex-row">
                                <div class="flex border-b">
                                    <!-- Selected product form -->
                                    <form class="ml-8 flex flex-col w-full">
                    
                                        <div class=" flex flex-col flex-2 sm:mb-25 overflow-hidden sm:overflow-y-hidden">
                                            <!-- Product images and status -->
                                            <!-- <div class="flex flex-col items-center sm:items-start mb-8 sm:mb-0"> -->
                                            <!-- <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden sm:overflow-y-auto"> -->
                                            <ng-container *ngIf="(demandTransList) as trans">
                                                <!-- <ng-container #noProducts> -->
                    
                                                <!-- </ng-container> -->
                                                <ng-container *ngIf="trans.length > 0; else noTrans">
                    
                                                    <div class="grid">
                    
                                                        <!-- Header -->
                                                        <div class="inventory-grid z-10 sticky top-0 grid gap-4 py-4 px-6 md:px-8 shadow text-md font-semibold text-secondary bg-gray-50 dark:bg-black dark:bg-opacity-5"
                                                            matSort matSortDisableClear>
                                                            <!-- <div></div> -->
                                                            <div></div>
                                                            <div class="hidden sm:block" [mat-sort-header]="'productId'">Ürün Adı</div>
                                                            <div class="hidden sm:block" [mat-sort-header]="reserved">
                                                                Toplam Tutar
                                                            </div>
                                                            <div class="hidden lg:block" [mat-sort-header]="stockState">
                                                                Adet
                                                            </div>
                                                            <div class="hidden lg:block" [mat-sort-header]="'isActive'">
                                                                Aktif
                                                            </div>
                                                            <div></div>
                                                            <!-- <div class="hidden sm:block w-12">Detay</div> -->
                                                        </div>
                                                        <!-- Rows -->
                                                        <ng-container *ngIf="(demandTransList) as trans">
                                                            <ng-container *ngFor="let product of trans; trackBy: trackByFn">
                                                                <div
                                                                    class="inventory-grid grid items-center gap-4 py-3 px-6 md:px-8 border-b">
                    
                                                                    <!-- <div class="flex flex-col gt-sm:flex-row"> -->
                                                                    <!-- <div class="flex flex-col"> -->
                    
                                                                    <!-- <mat-checkbox class="mb-2" type="checkbox" [checked]="false" [(ngModel)]="product.selected"  [color]="'primary'">
                                                                                      
                                                                                  </mat-checkbox> -->
                    
                                                                    <!-- </div> -->
                    
                                                                    <!-- </div> -->
                    
                                                                    <!-- <div class="form-check"><input type="checkbox" [(ngModel)]="product.selected"></div>  -->
                                                                    <div class="flex items-center">
                                                                        <div
                                                                            class="relative flex flex-0 items-center justify-center w-12 h-12 mr-6 rounded overflow-hidden border">
                                                                            <img class="w-8">
                                                                            <div
                                                                                class="flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase">
                                                                                NO THUMB
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div>
                                                                        <ng-container *ngFor="let productDescription of productdescription">
                                                                            <div class="truncate"
                                                                                *ngIf="productDescription.id === product.productId">
                                                                                {{ productDescription.name }}
                                                                            </div>
                    
                                                                        </ng-container>
                    
                                                                    </div>
                                                                    <!-- Price -->
                                                                    <div class="hidden sm:block">
                                                                        {{product.reserved | currency:'₺':'symbol':'1.2-2'}}
                                                                    </div>
                    
                                                                    <!-- Stock -->
                                                                    <div class="hidden lg:flex items-center">
                                                                        <div class="min-w-4">{{product.stockState}}</div>
                                                                        <!-- Low stock -->
                                                                        <div class="flex items-end ml-2 w-1 h-4 bg-red-200 rounded overflow-hidden"
                                                                            *ngIf="product.stockState < 20">
                                                                            <div class="flex w-full h-1/3 bg-red-600"></div>
                                                                        </div>
                                                                        <!-- Medium stock -->
                                                                        <div class="flex items-end ml-2 w-1 h-4 bg-orange-200 rounded overflow-hidden"
                                                                            *ngIf="product.stockState >= 20 && product.stockState < 30">
                                                                            <div class="flex w-full h-2/4 bg-orange-400"></div>
                                                                        </div>
                                                                        <!-- High stock -->
                                                                        <div class="flex items-end ml-2 w-1 h-4 bg-green-100 rounded overflow-hidden"
                                                                            *ngIf="product.stockState >= 30">
                                                                            <div class="flex w-full h-full bg-green-400"></div>
                                                                        </div>
                                                                    </div>
                                                                    <!-- Active -->
                                                                    <div class="hidden lg:block">
                                                                        <ng-container *ngIf="product.isActive === 1">
                                                                            <mat-icon class="text-green-400 icon-size-5"
                                                                                [svgIcon]="'heroicons_solid:check'"></mat-icon>
                                                                        </ng-container>
                                                                        <ng-container *ngIf="product.isActive === 0">
                                                                            <mat-icon class="text-gray-400 icon-size-5"
                                                                                [svgIcon]="'heroicons_solid:x'"></mat-icon>
                                                                        </ng-container>
                                                                    </div>
                    
                                                                    <!-- Details button -->
                    
                                                                </div>
                    
                                                                <!-- <div class="grid">
                                                                              <ng-container *ngIf="selectedDemand?.id === product.id">
                                                                                  <ng-container *ngTemplateOutlet="rowDetailsTemplate; context: {$implicit: product}"></ng-container>
                                                                              </ng-container> -->
                                                                <!-- </div>  -->
                                                            </ng-container>
                                                        </ng-container>
                                                    </div>
                    
                    
                                                </ng-container>
                                            </ng-container>
                                            <!-- </div> -->
                                            <ng-template #noTrans>
                                                <div class="p-8 sm:p-16 border-t text-4xl font-semibold tracking-tight text-center">Veri
                                                    bulunamadı.</div>
                                            </ng-template>
                    
                    
                    
                    
                                            <!-- </div> -->
                    
                    
                    
                                        </div>
                    
                    
                    
                                    </form>
                                </div>
                            </div>
                            </div>
                        </div>
                        <div class="mt-5 float : left flex  gt-xs:flex-row">
                            <mat-form-field class="ml-5 flex-auto gt-xs:pl-3">
                                <mat-label>Tarihi</mat-label>
                                <input matInput [matDatepicker]="picker" [formControlName]="'date'">
                                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>

                        </div>
                        <!-- <div class="float : left flex  gt-xs:flex-row" *ngIf="isSupplier"> 
                        <mat-form-field  class="ml-5 flex-auto gt-xs:pl-3">
                            <mat-label>Fatura No</mat-label>
                            <input matInput [formControlName]="'invoiceNo'" >
                            <mat-icon class="icon-size-5" matSuffix
                                [svgIcon]="'heroicons_solid:user-circle'"></mat-icon>
                        </mat-form-field>
                    </div> -->
                        <!-- <div class="float : left flex  gt-xs:flex-row">
                        <mat-form-field class="ml-5 flex-auto gt-xs:pl-3">
                            <mat-label>Ürünler</mat-label>
                            <mat-select [formControlName]="'productId'" [placeholder]="'Ürünler'"
                                name="productId">
                                <mat-select-filter [ngModelOptions]="{standalone: true}" [ngModel]="selectedProductId"
                                (ngModelChange)="filterProductId($event)">
                                </mat-select-filter>
                                <mat-option *ngFor="let item of productdescription"
                                    [value]="item.id">{{item.name}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div> -->
                        <div class="float : left flex  gt-xs:flex-row">
                            <mat-form-field class="ml-5 flex-auto gt-xs:pl-3">
                                <mat-label>Ödeme İşlemi</mat-label>
                                <mat-select [formControlName]="'paymentType'" [placeholder]="'Ödeme Tipi'"
                                    name="paymentType">
                                    <mat-option *ngFor="let item of payments"
                                        [value]="item.recId">{{item.name}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <!-- <div class="float : left flex  gt-xs:flex-row">
                        <mat-form-field class="ml-5 flex-auto gt-xs:pl-3">
                            <mat-label>Miktar</mat-label>
                            <input
                                type="number"
                                matInput
                                [formControlName]="'amount'">
                        </mat-form-field>
                    </div> -->

                        <!-- <div class="float : left flex  gt-xs:flex-row">
                    <mat-form-field class="ml-5 flex-auto gt-xs:pl-3">
                        <mat-label>Açıklama</mat-label>
                        <textarea matInput [formControlName]="'remark'" placeholder="Lütfen Notunuzu Yazınız..."></textarea>
                    </mat-form-field>
                </div> -->





                    </div>

                </div>
            </div>

            <div class="flex flex-col sm:flex-row sm:items-center justify-between mt-4 sm:mt-6">
                <div class="-ml-2">
                
                </div>

                <div class="flex items-center mt-4 sm:mt-0">
                    <button class="ml-auto sm:ml-0" mat-stroked-button (click)="closeDialog()">
                        Vazgeç
                    </button>
                    <button class="order-first sm:order-last ml-3" mat-flat-button [color]="'primary'"
                        (click)="addOrUpdateSaleBuy()">
                        Kaydet
                    </button>
                </div>
            </div>
        </div>


    </mat-dialog-content>
</div>